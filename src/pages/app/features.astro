---
import Layout from "../../layouts/Layout.astro";
import HeroSection from "../../components/HeroSection.astro";
import SectionHeading from "../../components/SectionHeading.astro";
import FeatureCard from "../../components/FeatureCard.astro";
import { getSessionWithUser } from '../../utils/session.server';

const sessionData = await getSessionWithUser(Astro.cookies);
const isLoggedIn = Boolean(sessionData);

const capabilityHighlights = [
  {
    title: "Quiz Institute",
    description:
      "Publish quiz platforms, organise subjects, and keep question banks current through the built-in admin console.",
  },
  {
    title: "FlashNote Workspace",
    description:
      "Capture study notes, trigger AI summaries and explanations, review via flashcards, and export shareable decks.",
  },
  {
    title: "Resume Studio",
    description:
      "Craft multiple resume versions, run AI improvements, duplicate drafts, and export polished PDFs in minutes.",
  },
  {
    title: "Mini-App Library",
    description:
      "Unlock 100 specialised mini-apps spanning writing, productivity, wellness, fun, and more under one subscription.",
  },
];

const experiencePillars = [
  {
    icon: "fas fa-graduation-cap",
    name: "Learning & Knowledge",
    details:
      "Quiz Institute, FlashNote, Study Planner, and Concept Explainer support learners and teachers alike.",
  },
  {
    icon: "fas fa-briefcase",
    name: "Career & Professional",
    details:
      "Resume Builder, Interview Coach, Visiting Card Maker, and Meeting Minutes AI sharpen every workday moment.",
  },
  {
    icon: "fas fa-pen-nib",
    name: "Writing & Creativity",
    details:
      "StoryCrafter, Poem Studio, Blog Writer, and Prompt Builder fuel storytelling, marketing, and script work.",
  },
  {
    icon: "fas fa-toolbox",
    name: "Utility & Productivity",
    details:
      "Snippet Generator, API Tester, JSON Formatter, and Clipboard Manager automate repetitive tasks.",
  },
  {
    icon: "fas fa-spa",
    name: "Lifestyle & Well-Being",
    details:
      "Wellness & Goal Planner, Meal Planner, Meditation Script Maker, and Travel Itinerary Builder encourage balance.",
  },
  {
    icon: "fas fa-gamepad",
    name: "Fun & Engagement",
    details:
      "Trivia Arena, Puzzle Zone, Would You Rather, and AI Character Chat keep communities energised between sessions.",
  },
];
---

<Layout>
  <main>
    <HeroSection
      eyebrow="Features"
      title="Everything inside the Ansiversa ecosystem"
      description="Discover the polished capabilities powering our AI-driven mini-apps—from intuitive onboarding to premium content drops."
    >
      <a
        slot="actions"
        href="/app/pricing"
        class="inline-flex items-center justify-center gap-2 rounded-full bg-white px-6 py-3 text-sm font-semibold text-slate-950 shadow-lg shadow-indigo-500/30 transition hover:-translate-y-0.5 hover:bg-slate-100"
      >
        Compare plans
      </a>
      <a
        slot="actions"
        href="/#mini-apps"
        class="inline-flex items-center justify-center gap-2 rounded-full border border-white/30 px-6 py-3 text-sm font-semibold text-white/80 transition hover:border-white/60 hover:text-white"
      >
        Browse mini-apps
      </a>
    </HeroSection>

    <section class="bg-white py-16 text-slate-900">
      <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Platform Capabilities"
          title="Built for fast starts and delightful daily use"
          description="Each capability is maintained by the Ansiversa team so you can focus on learning, creating, or planning—not configuration."
          containerClass="max-w-3xl"
        />
        <div class="mt-12 grid gap-6 sm:grid-cols-2">
          {capabilityHighlights.map((feature) => (
            <FeatureCard
              title={feature.title}
              description={feature.description}
              titleClass="text-xl font-semibold text-slate-900"
              class="transition hover:-translate-y-1 hover:shadow-xl"
            />
          ))}
        </div>
      </div>
    </section>

    <section class="bg-slate-100 py-16 text-slate-900">
      <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
        <div class="flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between">
          <SectionHeading
            eyebrow="Mini-App Pillars"
            title="Cohesive experiences across every category"
            description="Ansiversa bundles mini-apps into curated pillars so membership tiers feel intuitive and expansive as we ship new releases."
            containerClass="max-w-xl"
            eyebrowClass="text-xs font-semibold uppercase tracking-[0.35em] text-slate-500"
            titleClass="mt-4 text-3xl font-bold tracking-tight sm:text-4xl text-slate-900"
            descriptionClass="mt-3 text-base text-slate-600"
          />
          <div class="rounded-3xl border border-indigo-200 bg-gradient-to-br from-indigo-500/20 via-purple-500/10 to-sky-400/20 p-6 shadow-soft backdrop-blur sm:max-w-sm">
            <p class="text-sm font-semibold uppercase tracking-wide text-indigo-600">Drop cadence</p>
            <p class="mt-2 text-lg font-semibold text-slate-900">Bi-weekly updates</p>
            <p class="mt-2 text-sm text-slate-600">
              Expect new templates, AI prompts, and surprise mini-apps every few weeks. Elite members preview launches early.
            </p>
          </div>
        </div>
        <div class="mt-12 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {experiencePillars.map((pillar) => (
            <FeatureCard
              icon={pillar.icon}
              title={pillar.name}
              description={pillar.details}
              titleClass="text-lg font-semibold text-slate-900"
              class="transition hover:-translate-y-1 hover:shadow-lg"
            />
          ))}
        </div>
      </div>
    </section>

    <section class="relative overflow-hidden bg-slate-950 py-16">
      <div class="absolute inset-0 -z-10 bg-gradient-to-br from-indigo-600/60 via-sky-500/40 to-purple-600/60 blur-3xl opacity-60"></div>
      <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
        <div class="rounded-[34px] border border-white/10 bg-white/5 p-10 text-white shadow-2xl shadow-indigo-950/40 backdrop-blur">
          <div class="grid gap-10 lg:grid-cols-2">
            <div>
              <p class="text-xs font-semibold uppercase tracking-[0.35em] text-white/70">Experience Flow</p>
              <h2 class="mt-4 text-3xl font-bold tracking-tight">Three steps to start exploring</h2>
              <ul class="mt-6 space-y-4 text-sm text-white/80">
                <li class="flex items-start gap-3">
                  <span class="inline-flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-white/10 text-sm font-semibold text-white">
                    1
                  </span>
                  Sign up or log in with a magic link, then personalize your profile.
                </li>
                <li class="flex items-start gap-3">
                  <span class="inline-flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-white/10 text-sm font-semibold text-white">
                    2
                  </span>
                  Choose a pillar—Learning, Career, Creativity, Utility—and unlock the mini-apps in your plan.
                </li>
                <li class="flex items-start gap-3">
                  <span class="inline-flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-white/10 text-sm font-semibold text-white">
                    3
                  </span>
                  Track progress, save drafts, and share feedback to influence the next release.
                </li>
              </ul>
            </div>
            <div class="rounded-3xl border border-white/10 bg-white/10 p-6 shadow-lg shadow-indigo-900/40">
              {isLoggedIn ? (
                <>
                  <p class="text-sm font-semibold uppercase tracking-wide text-white/70">Keep exploring</p>
                  <div class="mt-6 space-y-4 text-sm text-white/80">
                    <p class="rounded-2xl border border-white/15 bg-white/10 px-4 py-3">
                      Pin favourite mini-apps and pick up exactly where you left off.
                    </p>
                    <p class="rounded-2xl border border-white/15 bg-white/10 px-4 py-3">
                      Switch between FlashNote, Resume Studio, and Quiz dashboards without losing context.
                    </p>
                    <p class="rounded-2xl border border-white/15 bg-white/10 px-4 py-3">
                      Share feedback from any workspace to influence the next feature drops.
                    </p>
                  </div>
                  <a href="/#mini-apps" class="mt-6 inline-flex items-center justify-center rounded-full bg-white px-6 py-3 text-sm font-semibold text-slate-950 shadow-lg shadow-indigo-500/30 transition hover:-translate-y-0.5 hover:bg-slate-100">
                    Open mini-app library
                  </a>
                </>
              ) : (
                <>
                  <p class="text-sm font-semibold uppercase tracking-wide text-white/70">Why members stay</p>
                  <div class="mt-6 space-y-4 text-sm text-white/80">
                    <p class="rounded-2xl border border-white/15 bg-white/10 px-4 py-3">
                      Cohesive UI and shortcuts across every mini-app keep you in flow.
                    </p>
                    <p class="rounded-2xl border border-white/15 bg-white/10 px-4 py-3">
                      AI suggestions evolve with your activity, surfacing smarter prompts every session.
                    </p>
                    <p class="rounded-2xl border border-white/15 bg-white/10 px-4 py-3">
                      Roadmap polls and feedback loops give members a voice in upcoming builds.
                    </p>
                  </div>
                  <a href="/app/signup" class="mt-6 inline-flex items-center justify-center rounded-full bg-white px-6 py-3 text-sm font-semibold text-slate-950 shadow-lg shadow-indigo-500/30 transition hover:-translate-y-0.5 hover:bg-slate-100">
                    Create your account
                  </a>
                </>
              )}
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>

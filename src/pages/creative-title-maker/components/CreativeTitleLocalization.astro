---
import SectionHeading from '../../../components/SectionHeading.astro';
import Button from '../../../components/Button.astro';
---
<section class="border-t border-slate-200 bg-slate-900 py-16 text-white" x-data="() => ({ maker: $store.creativeTitleMaker })">
  <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
    <SectionHeading
      eyebrow="Localization"
      title="Adapt every winning title for new markets without losing voice"
      description="Translate, re-invent wordplay, and preserve your brand glossary automatically. Compare locales side by side and send packs to local reviewers."
      class="text-white"
    />

    <div class="mt-12 grid gap-8 lg:grid-cols-[0.95fr_1.05fr]">
      <aside class="space-y-4">
        <article class="rounded-3xl border border-white/10 bg-white/5 p-6 shadow-xl backdrop-blur">
          <h3 class="text-lg font-semibold text-white">Locale selector</h3>
          <p class="mt-1 text-sm text-white/70">
            Toggle through localized variants to review tone, preserved terms, and cultural notes.
          </p>
          <div class="mt-4 space-y-3">
            <template x-for="sample in maker.state.localizationSamples" :key="sample.id">
              <button
                type="button"
                class="w-full rounded-2xl border border-white/10 px-4 py-3 text-left text-sm font-semibold transition"
                :class="maker.state.selectedLocaleId === sample.id
                  ? 'bg-indigo-500/40 text-white shadow-lg shadow-indigo-500/30'
                  : 'bg-white/5 text-white/80 hover:bg-white/10'"
                @click.prevent="maker.selectLocale(sample.id)"
              >
                <div class="flex items-center justify-between">
                  <span x-text="`${sample.language}`"></span>
                  <i class="fas fa-chevron-right text-xs"></i>
                </div>
                <p class="mt-1 text-xs text-white/60" x-text="sample.note"></p>
              </button>
            </template>
          </div>
          <Button
            href="/titles/api/localize"
            variant="ghost"
            class="mt-6 w-full justify-center rounded-full border border-white/20 text-white hover:bg-white/10"
          >
            <i class="fas fa-code-branch text-xs"></i>
            API reference
          </Button>
        </article>
        <article class="rounded-3xl border border-emerald-200/40 bg-emerald-500/10 p-6 shadow-inner">
          <h3 class="text-lg font-semibold text-emerald-100">Glossary safeguards</h3>
          <p class="mt-1 text-sm text-emerald-100/80">
            Protected phrases such as product names stay untouched. Add them in `/titles/settings`.
          </p>
          <ul class="mt-3 space-y-2 text-xs text-emerald-50">
            <template x-for="term in maker.selectedLocale?.preservedTerms ?? []" :key="term">
              <li class="inline-flex items-center gap-2 rounded-full border border-emerald-200/40 bg-emerald-500/20 px-3 py-1">
                <i class="fas fa-shield-heart text-[10px]"></i>
                <span x-text="term"></span>
              </li>
            </template>
          </ul>
          <p class="mt-3 text-xs text-emerald-100">
            <i class="fas fa-language text-[10px]"></i>
            Use `/titles/api/check/compliance` to validate banned words after localization.
          </p>
        </article>
      </aside>

      <article class="rounded-3xl border border-white/10 bg-gradient-to-br from-slate-950/80 via-slate-900/80 to-slate-950/60 p-6 shadow-2xl backdrop-blur">
        <header class="flex flex-wrap items-center justify-between gap-4">
          <div>
            <h3 class="text-lg font-semibold text-white" x-text="maker.selectedLocale?.language"></h3>
            <p class="text-sm text-white/70" x-text="maker.selectedLocale?.approach"></p>
          </div>
          <span class="inline-flex items-center gap-2 rounded-full bg-indigo-500/30 px-3 py-1 text-[11px] font-semibold text-indigo-100">
            <i class="fas fa-globe text-[10px]"></i>
            Locale-ready
          </span>
        </header>
        <div class="mt-5 space-y-4">
          <div class="rounded-2xl border border-white/10 bg-white/5 p-5">
            <p class="text-xs font-semibold uppercase tracking-wide text-white/60">Localized headline</p>
            <p class="mt-2 text-lg font-semibold text-white" x-text="maker.selectedLocale?.title"></p>
            <p class="mt-2 text-sm text-white/70" x-text="maker.selectedLocale?.adaptation"></p>
          </div>
          <div class="rounded-2xl border border-white/10 bg-white/5 p-5">
            <p class="text-xs font-semibold uppercase tracking-wide text-white/60">Cultural adaptation notes</p>
            <p class="mt-2 text-sm text-white/70" x-text="maker.selectedLocale?.note"></p>
          </div>
          <div class="rounded-2xl border border-white/10 bg-white/5 p-5">
            <p class="text-xs font-semibold uppercase tracking-wide text-white/60">Source variant reference</p>
            <p class="mt-2 text-sm text-white/70" x-text="maker.activeVariant?.text"></p>
            <p class="mt-1 text-xs text-white/50">Keyword placement stays in the first 60 characters, even after translation.</p>
          </div>
        </div>
      </article>
    </div>
  </div>
</section>

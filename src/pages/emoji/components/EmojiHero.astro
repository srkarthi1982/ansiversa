---
import Button from '../../../components/Button.astro';
---
<section class="relative overflow-hidden bg-gradient-to-br from-fuchsia-50 via-white to-sky-50 py-16 sm:py-20">
  <div class="absolute left-1/2 top-0 h-[480px] w-[480px] -translate-x-1/2 rounded-full bg-fuchsia-200/40 blur-3xl"></div>
  <div class="relative mx-auto flex max-w-6xl flex-col gap-12 px-4 sm:px-6 lg:flex-row lg:items-center lg:px-8">
    <div class="lg:w-7/12">
      <div class="space-y-6 text-center lg:text-left">
        <span
          class="inline-flex items-center gap-2 rounded-full bg-fuchsia-100 px-4 py-1.5 text-sm font-semibold text-fuchsia-700"
        >
          <i class="fas fa-face-smile-beam text-xs"></i>
          Emoji decoding studio
        </span>
        <h1 class="text-4xl font-bold tracking-tight text-slate-900 sm:text-5xl">Guess the Emoji</h1>
        <p class="text-base text-slate-600 sm:text-lg" x-text="emoji.state.hero?.description"></p>
        <div class="flex flex-wrap justify-center gap-3 lg:justify-start">
          <Button type="button" class="shadow-sm" @click.prevent="emoji.setActiveMode('classic')">
            <i class="fas fa-play text-xs"></i>
            Start Classic Run
          </Button>
          <Button type="button" variant="outline" @click.prevent="emoji.refreshDailySummary()">
            <i class="fas fa-sun text-xs"></i>
            View Daily Emoji
          </Button>
          <Button type="button" variant="ghost" @click.prevent="emoji.generateVersusInvite()">
            <i class="fas fa-user-group text-xs"></i>
            Challenge a Friend
          </Button>
        </div>
        <dl class="grid gap-4 text-left sm:grid-cols-3">
          <template x-for="metric in emoji.state.hero?.metrics ?? []" :key="metric.label">
            <div class="rounded-2xl border border-fuchsia-100/80 bg-white/80 p-4 shadow-sm">
              <dt class="text-xs font-semibold uppercase tracking-wide text-fuchsia-600" x-text="metric.label"></dt>
              <dd class="mt-1 text-2xl font-bold text-slate-900" x-text="metric.value"></dd>
              <dd class="mt-1 text-xs text-slate-500" x-text="metric.helper"></dd>
            </div>
          </template>
        </dl>
        <div class="flex flex-wrap items-center justify-center gap-3 text-xs text-slate-500 lg:justify-start">
          <span class="font-semibold uppercase tracking-wide text-fuchsia-600">Integrates with</span>
          <template x-for="integration in emoji.state.hero?.integrations ?? []" :key="integration">
            <span class="inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 font-medium text-slate-600 shadow-sm">
              <i class="fas fa-plug-circle-bolt text-[10px] text-fuchsia-500"></i>
              <span x-text="integration"></span>
            </span>
          </template>
        </div>
        <p class="text-xs text-slate-500" x-show="emoji.state.lastAction" x-cloak>
          <i class="fas fa-sparkles mr-2 text-[10px] text-fuchsia-500"></i>
          <span x-text="emoji.state.lastAction"></span>
        </p>
      </div>
    </div>
    <div class="relative w-full lg:w-5/12">
      <div class="absolute inset-0 translate-x-6 translate-y-6 rounded-3xl bg-sky-200 opacity-40 blur-xl"></div>
      <div class="relative space-y-5 rounded-3xl border border-slate-200 bg-white p-6 shadow-xl">
        <header class="flex items-start justify-between">
          <div>
            <p class="text-sm font-semibold text-slate-900">Live emoji puzzle</p>
            <p class="text-xs text-slate-500" x-text="emoji.state.puzzlePreview?.clue"></p>
          </div>
          <span class="inline-flex items-center gap-2 rounded-full bg-fuchsia-100 px-3 py-1 text-xs font-semibold text-fuchsia-700">
            <i class="fas fa-wand-magic-sparkles text-[10px]"></i>
            Preview
          </span>
        </header>
        <div class="space-y-3 rounded-2xl border border-slate-100 bg-slate-50/80 p-4 text-center">
          <p class="text-4xl" x-text="emoji.state.puzzlePreview?.emojis ?? '❓❓'"></p>
          <div class="flex flex-wrap items-center justify-center gap-3 text-xs text-slate-500">
            <span class="inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 font-semibold text-slate-600 shadow-sm">
              <i class="fas fa-tag text-[10px] text-fuchsia-500"></i>
              <span x-text="emoji.state.puzzlePreview?.category"></span>
            </span>
            <span class="inline-flex items-center gap-2 rounded-full bg-fuchsia-50 px-3 py-1 font-semibold capitalize text-fuchsia-700">
              <i class="fas fa-signal text-[10px]"></i>
              <span x-text="emoji.state.puzzlePreview?.difficulty"></span>
            </span>
          </div>
        </div>
        <div class="space-y-3">
          <label class="block text-xs font-semibold uppercase tracking-wide text-slate-500" for="emoji-hero-answer">
            Your answer
          </label>
          <input
            id="emoji-hero-answer"
            type="text"
            class="w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 shadow-sm focus:border-fuchsia-500 focus:outline-none focus:ring-2 focus:ring-fuchsia-200"
            placeholder="Type your guess…"
            x-model="emoji.state.guessInput"
            @keydown.enter.prevent="emoji.submitGuess()"
          />
          <div class="flex flex-wrap gap-2">
            <Button type="button" size="sm" class="shadow-sm" @click.prevent="emoji.submitGuess()">
              <i class="fas fa-check text-[10px]"></i>
              Check answer
            </Button>
            <Button type="button" size="sm" variant="outline" @click.prevent="emoji.resetGuess()">
              <i class="fas fa-rotate text-[10px]"></i>
              Reset
            </Button>
            <Button type="button" size="sm" variant="ghost" @click.prevent="emoji.useHint('get-clue')">
              <i class="fas fa-lightbulb text-[10px]"></i>
              Use clue
            </Button>
          </div>
          <p
            class="rounded-2xl border px-4 py-3 text-xs"
            :class="{
              'border-emerald-200 bg-emerald-50 text-emerald-700': emoji.state.guessStatus === 'correct',
              'border-rose-200 bg-rose-50 text-rose-600': emoji.state.guessStatus === 'incorrect',
              'border-slate-200 bg-slate-50 text-slate-500': emoji.state.guessStatus === 'idle',
            }"
          >
            <span x-show="emoji.state.guessStatus === 'correct'" x-cloak>
              <i class="fas fa-trophy mr-2 text-[10px]"></i>
              Nailed it! <span x-text="emoji.state.puzzlePreview?.explanation"></span>
            </span>
            <span x-show="emoji.state.guessStatus === 'incorrect'" x-cloak>
              <i class="fas fa-circle-question mr-2 text-[10px]"></i>
              Not quite yet. Aliases like <span x-text="emoji.state.puzzlePreview?.aliases.join(', ')"></span> also count.
            </span>
            <span x-show="emoji.state.guessStatus === 'idle'">
              <i class="fas fa-keyboard mr-2 text-[10px]"></i>
              Try decoding the emoji string — accepted answers ignore punctuation and spacing.
            </span>
          </p>
        </div>
        <div class="rounded-2xl border border-slate-100 bg-slate-50/80 p-4 text-xs text-slate-500">
          <div class="flex flex-wrap items-center justify-between gap-3">
            <span class="inline-flex items-center gap-2 font-semibold text-slate-600">
              <i class="fas fa-sparkles text-[10px] text-fuchsia-500"></i>
              Hint tokens
            </span>
            <span class="rounded-full bg-white px-3 py-1 font-semibold text-slate-700 shadow-sm" x-text="emoji.state.hintTokens"></span>
          </div>
          <p class="mt-3" x-show="emoji.state.recentHint" x-cloak>
            <i class="fas fa-comment-dots mr-2 text-[10px] text-fuchsia-500"></i>
            <span x-text="emoji.state.recentHint"></span>
          </p>
          <p class="mt-3" x-show="emoji.state.puzzlePreview?.keyboardBank" x-cloak>
            Keyboard bank: <span class="font-mono font-semibold text-slate-700" x-text="emoji.state.puzzlePreview?.keyboardBank"></span>
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

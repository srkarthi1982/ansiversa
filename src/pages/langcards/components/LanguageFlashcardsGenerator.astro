<section id="langcards-generator" class="bg-slate-50 py-16">
  <div class="mx-auto max-w-6xl space-y-10 px-4 sm:px-6 lg:px-8">
    <header class="text-center lg:text-left">
      <p class="inline-flex items-center gap-2 rounded-full bg-emerald-100 px-4 py-1.5 text-sm font-semibold text-emerald-700">
        <i class="fas fa-wand-magic-sparkles text-xs"></i>
        Auto-generate decks
      </p>
      <h2 class="mt-4 text-3xl font-bold tracking-tight text-slate-900 sm:text-4xl">Paste text, detect language, and approve suggested cards</h2>
      <p class="mt-3 text-base text-slate-600 sm:text-lg">Tokenize, lemmatize, and rank candidates with frequency and novelty heuristics. Upgrade to Pro for full phrase and POS coverage.</p>
    </header>
    <div class="grid gap-8 lg:grid-cols-[1.1fr_1fr]">
      <div class="space-y-6">
        <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
          <div class="flex flex-wrap items-center justify-between gap-3">
            <div>
              <p class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-500">Source text</p>
              <p class="mt-1 text-sm text-slate-500">Detected language <span class="font-semibold text-slate-700" x-text="app.state.generator.summary.detected.toUpperCase()"></span></p>
            </div>
            <button
              type="button"
              class="inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-indigo-300 hover:text-indigo-500"
              @click.prevent="app.regenerateCandidates()"
            >
              <i class="fas fa-rotate text-[10px]"></i>
              Regenerate
            </button>
          </div>
          <textarea
            class="mt-4 h-36 w-full resize-none rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 focus:border-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-300"
            x-model="app.state.generator.summary.sourceSnippet"
          ></textarea>
          <div class="mt-4 flex flex-wrap gap-3 text-xs text-slate-600">
            <span class="inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 font-semibold">
              <i class="fas fa-language text-[10px]"></i>
              Base: <span x-text="app.state.generator.summary.baseLang"></span>
            </span>
            <span class="inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 font-semibold">
              <i class="fas fa-language text-[10px]"></i>
              Target: <span x-text="app.state.generator.summary.targetLang"></span>
            </span>
            <span class="inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 font-semibold">
              <i class="fas fa-hashtag text-[10px]"></i>
              Candidates <span x-text="app.state.generator.summary.candidates.length"></span>
            </span>
          </div>
        </div>
        <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
          <h3 class="text-base font-semibold text-slate-900">Token insights</h3>
          <p class="mt-1 text-xs text-slate-500">Lemmas already known are de-prioritized.</p>
          <div class="mt-4 grid gap-3 sm:grid-cols-2">
            <template x-for="token in app.state.generator.summary.tokens" :key="token.lemma">
              <div class="rounded-2xl border border-slate-200 bg-slate-50 p-4 text-xs text-slate-600">
                <p class="text-sm font-semibold text-slate-900" x-text="token.token"></p>
                <p class="mt-1">Lemma: <span class="font-semibold" x-text="token.lemma"></span></p>
                <p class="mt-1">Frequency rank: <span class="font-semibold" x-text="token.frequencyRank"></span></p>
                <p class="mt-1" x-text="token.alreadyKnown ? 'Already in deck' : 'New candidate'" :class="token.alreadyKnown ? 'text-emerald-600 font-semibold' : 'text-slate-500'"></p>
              </div>
            </template>
          </div>
          <div class="mt-4 rounded-2xl border border-dashed border-slate-300 bg-slate-50 px-4 py-3 text-xs text-slate-500">
            <p class="font-semibold text-slate-700">Heuristics applied</p>
            <ul class="mt-2 space-y-1">
              <template x-for="rule in app.state.generator.summary.heuristics" :key="rule">
                <li class="flex items-center gap-2">
                  <i class="fas fa-check text-[10px] text-emerald-500"></i>
                  <span x-text="rule"></span>
                </li>
              </template>
            </ul>
          </div>
        </div>
      </div>
      <div class="space-y-6">
        <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-lg shadow-slate-200/60">
          <div class="flex flex-wrap items-center justify-between gap-3">
            <div>
              <h3 class="text-base font-semibold text-slate-900">Candidate cards</h3>
              <p class="text-xs text-slate-500" x-text="app.state.generator.statusMessage"></p>
            </div>
            <button
              type="button"
              class="inline-flex items-center gap-2 rounded-full bg-indigo-600 px-4 py-2 text-xs font-semibold text-white shadow-sm shadow-indigo-500/30 transition hover:bg-indigo-500"
              @click.prevent="app.commitSelectedCandidates()"
            >
              <i class="fas fa-cloud-arrow-down text-[10px]"></i>
              Add to deck
            </button>
          </div>
          <div class="mt-5 space-y-4">
            <template x-for="candidate in app.state.generator.summary.candidates" :key="candidate.id">
              <article
                class="rounded-2xl border px-4 py-3 text-sm transition"
                :class="app.state.generator.selectedIds.includes(candidate.id) ? 'border-indigo-400 bg-indigo-50 shadow' : 'border-slate-200 bg-slate-50 hover:border-indigo-300 hover:bg-white'"
                @click.prevent="app.toggleCandidateSelection(candidate.id)"
              >
                <div class="flex flex-wrap items-center justify-between gap-2">
                  <div>
                    <p class="text-sm font-semibold text-slate-900" x-text="candidate.base"></p>
                    <p class="text-xs text-slate-500" x-text="candidate.target"></p>
                  </div>
                  <span class="inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 text-[11px] font-semibold text-slate-600 shadow-sm">
                    <i class="fas fa-star text-[9px] text-amber-500"></i>
                    Score <span x-text="Math.round(candidate.noveltyScore * 100)"></span>
                  </span>
                </div>
                <p class="mt-2 text-xs text-slate-500" x-text="candidate.reason"></p>
                <div class="mt-3 flex flex-wrap gap-2 text-[11px] text-slate-500">
                  <span class="inline-flex items-center gap-1 rounded-full bg-slate-100 px-2 py-1">Type: <span class="font-semibold capitalize" x-text="candidate.type"></span></span>
                  <span class="inline-flex items-center gap-1 rounded-full bg-slate-100 px-2 py-1">POS: <span class="font-semibold" x-text="candidate.pos ?? 'â€”'"></span></span>
                  <span class="inline-flex items-center gap-1 rounded-full bg-slate-100 px-2 py-1">Freq <span class="font-semibold" x-text="candidate.frequencyRank"></span></span>
                </div>
                <div class="mt-3 rounded-2xl border border-slate-200 bg-white px-3 py-2 text-xs text-slate-500">
                  <p x-show="candidate.exampleBase"><span class="font-semibold">Example:</span> <span x-text="candidate.exampleBase"></span></p>
                  <p x-show="candidate.exampleTarget"><span class="font-semibold">Target:</span> <span x-text="candidate.exampleTarget"></span></p>
                </div>
              </article>
            </template>
            <p x-show="!app.state.generator.summary.candidates.length" class="rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-4 text-sm text-slate-500">
              No candidates generated yet. Paste a passage and regenerate suggestions.
            </p>
          </div>
        </div>
        <div class="rounded-3xl border border-slate-200 bg-white p-6 text-sm text-slate-600">
          <h3 class="text-base font-semibold text-slate-900">Plan capabilities</h3>
          <p class="mt-2 text-xs text-slate-500">Auto-generator scales by plan tier.</p>
          <dl class="mt-4 grid gap-4 sm:grid-cols-2">
            <div class="rounded-2xl border border-slate-200 bg-slate-50 p-4">
              <dt class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-500">Free</dt>
              <dd class="mt-2 text-sm">Words-only generation, CSV import, TTS audio.</dd>
            </div>
            <div class="rounded-2xl border border-emerald-300 bg-emerald-50 p-4">
              <dt class="text-xs font-semibold uppercase tracking-[0.2em] text-emerald-600">Pro</dt>
              <dd class="mt-2 text-sm">Phrases, POS tagging, conjugation helper, audio recording, share links.</dd>
            </div>
          </dl>
        </div>
      </div>
    </div>
  </div>
</section>

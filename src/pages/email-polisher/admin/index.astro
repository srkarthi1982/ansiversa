---
import Layout from "../../../layouts/Layout.astro";
import Button from "../../../components/Button.astro";
---

<Layout>
  <main class="bg-slate-50 min-h-screen" x-data="() => ({ loader: $store.loader, app: $store['email'] ?? {} })">
    <section class="border-b border-slate-200 bg-white py-12">
      <div class="mx-auto max-w-5xl space-y-4 px-4 sm:px-6 lg:px-8">
        <h1 class="text-3xl font-bold tracking-tight text-slate-900 sm:text-4xl">Email Polisher — Admin Console</h1>
        <p class="text-sm text-slate-600">
          Monitor plan usage, API health, and privacy controls across the Email Polisher workspace. All metrics refresh every 15
          minutes.
        </p>
        <div class="flex flex-wrap gap-3 text-xs">
          <Button href="/email" variant="outline">
            <i class="fas fa-arrow-left text-[10px]"></i>
            Back to workspace
          </Button>
          <Button href="/documentation" variant="ghost">
            <i class="fas fa-book text-[10px]"></i>
            Documentation
          </Button>
        </div>
      </div>
    </section>

    <section class="py-12">
      <div class="mx-auto max-w-6xl space-y-12 px-4 sm:px-6 lg:px-8">
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-4">
          <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
            <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Active users</p>
            <p class="mt-3 text-3xl font-bold text-slate-900">1,284</p>
            <p class="mt-1 text-xs text-slate-500">Across Free and Pro plans this week.</p>
          </article>
          <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
            <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Polishes (30d)</p>
            <p class="mt-3 text-3xl font-bold text-slate-900">42,610</p>
            <p class="mt-1 text-xs text-slate-500">Includes rewrites and tone adjustments.</p>
          </article>
          <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
            <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Reply suggestions</p>
            <p class="mt-3 text-3xl font-bold text-slate-900">9,412</p>
            <p class="mt-1 text-xs text-slate-500">Variants generated via `/email/api/reply`.</p>
          </article>
          <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
            <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Translation usage</p>
            <p class="mt-3 text-3xl font-bold text-slate-900">3,005</p>
            <p class="mt-1 text-xs text-slate-500">Pro feature across 7 languages.</p>
          </article>
        </div>

        <div class="grid gap-6 lg:grid-cols-[1fr_0.8fr]">
          <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
            <header class="flex items-center justify-between">
              <h2 class="text-lg font-semibold text-slate-900">Rate limits & quotas</h2>
              <span class="inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600">
                <i class="fas fa-gauge text-[10px]"></i>
                95% uptime
              </span>
            </header>
            <table class="mt-4 w-full text-left text-sm">
              <thead class="text-xs uppercase tracking-wide text-slate-500">
                <tr>
                  <th class="py-2">Endpoint</th>
                  <th class="py-2">Free</th>
                  <th class="py-2">Pro</th>
                </tr>
              </thead>
              <tbody class="text-slate-600">
                <tr class="border-t border-slate-100">
                  <td class="py-2">Polish</td>
                  <td class="py-2">30 / month</td>
                  <td class="py-2">Unlimited</td>
                </tr>
                <tr class="border-t border-slate-100">
                  <td class="py-2">Reply</td>
                  <td class="py-2">15 / day</td>
                  <td class="py-2">Unlimited</td>
                </tr>
                <tr class="border-t border-slate-100">
                  <td class="py-2">Summarize</td>
                  <td class="py-2">—</td>
                  <td class="py-2">500 / day</td>
                </tr>
                <tr class="border-t border-slate-100">
                  <td class="py-2">Translate</td>
                  <td class="py-2">—</td>
                  <td class="py-2">Unlimited</td>
                </tr>
              </tbody>
            </table>
          </article>

          <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
            <h2 class="text-lg font-semibold text-slate-900">Privacy controls</h2>
            <ul class="mt-4 space-y-3 text-sm text-slate-600">
              <li class="flex items-start gap-3">
                <i class="fas fa-toggle-on text-indigo-500"></i>
                <span><strong>Ephemeral mode</strong> — currently enabled for 37% of sessions. Autoclears drafts after polishing.</span>
              </li>
              <li class="flex items-start gap-3">
                <i class="fas fa-shield text-indigo-500"></i>
                <span><strong>Variable redaction</strong> — `{Email}` and `{Phone}` placeholders masked in exports by default.</span>
              </li>
              <li class="flex items-start gap-3">
                <i class="fas fa-person-circle-check text-indigo-500"></i>
                <span><strong>Consent banner</strong> — displayed for new users informing about AI processing.</span>
              </li>
            </ul>
          </article>
        </div>

        <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
          <header class="flex items-center justify-between">
            <h2 class="text-lg font-semibold text-slate-900">Recent API activity</h2>
            <Button variant="ghost" href="/documentation">
              <i class="fas fa-arrow-up-right-from-square text-[10px]"></i>
              View docs
            </Button>
          </header>
          <div class="mt-4 overflow-x-auto">
            <table class="min-w-full text-left text-sm">
              <thead class="text-xs uppercase tracking-wide text-slate-500">
                <tr>
                  <th class="py-2">Timestamp</th>
                  <th class="py-2">Endpoint</th>
                  <th class="py-2">Status</th>
                  <th class="py-2">Latency</th>
                </tr>
              </thead>
              <tbody class="text-slate-600">
                <tr class="border-t border-slate-100">
                  <td class="py-2">2025-02-15 14:02 UTC</td>
                  <td class="py-2">POST /email/api/polish</td>
                  <td class="py-2 text-emerald-600">200 OK</td>
                  <td class="py-2">612 ms</td>
                </tr>
                <tr class="border-t border-slate-100">
                  <td class="py-2">2025-02-15 13:56 UTC</td>
                  <td class="py-2">POST /email/api/reply</td>
                  <td class="py-2 text-emerald-600">200 OK</td>
                  <td class="py-2">845 ms</td>
                </tr>
                <tr class="border-t border-slate-100">
                  <td class="py-2">2025-02-15 13:42 UTC</td>
                  <td class="py-2">POST /email/api/summarize</td>
                  <td class="py-2 text-amber-600">429 Rate Limited</td>
                  <td class="py-2">—</td>
                </tr>
              </tbody>
            </table>
          </div>
        </article>
      </div>
    </section>
  </main>
</Layout>

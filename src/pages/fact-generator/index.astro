---
import Layout from "../../layouts/Layout.astro";
import Button from "../../components/Button.astro";
import FeatureCard from "../../components/FeatureCard.astro";
import SectionHeading from "../../components/SectionHeading.astro";

const heroMetrics = [
  { label: "Source-backed", value: "100%", description: "Every fact ships with citations." },
  { label: "Reading levels", value: "4", description: "Kids, Teen, Adult, Expert." },
  { label: "Languages", value: "10+", description: "Launch set with English, Tamil, Arabic, more." },
];

const factCardHighlights = [
  {
    title: "Citations first",
    description:
      "Each fact surfaces 1–3 vetted references with publisher badges so learners always know where information comes from.",
    icon: "fas fa-quote-right",
  },
  {
    title: "Adaptive readability",
    description:
      "Toggle language, kid-safe vocabulary, and audience level to generate wording that suits classrooms, parents, or experts.",
    icon: "fas fa-language",
  },
  {
    title: "Actionable follow-ups",
    description:
      "Explain deeper, spin facts into quizzes, save to collections, export as PNG/MD/JSON, or share instantly.",
    icon: "fas fa-sparkles",
  },
];

const factModes = [
  {
    title: "Random",
    description:
      "Hit Surprise me to discover trusted facts without repeats in your recent history window.",
    icon: "fas fa-dice",
    eyebrow: "Mode",
  },
  {
    title: "By topic",
    description:
      "Browse curated streams for Space, Biology, History, Tech, Geography, and more with subtopic filters.",
    icon: "fas fa-compass",
    eyebrow: "Mode",
  },
  {
    title: "Daily fact",
    description:
      "Receive the featured fact of the day, maintain streaks, and unlock the archive with a Pro plan.",
    icon: "fas fa-sun",
    eyebrow: "Mode",
  },
  {
    title: "Packs & collections",
    description:
      "Save favourites into themed collections or dive into built-in packs like Space 100 and World Flags.",
    icon: "fas fa-layer-group",
    eyebrow: "Mode",
  },
];

const workflowSteps = [
  {
    eyebrow: "Step 1",
    title: "Set preferences",
    description:
      "Choose language, reading level, and kid-safe toggle right from the hub settings chip before you explore.",
    icon: "fas fa-sliders",
  },
  {
    eyebrow: "Step 2",
    title: "Discover & interact",
    description:
      "Open a fact card to scan citations, switch to kid wording, and launch Explain More or Quizify flows inline.",
    icon: "fas fa-bolt",
  },
  {
    eyebrow: "Step 3",
    title: "Collect & export",
    description:
      "Save to packs, keep your streak going, and export beautiful share-ready assets in PNG, Markdown, or JSON.",
    icon: "fas fa-box-archive",
  },
];

const trustPillars = [
  {
    title: "Source tiers",
    description:
      "Facts are graded A (official agencies), B (reputable secondary), or C (community) with badges and review flags.",
    icon: "fas fa-shield-check",
  },
  {
    title: "Kid-safe moderation",
    description:
      "Language filters and topic gating prevent graphic or sensitive content, with transparent explanations when hidden.",
    icon: "fas fa-child",
  },
  {
    title: "Duplicate guardrails",
    description:
      "Hash-based detection avoids repeating facts inside active sessions and across Surprise me runs.",
    icon: "fas fa-clone",
  },
];

const planMatrix = [
  {
    feature: "Random / Topic / Daily",
    free: "Included",
    pro: "Included",
  },
  {
    feature: "Explain More depth",
    free: "Short",
    pro: "Medium + Long",
  },
  {
    feature: "Quizify",
    free: "3 questions",
    pro: "5–10 + Quiz export",
  },
  {
    feature: "Collections",
    free: "Up to 3",
    pro: "Unlimited",
  },
  {
    feature: "Packs",
    free: "Built-in only",
    pro: "Create & import",
  },
  {
    feature: "Exports",
    free: "PNG with watermark",
    pro: "PNG / MD / JSON",
  },
  {
    feature: "Archive",
    free: "Today only",
    pro: "Full history",
  },
];

const apiContracts = [
  { method: "POST", path: "/fact-generator/api/random", summary: "Deliver a non-repeating fact card respecting user prefs." },
  { method: "POST", path: "/fact-generator/api/topic", summary: "Fetch facts for a chosen topic and optional subtopic." },
  { method: "POST", path: "/fact-generator/api/explain", summary: "Generate short, medium, or long explainers per fact." },
  { method: "POST", path: "/fact-generator/api/quiz", summary: "Spin a fact into MCQ/TF quiz items with rationales." },
  { method: "POST", path: "/fact-generator/api/save", summary: "Attach a fact to a user collection or pack." },
  { method: "POST", path: "/fact-generator/api/export", summary: "Produce shareable PNG, Markdown, or JSON exports." },
];

const accessibilityNotes = [
  "Large typography, high-contrast palettes, and focus-visible controls across the hub.",
  "ARIA labels on Surprise me, copy, share, and export buttons for screen readers.",
  "RTL layouts and localized numerals for Arabic plus regionalized date formats.",
  "Reduced motion preference respected for streak counters and celebratory animations.",
];
---
<Layout>
  <main class="min-h-screen bg-slate-50">
    <section class="relative overflow-hidden py-16 sm:py-24">
      <div class="pointer-events-none absolute inset-0 -z-10 bg-gradient-to-br from-indigo-100 via-white to-transparent"></div>
      <div class="relative mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
        <div class="grid items-center gap-12 lg:grid-cols-[1.05fr_0.95fr]">
          <div class="space-y-6 text-center lg:text-left">
            <span class="inline-flex items-center gap-2 rounded-full bg-indigo-100 px-4 py-1.5 text-sm font-semibold text-indigo-700">
              <i class="fas fa-asterisk text-xs" aria-hidden="true"></i>
              Learning &amp; Knowledge suite
            </span>
            <h1 class="text-4xl font-bold tracking-tight text-slate-900 sm:text-5xl">
              Fact Generator
            </h1>
            <p class="text-base text-slate-600 sm:text-lg">
              Deliver trustworthy, citation-backed facts in seconds. Pick a topic or let Surprise me guide you, tailor the wording for kids or experts, and launch explainers, quizzes, or exports without ever leaving the card.
            </p>
            <div class="flex flex-wrap items-center justify-center gap-3 lg:justify-start">
              <Button href="#modes" class="shadow-sm">
                <i class="fas fa-dice text-xs" aria-hidden="true"></i>
                Explore fact modes
              </Button>
              <Button href="#trust" variant="outline">
                <i class="fas fa-shield-check text-xs" aria-hidden="true"></i>
                View trust layer
              </Button>
              <Button href="#plans" variant="ghost">
                <i class="fas fa-crown text-xs" aria-hidden="true"></i>
                Compare plans
              </Button>
            </div>
            <dl class="grid gap-4 text-left sm:grid-cols-3">
              {heroMetrics.map((metric) => (
                <div class="rounded-2xl border border-indigo-100 bg-white/70 p-4 shadow-sm" aria-label={metric.label}>
                  <dt class="text-xs font-semibold uppercase tracking-wide text-indigo-600">{metric.label}</dt>
                  <dd class="mt-1 text-3xl font-bold text-slate-900">{metric.value}</dd>
                  <dd class="mt-1 text-xs text-slate-500">{metric.description}</dd>
                </div>
              ))}
            </dl>
          </div>
          <div class="relative">
            <div class="absolute inset-0 translate-x-6 translate-y-6 rounded-3xl bg-indigo-200 opacity-40 blur-xl"></div>
            <div class="relative space-y-6 rounded-3xl border border-slate-200 bg-white p-6 shadow-xl">
              <header class="flex items-start justify-between gap-4">
                <div>
                  <p class="text-sm font-semibold text-slate-900">Today&apos;s featured fact</p>
                  <p class="text-xs text-slate-500">Physics • Teen level • English</p>
                </div>
                <span class="inline-flex items-center gap-2 rounded-full bg-emerald-100 px-3 py-1 text-xs font-semibold text-emerald-700">
                  <i class="fas fa-bolt text-[10px]" aria-hidden="true"></i>
                  Instant citations
                </span>
              </header>
              <blockquote class="space-y-4">
                <p class="text-lg font-semibold text-slate-900">
                  Lightning can heat the air to temperatures hotter than the surface of the sun for a brief instant.
                </p>
                <div class="flex flex-wrap gap-2">
                  <span class="inline-flex items-center gap-2 rounded-full bg-indigo-50 px-3 py-1 text-xs font-semibold text-indigo-600">
                    <i class="fas fa-certificate text-[10px]" aria-hidden="true"></i>
                    Tier B • NOAA, Britannica
                  </span>
                  <span class="inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600">
                    <i class="fas fa-language text-[10px]" aria-hidden="true"></i>
                    Kids wording available
                  </span>
                </div>
              </blockquote>
              <div class="grid gap-2 sm:grid-cols-2">
                <Button variant="outline" size="sm" class="justify-start">
                  <i class="fas fa-wand-magic-sparkles text-xs" aria-hidden="true"></i>
                  Explain more
                </Button>
                <Button variant="outline" size="sm" class="justify-start">
                  <i class="fas fa-graduation-cap text-xs" aria-hidden="true"></i>
                  Quizify this fact
                </Button>
                <Button variant="outline" size="sm" class="justify-start">
                  <i class="fas fa-bookmark text-xs" aria-hidden="true"></i>
                  Save to collection
                </Button>
                <Button variant="outline" size="sm" class="justify-start">
                  <i class="fas fa-file-export text-xs" aria-hidden="true"></i>
                  Export PNG / MD / JSON
                </Button>
              </div>
              <footer class="space-y-2">
                <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Citations</p>
                <ul class="grid gap-2">
                  <li class="flex items-center justify-between gap-3 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2">
                    <span class="text-xs font-semibold text-slate-700">NOAA Lightning Science</span>
                    <Button variant="ghost" size="sm" class="px-2 py-1 text-[11px]">
                      <i class="fas fa-external-link-alt text-[10px]" aria-hidden="true"></i>
                      Open
                    </Button>
                  </li>
                  <li class="flex items-center justify-between gap-3 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2">
                    <span class="text-xs font-semibold text-slate-700">Encyclopaedia Britannica</span>
                    <Button variant="ghost" size="sm" class="px-2 py-1 text-[11px]">
                      <i class="fas fa-external-link-alt text-[10px]" aria-hidden="true"></i>
                      Open
                    </Button>
                  </li>
                </ul>
              </footer>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="fact-card" class="py-16">
      <div class="mx-auto max-w-6xl space-y-12 px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Fact card anatomy"
          title="Everything learners need in one trustworthy tile"
          description="Fact Generator cards balance brevity with evidence. Each card combines citations, trust cues, and actions that branch into explainers, quizzes, and exports."
          align="center"
        />
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {factCardHighlights.map((item) => (
            <FeatureCard
              title={item.title}
              description={item.description}
              icon={item.icon}
              class="h-full"
            />
          ))}
        </div>
      </div>
    </section>

    <section id="modes" class="bg-white py-16">
      <div class="mx-auto max-w-6xl space-y-12 px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Modes"
          title="Multiple ways to discover and revisit facts"
          description="Whether you want a quick surprise, curriculum-aligned packs, or a reliable daily ritual, the hub routes every journey through the same citation-first experience."
          align="center"
        />
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-4">
          {factModes.map((mode) => (
            <FeatureCard
              eyebrow={mode.eyebrow}
              title={mode.title}
              description={mode.description}
              icon={mode.icon}
              class="h-full"
            />
          ))}
        </div>
      </div>
    </section>

    <section id="workflow" class="py-16">
      <div class="mx-auto max-w-6xl space-y-12 px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Workflow"
          title="From discovery to mastery in three guided steps"
          description="Fact Generator keeps the learner path tight: configure preferences, interact with trustworthy cards, then export or share."
          align="center"
        />
        <div class="grid gap-6 lg:grid-cols-3">
          {workflowSteps.map((step) => (
            <FeatureCard
              eyebrow={step.eyebrow}
              title={step.title}
              description={step.description}
              icon={step.icon}
              class="h-full"
            />
          ))}
        </div>
      </div>
    </section>

    <section id="trust" class="bg-white py-16">
      <div class="mx-auto max-w-6xl space-y-12 px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Trust &amp; moderation"
          title="Guardrails that keep every fact credible and kid friendly"
          description="Tiered sources, moderation filters, and duplicate checks protect learners while preserving transparency."
          align="center"
        />
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {trustPillars.map((pillar) => (
            <FeatureCard
              title={pillar.title}
              description={pillar.description}
              icon={pillar.icon}
              class="h-full"
            />
          ))}
        </div>
      </div>
    </section>

    <section id="api" class="py-16">
      <div class="mx-auto max-w-6xl space-y-10 px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="API surface"
          title="SSR endpoints powering the experience"
          description="Astro API routes keep responses deterministic, cached, and rate-limited so teams can extend the fact graph without sacrificing trust."
          align="center"
        />
        <div class="overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-soft">
          <table class="min-w-full divide-y divide-slate-200 text-left">
            <thead class="bg-slate-50 text-xs font-semibold uppercase tracking-wide text-slate-500">
              <tr>
                <th scope="col" class="px-6 py-3">Method</th>
                <th scope="col" class="px-6 py-3">Path</th>
                <th scope="col" class="px-6 py-3">Summary</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-100 text-sm text-slate-600">
              {apiContracts.map((endpoint) => (
                <tr>
                  <td class="px-6 py-4 font-semibold text-slate-900">
                    <span class="inline-flex items-center gap-2 rounded-full bg-indigo-100 px-3 py-1 text-xs font-semibold text-indigo-700">
                      {endpoint.method}
                    </span>
                  </td>
                  <td class="px-6 py-4 font-mono text-xs text-slate-500">{endpoint.path}</td>
                  <td class="px-6 py-4">{endpoint.summary}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="plans" class="bg-white py-16">
      <div class="mx-auto max-w-6xl space-y-10 px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Plans"
          title="Flexible access for classrooms and lifelong learners"
          description="Start free with Surprise me and topic facts, then move to Pro for advanced explainers, exports, and unlimited collections."
          align="center"
        />
        <div class="overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-soft">
          <table class="min-w-full divide-y divide-slate-200 text-left">
            <thead class="bg-slate-50 text-xs font-semibold uppercase tracking-wide text-slate-500">
              <tr>
                <th scope="col" class="px-6 py-3">Feature</th>
                <th scope="col" class="px-6 py-3">Free</th>
                <th scope="col" class="px-6 py-3">Pro</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-100 text-sm text-slate-600">
              {planMatrix.map((row) => (
                <tr>
                  <th scope="row" class="px-6 py-4 font-semibold text-slate-900">{row.feature}</th>
                  <td class="px-6 py-4">{row.free}</td>
                  <td class="px-6 py-4 text-slate-900">{row.pro}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="accessibility" class="py-16">
      <div class="mx-auto max-w-6xl space-y-10 px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Accessibility"
          title="Built to welcome every learner"
          description="Inclusive defaults keep the fact experience usable for screen readers, multilingual families, and motion-sensitive audiences."
          align="center"
        />
        <ul class="mx-auto grid max-w-3xl gap-3">
          {accessibilityNotes.map((note) => (
            <li class="flex items-start gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-600 shadow-soft">
              <span class="mt-1 flex h-6 w-6 items-center justify-center rounded-full bg-indigo-100 text-indigo-600">
                <i class="fas fa-check text-xs" aria-hidden="true"></i>
              </span>
              <span>{note}</span>
            </li>
          ))}
        </ul>
      </div>
    </section>
  </main>
</Layout>

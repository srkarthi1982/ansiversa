---
import Button from '../../../components/Button.astro';
---
<section class="space-y-4">
  <header>
    <h2 class="text-xl font-semibold text-slate-900">Export & share</h2>
    <p class="text-sm text-slate-600">Save designs to your workspace or export a print-ready SVG instantly.</p>
  </header>
  <div class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm">
    <div class="grid gap-4 lg:grid-cols-[1.2fr_0.8fr] lg:items-center">
      <div class="space-y-3">
        <p class="text-sm text-slate-600">
          Saved cards sync with your account so you can revisit and duplicate them later. Exports download locally — choose the
          format that fits your handoff.
        </p>
        <div class="flex flex-wrap items-center gap-3">
          <Button
            type="button"
            @click.prevent="$store['visiting-card-maker'].saveCard()"
            :disabled="$store['visiting-card-maker'].state.loading"
          >
            <i class="fas fa-floppy-disk text-xs"></i>
            Save card
          </Button>
          <Button
            type="button"
            variant="outline"
            @click.prevent="$store['visiting-card-maker'].exportCard('pdf')"
            :disabled="$store['visiting-card-maker'].state.export.loading"
          >
            <i class="fas fa-file-pdf text-xs"></i>
            Export PDF
          </Button>
          <Button
            type="button"
            variant="outline"
            @click.prevent="$store['visiting-card-maker'].exportCard('png')"
            :disabled="$store['visiting-card-maker'].state.export.loading"
          >
            <i class="fas fa-image text-xs"></i>
            Export PNG
          </Button>
          <Button
            type="button"
            variant="ghost"
            @click.prevent="$store['visiting-card-maker'].exportCard('svg')"
            :disabled="$store['visiting-card-maker'].state.export.loading"
          >
            <i class="fas fa-code text-xs"></i>
            Export SVG
          </Button>
        </div>
      </div>
      <div class="rounded-xl border border-dashed border-slate-200 bg-slate-50/60 p-4 text-sm text-slate-600">
        <p class="font-medium text-slate-700">Export status</p>
        <template x-if="$store['visiting-card-maker'].state.export.filename">
          <p class="mt-1 truncate text-xs text-slate-500">
            Ready: <span x-text="$store['visiting-card-maker'].state.export.filename"></span>
          </p>
        </template>
        <template x-if="!$store['visiting-card-maker'].state.export.filename">
          <p class="mt-1 text-xs text-slate-500">No downloads yet — choose a format above to export your card.</p>
        </template>
        <template x-if="$store['visiting-card-maker'].state.export.note">
          <p class="mt-3 text-xs text-indigo-600" x-text="$store['visiting-card-maker'].state.export.note"></p>
        </template>
      </div>
    </div>
  </div>
</section>

---
import Layout from '../../layouts/Layout.astro';
import Button from '../../components/Button.astro';
import SectionHeading from '../../components/SectionHeading.astro';

const featurePillars = [
  {
    title: 'Timeline intelligence',
    description:
      'Drag-and-drop run sheets with dependency checks, timezone support, and rehearsal modes that keep everyone in sync.',
    icon: 'fas fa-timeline',
  },
  {
    title: 'Task + budget cockpit',
    description:
      'One kanban for owners, due dates, and reminders — paired with real-time planned versus actual tracking for finance.',
    icon: 'fas fa-list-check',
  },
  {
    title: 'Guest + vendor command',
    description:
      'Segment invites, monitor RSVP funnels, and keep vendor handoffs organized with notes, contracts, and reminders.',
    icon: 'fas fa-user-group',
  },
];

const automationHighlights = [
  {
    label: 'Smart reminders',
    description: 'Automate RSVP nudges, task escalations, and vendor check-ins with localized send windows.',
    icon: 'fas fa-bell',
  },
  {
    label: 'Instant exports',
    description: 'Generate run-of-show PDFs, ICS blocks, and vendor packets from the same workspace.',
    icon: 'fas fa-file-export',
  },
  {
    label: 'Collaborator roles',
    description: 'Invite coordinators, vendors, or hosts with tailored permissions and audit trails.',
    icon: 'fas fa-users-gear',
  },
];
---
<Layout>
  <a
    class="sr-only focus:not-sr-only focus:absolute focus:left-4 focus:top-4 focus:rounded-md focus:bg-white focus:px-4 focus:py-2 focus:text-sm focus:font-semibold focus:text-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500"
    href="#events-workspace"
  >
    Skip to content
  </a>
  <main
    id="events-workspace"
    class="min-h-screen bg-slate-50"
    x-data="() => ({ planner: $store.eventPlanner })"
    x-init="planner.init()"
  >
    <section class="relative overflow-hidden py-16 sm:py-20">
      <div class="absolute inset-0 bg-gradient-to-br from-indigo-100 via-white to-transparent"></div>
      <div class="relative mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
        <div class="grid gap-12 lg:grid-cols-[1.1fr_0.9fr] lg:items-center">
          <div class="space-y-7">
            <span class="inline-flex items-center gap-2 rounded-full bg-indigo-100 px-4 py-1.5 text-sm font-semibold text-indigo-700">
              <i class="fas fa-calendar-star text-xs"></i>
              Ansiversa Event OS
            </span>
            <h1 class="text-4xl font-bold tracking-tight text-slate-900 sm:text-5xl">
              Plan unforgettable experiences with AI copilots for every detail
            </h1>
            <p class="max-w-2xl text-base text-slate-600 sm:text-lg">
              Templates jump-start your run-of-show, tasks and budgets stay synced, and guests receive branded RSVP flows. Tie it all together with exports, reminders, and real-time dashboards across events.
            </p>
            <div class="flex flex-wrap gap-3">
              <Button
                type="button"
                class="shadow-sm"
                @click.prevent="planner.setActiveEvent(planner.state.events[0]?.id ?? '')"
              >
                <i class="fas fa-plus text-xs"></i>
                Create event
              </Button>
              <Button href="#event-templates" variant="outline">
                <i class="fas fa-layer-group text-xs"></i>
                Browse templates
              </Button>
              <Button
                variant="ghost"
                :href="planner.activeEvent ? planner.activeEvent.runSheetLink : '/event-planner/run/preview'"
              >
                <i class="fas fa-file-lines text-xs"></i>
                View run sheet sample
              </Button>
            </div>
            <div class="grid gap-4 sm:grid-cols-3">
              <template x-if="planner.activeEvent">
                <dl class="rounded-3xl border border-indigo-100 bg-white/70 p-5 shadow-sm backdrop-blur">
                  <dt class="text-xs font-medium uppercase tracking-wide text-indigo-600">Active event</dt>
                  <dd class="mt-3 space-y-2">
                    <p class="text-lg font-semibold text-slate-900" x-text="planner.activeEvent?.title"></p>
                    <p class="text-sm text-slate-600">
                      <i class="fas fa-clock text-[11px] text-indigo-500"></i>
                      <span class="ml-2 font-medium text-slate-700" x-text="`${planner.state.metrics.countdownDays} days`"></span>
                      <span class="ml-2 text-xs text-slate-500" x-text="planner.activeEvent?.countdownLabel"></span>
                    </p>
                    <p class="text-xs text-slate-500" x-text="planner.activeEvent?.summary"></p>
                  </dd>
                </dl>
              </template>
              <dl class="rounded-3xl border border-slate-200 bg-white/80 p-5 shadow-sm backdrop-blur">
                <dt class="text-xs font-medium uppercase tracking-wide text-slate-500">Open tasks</dt>
                <dd class="mt-2 flex items-baseline gap-2 text-2xl font-semibold text-slate-900" x-text="planner.state.metrics.openTasks"></dd>
                <dd class="text-xs text-slate-500" x-text="`${planner.state.metrics.dueSoon} due soon or overdue`"></dd>
              </dl>
              <dl class="rounded-3xl border border-slate-200 bg-white/80 p-5 shadow-sm backdrop-blur">
                <dt class="text-xs font-medium uppercase tracking-wide text-slate-500">RSVP health</dt>
                <dd class="mt-2 flex items-baseline gap-2 text-2xl font-semibold text-slate-900">
                  <span x-text="`${planner.state.metrics.guestResponse}%`"></span>
                  <span class="text-xs font-medium text-emerald-600" x-text="planner.activeEvent ? `${planner.activeEvent.guests.yes} yes` : '—'"></span>
                </dd>
                <dd class="text-xs text-slate-500">
                  Budget variance:
                  <span
                    class="font-semibold"
                    :class="planner.state.metrics.budgetVariance > 0 ? 'text-amber-600' : 'text-emerald-600'"
                    x-text="planner.state.metrics.budgetVariance === 0 ? 'On plan' : Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(planner.state.metrics.budgetVariance)"
                  ></span>
                </dd>
              </dl>
            </div>
          </div>
          <aside class="relative">
            <div class="absolute inset-0 translate-x-6 translate-y-6 rounded-3xl bg-indigo-200 opacity-50 blur-2xl"></div>
            <div class="relative space-y-6 rounded-3xl border border-slate-200 bg-white p-6 shadow-xl">
              <div class="flex items-center justify-between">
                <h2 class="text-lg font-semibold text-slate-900">Workspace pulse</h2>
                <span class="inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600">
                  <i class="fas fa-bolt text-[11px] text-indigo-500"></i>
                  Real-time
                </span>
              </div>
              <dl class="grid gap-4 sm:grid-cols-2">
                <div class="rounded-2xl border border-slate-100 bg-slate-50/80 p-4">
                  <dt class="text-xs font-medium text-slate-500">Vendors needing follow-up</dt>
                  <dd class="mt-2 text-2xl font-semibold text-slate-900" x-text="planner.state.metrics.vendorFollowUps"></dd>
                  <dd class="text-xs text-slate-500">Shortlist to confirm this week.</dd>
                </div>
                <div class="rounded-2xl border border-slate-100 bg-slate-50/80 p-4">
                  <dt class="text-xs font-medium text-slate-500">Plan level</dt>
                  <dd class="mt-2 inline-flex items-center gap-2 rounded-full bg-indigo-100 px-3 py-1 text-xs font-semibold text-indigo-700" x-text="planner.activeEvent ? planner.activeEvent.plan.toUpperCase() : 'PREVIEW'"></dd>
                  <dd class="text-xs text-slate-500">Upgrade for automations & branding.</dd>
                </div>
                <div class="rounded-2xl border border-slate-100 bg-white/70 p-4 shadow-sm sm:col-span-2">
                  <dt class="text-xs font-medium text-slate-500">Upcoming milestones</dt>
                  <ul class="mt-3 space-y-2">
                    <template x-if="planner.activeEvent">
                      <template x-for="milestone in planner.activeEvent?.milestones" :key="milestone.id">
                        <li class="flex items-start justify-between gap-4 rounded-2xl border border-slate-100 bg-slate-50 px-3 py-2">
                          <div>
                            <p class="text-sm font-semibold text-slate-900" x-text="milestone.label"></p>
                            <p class="text-xs text-slate-500">
                              <i class="fas fa-user text-[10px] text-indigo-500"></i>
                              <span class="ml-1" x-text="milestone.owner"></span>
                            </p>
                          </div>
                          <span
                            class="inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold"
                            :class="{
                              'bg-emerald-100 text-emerald-700': milestone.status === 'upcoming',
                              'bg-amber-100 text-amber-700': milestone.status === 'at-risk',
                              'bg-slate-100 text-slate-600': milestone.status === 'done',
                            }"
                          >
                            <i class="fas fa-calendar-day text-[10px]"></i>
                            <span x-text="new Date(milestone.due).toLocaleDateString(undefined, { month: 'short', day: 'numeric' })"></span>
                          </span>
                        </li>
                      </template>
                    </template>
                    <template x-if="!planner.activeEvent">
                      <li class="rounded-2xl border border-dashed border-slate-200 bg-white px-3 py-4 text-center text-sm text-slate-500">Select an event to view milestones.</li>
                    </template>
                  </ul>
                </div>
              </dl>
            </div>
          </aside>
        </div>
      </div>
    </section>

    <section class="pb-20">
      <div class="mx-auto max-w-6xl space-y-10 px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Control center"
          title="Your events at a glance"
          description="Switch between active events, track status, and jump directly into RSVPs, budgets, or run sheets."
        />
        <div class="grid gap-6 lg:grid-cols-2">
          <template x-for="event in planner.state.events" :key="event.id">
            <article
              class="flex h-full flex-col justify-between rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:border-indigo-200 hover:shadow-lg focus-within:-translate-y-1 focus-within:border-indigo-300 focus-within:shadow-lg"
              :class="planner.activeEvent?.id === event.id ? 'border-indigo-300 shadow-lg' : ''"
            >
              <div class="space-y-4">
                <header class="flex items-start justify-between gap-4">
                  <div>
                    <h3 class="text-xl font-semibold text-slate-900" x-text="event.title"></h3>
                    <p class="text-xs text-slate-500">
                      <i class="fas fa-location-dot text-[10px] text-indigo-500"></i>
                      <span class="ml-1" x-text="event.location.label"></span>
                    </p>
                  </div>
                  <span class="inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold" :class="event.status === 'active' ? 'bg-emerald-100 text-emerald-700' : 'bg-indigo-100 text-indigo-700'">
                    <i class="fas" :class="event.status === 'active' ? 'fa-signal' : 'fa-seedling'"></i>
                    <span class="capitalize" x-text="event.status"></span>
                  </span>
                </header>
                <p class="text-sm text-slate-600" x-text="event.summary"></p>
                <div class="grid gap-3 sm:grid-cols-2">
                  <div class="rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3">
                    <p class="text-xs font-medium uppercase tracking-wide text-slate-500">Countdown</p>
                    <p class="mt-1 text-lg font-semibold text-slate-900" x-text="`${event.countdownDays} days`"></p>
                    <p class="text-xs text-slate-500" x-text="event.countdownLabel"></p>
                  </div>
                  <div class="rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3">
                    <p class="text-xs font-medium uppercase tracking-wide text-slate-500">Guest responses</p>
                    <p class="mt-1 text-lg font-semibold text-slate-900">
                      <span x-text="`${Math.round((event.guests.responded / Math.max(1, event.guests.invited)) * 100)}%`"></span>
                    </p>
                    <p class="text-xs text-slate-500" x-text="`${event.guests.yes} yes · ${event.guests.maybe} maybe`"></p>
                  </div>
                </div>
                <ul class="space-y-2 text-sm text-slate-600">
                  <template x-for="highlight in event.highlights" :key="highlight">
                    <li class="flex items-start gap-2">
                      <i class="fas fa-check-circle mt-0.5 text-[11px] text-emerald-500"></i>
                      <span x-text="highlight"></span>
                    </li>
                  </template>
                </ul>
              </div>
              <footer class="mt-6 flex flex-wrap items-center justify-between gap-3">
                <div class="flex items-center gap-3 text-xs font-medium text-slate-500">
                  <span>
                    <i class="fas fa-chart-line text-[10px] text-indigo-500"></i>
                    <span class="ml-1" x-text="`${event.metrics.tasksOnTrack}% tasks on track`"></span>
                  </span>
                  <span>
                    <i class="fas fa-wallet text-[10px] text-indigo-500"></i>
                    <span class="ml-1" x-text="`${event.metrics.budgetHealth}% budget health`"></span>
                  </span>
                </div>
                <div class="flex flex-wrap gap-2">
                  <Button variant="light" size="sm" :href="event.rsvpLink">
                    <i class="fas fa-envelope-open-text text-[11px]"></i>
                    RSVP hub
                  </Button>
                  <Button
                    size="sm"
                    variant="outline"
                    @click.prevent="planner.setActiveEvent(event.id)"
                  >
                    Focus workspace
                  </Button>
                </div>
              </footer>
            </article>
          </template>
        </div>
      </div>
    </section>

    <section class="pb-20" id="event-templates">
      <div class="mx-auto max-w-6xl space-y-12 px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Templates"
          title="Launch with a playbook tuned to your event"
          description="Pick a template and Ansiversa seeds your agenda, tasks, budgets, and guest touchpoints — fully editable and localized."
        />
        <div class="grid gap-6 lg:grid-cols-3">
          <template x-for="template in planner.state.templates" :key="template.key">
            <article class="flex h-full flex-col justify-between rounded-3xl border border-slate-200 bg-white p-6 shadow-sm transition hover:-translate-y-1 hover:border-indigo-200 hover:shadow-lg">
              <div class="space-y-3">
                <span class="inline-flex h-12 w-12 items-center justify-center rounded-2xl bg-indigo-100 text-indigo-600">
                  <i class="text-lg" :class="template.icon"></i>
                </span>
                <h3 class="text-xl font-semibold text-slate-900" x-text="template.title"></h3>
                <p class="text-sm text-slate-600" x-text="template.description"></p>
                <ul class="space-y-2 text-sm text-slate-600">
                  <template x-for="item in template.deliverables" :key="item">
                    <li class="flex items-start gap-2">
                      <i class="fas fa-circle-check mt-0.5 text-[10px] text-emerald-500"></i>
                      <span x-text="item"></span>
                    </li>
                  </template>
                </ul>
              </div>
              <footer class="mt-6 space-y-3 text-xs text-slate-500">
                <p>
                  <i class="fas fa-bolt text-[10px] text-indigo-500"></i>
                  <span class="ml-1 font-medium text-slate-700">Automation highlights:</span>
                </p>
                <ul class="space-y-1">
                  <template x-for="automation in template.automationHighlights" :key="automation">
                    <li class="flex items-start gap-2">
                      <i class="fas fa-sparkles mt-0.5 text-[10px] text-amber-500"></i>
                      <span x-text="automation"></span>
                    </li>
                  </template>
                </ul>
                <p class="pt-2 text-xs font-medium uppercase tracking-wide text-indigo-600" x-text="template.recommendedDuration"></p>
              </footer>
            </article>
          </template>
        </div>
      </div>
    </section>

    <section class="pb-20">
      <div class="mx-auto max-w-6xl space-y-12 px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Operations"
          title="Timeline, tasks, and budgets stay perfectly in sync"
          description="Visualize every moment of your event, keep owners accountable, and understand spend before it becomes an issue."
        />
        <div class="grid gap-10 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,0.9fr)]">
          <div class="space-y-6" x-data="{ planner, activeDay: 'All', get timeline() { return this.planner.activeEvent?.timeline ?? []; }, get days() { const unique = Array.from(new Set(this.timeline.map((item) => item.dayLabel))); return ['All', ...unique]; }, filteredTimeline() { if (this.activeDay === 'All') return this.timeline; return this.timeline.filter((item) => item.dayLabel === this.activeDay); } }">
            <div class="flex flex-wrap items-center gap-2">
              <template x-for="day in days" :key="day">
                <button
                  type="button"
                  class="rounded-full border px-4 py-2 text-xs font-semibold transition"
                  :class="day === activeDay ? 'border-indigo-500 bg-indigo-500 text-white shadow-sm' : 'border-slate-200 bg-white text-slate-600 hover:border-indigo-200 hover:text-indigo-600'"
                  @click="activeDay = day"
                >
                  <span x-text="day"></span>
                </button>
              </template>
            </div>
            <div class="space-y-4">
              <template x-if="filteredTimeline().length === 0">
                <div class="rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-500">
                  No timeline items for this day yet. Add blocks from your template starter.
                </div>
              </template>
              <template x-for="item in filteredTimeline()" :key="item.id">
                <article class="rounded-3xl border border-slate-200 bg-white/90 p-5 shadow-sm">
                  <header class="flex flex-wrap items-center justify-between gap-3">
                    <div>
                      <p class="text-xs font-medium uppercase tracking-wide text-indigo-600" x-text="item.dayLabel"></p>
                      <h3 class="text-lg font-semibold text-slate-900" x-text="item.title"></h3>
                    </div>
                    <span class="inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold" :class="item.status === 'confirmed' ? 'bg-emerald-100 text-emerald-700' : 'bg-amber-100 text-amber-700'">
                      <i class="fas" :class="item.status === 'confirmed' ? 'fa-circle-check' : 'fa-pen-to-square'"></i>
                      <span class="capitalize" x-text="item.status"></span>
                    </span>
                  </header>
                  <dl class="mt-4 grid gap-4 text-sm text-slate-600 sm:grid-cols-3">
                    <div>
                      <dt class="text-xs font-medium uppercase tracking-wide text-slate-500">Timing</dt>
                      <dd class="mt-1 font-medium text-slate-900" x-text="`${new Date(item.start).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} – ${new Date(item.end).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`"></dd>
                    </div>
                    <div>
                      <dt class="text-xs font-medium uppercase tracking-wide text-slate-500">Owner</dt>
                      <dd class="mt-1 font-medium text-slate-900" x-text="item.owner"></dd>
                    </div>
                    <div>
                      <dt class="text-xs font-medium uppercase tracking-wide text-slate-500">Category</dt>
                      <dd class="mt-1 inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600">
                        <i class="fas fa-tag text-[10px]"></i>
                        <span class="capitalize" x-text="item.category"></span>
                      </dd>
                    </div>
                  </dl>
                  <p class="mt-3 text-sm text-slate-600" x-show="item.notes" x-text="item.notes"></p>
                </article>
              </template>
            </div>
          </div>
          <div class="space-y-6">
            <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
              <header class="flex items-center justify-between">
                <div>
                  <h3 class="text-lg font-semibold text-slate-900">Task cockpit</h3>
                  <p class="text-xs text-slate-500">Filter by status to focus your next standup.</p>
                </div>
                <div class="flex gap-2">
                  <button
                    type="button"
                    class="rounded-full border px-3 py-1 text-xs font-semibold transition"
                    :class="planner.state.taskFilter === 'open' ? 'border-indigo-500 bg-indigo-500 text-white' : 'border-slate-200 bg-white text-slate-600 hover:border-indigo-200 hover:text-indigo-600'"
                    @click="planner.setTaskFilter('open')"
                  >
                    Open
                  </button>
                  <button
                    type="button"
                    class="rounded-full border px-3 py-1 text-xs font-semibold transition"
                    :class="planner.state.taskFilter === 'due-soon' ? 'border-indigo-500 bg-indigo-500 text-white' : 'border-slate-200 bg-white text-slate-600 hover:border-indigo-200 hover:text-indigo-600'"
                    @click="planner.setTaskFilter('due-soon')"
                  >
                    Due soon
                  </button>
                  <button
                    type="button"
                    class="rounded-full border px-3 py-1 text-xs font-semibold transition"
                    :class="planner.state.taskFilter === 'completed' ? 'border-indigo-500 bg-indigo-500 text-white' : 'border-slate-200 bg-white text-slate-600 hover:border-indigo-200 hover:text-indigo-600'"
                    @click="planner.setTaskFilter('completed')"
                  >
                    Completed
                  </button>
                </div>
              </header>
              <div class="mt-4 space-y-4">
                <template x-if="planner.filteredTasks.length === 0">
                  <div class="rounded-2xl border border-dashed border-slate-200 bg-slate-50 p-6 text-center text-sm text-slate-500">
                    No tasks match this filter. Adjust the view or add a new item.
                  </div>
                </template>
                <template x-for="task in planner.filteredTasks" :key="task.id">
                  <article class="rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-sm">
                    <header class="flex items-start justify-between gap-3">
                      <div>
                        <p class="text-sm font-semibold text-slate-900" x-text="task.title"></p>
                        <p class="text-xs text-slate-500">
                          <i class="fas fa-user text-[10px] text-indigo-500"></i>
                          <span class="ml-1" x-text="task.assignee"></span>
                        </p>
                      </div>
                      <span class="inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold" :class="task.status === 'done' ? 'bg-emerald-100 text-emerald-700' : task.priority === 'p0' ? 'bg-amber-100 text-amber-700' : 'bg-slate-100 text-slate-600'">
                        <i class="fas" :class="task.status === 'done' ? 'fa-circle-check' : task.priority === 'p0' ? 'fa-fire' : 'fa-circle-dot'"></i>
                        <span class="capitalize" x-text="task.status"></span>
                      </span>
                    </header>
                    <div class="mt-3 flex flex-wrap items-center gap-3 text-xs text-slate-500">
                      <span>
                        <i class="fas fa-calendar-day text-[10px] text-indigo-500"></i>
                        <span class="ml-1" x-text="new Date(task.due).toLocaleDateString(undefined, { month: 'short', day: 'numeric' })"></span>
                      </span>
                      <template x-for="tag in task.tags" :key="tag">
                        <span class="inline-flex items-center gap-1 rounded-full bg-slate-100 px-2 py-1 font-medium text-slate-600">
                          <i class="fas fa-hashtag text-[9px]"></i>
                          <span x-text="tag"></span>
                        </span>
                      </template>
                    </div>
                  </article>
                </template>
              </div>
            </div>
            <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
              <header class="flex items-center justify-between">
                <div>
                  <h3 class="text-lg font-semibold text-slate-900">Budget guardrails</h3>
                  <p class="text-xs text-slate-500">Track planned vs. actual spend by category.</p>
                </div>
                <span class="inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600">
                  <i class="fas fa-wallet text-[11px] text-indigo-500"></i>
                  Variance monitor
                </span>
              </header>
              <div class="mt-4 overflow-hidden rounded-2xl border border-slate-100">
                <table class="min-w-full divide-y divide-slate-100 text-sm">
                  <thead class="bg-slate-50 text-left text-xs font-semibold uppercase tracking-wide text-slate-500">
                    <tr>
                      <th class="px-4 py-3">Category</th>
                      <th class="px-4 py-3">Vendor</th>
                      <th class="px-4 py-3 text-right">Planned</th>
                      <th class="px-4 py-3 text-right">Actual</th>
                      <th class="px-4 py-3 text-right">Variance</th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-slate-100 bg-white">
                    <template x-if="!planner.activeEvent">
                      <tr>
                        <td class="px-4 py-4 text-center text-xs text-slate-500" colspan="5">Select an event to view budget items.</td>
                      </tr>
                    </template>
                    <template x-if="planner.activeEvent">
                      <template x-for="line in planner.activeEvent?.budgets" :key="line.id">
                        <tr class="hover:bg-slate-50">
                          <td class="px-4 py-3 font-medium capitalize text-slate-700" x-text="line.category"></td>
                          <td class="px-4 py-3 text-slate-600" x-text="line.vendor"></td>
                          <td class="px-4 py-3 text-right text-slate-600" x-text="Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(line.planned)"></td>
                          <td class="px-4 py-3 text-right text-slate-600" x-text="Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(line.actual)"></td>
                          <td class="px-4 py-3 text-right">
                            <span
                              class="inline-flex items-center justify-end gap-1 rounded-full px-3 py-1 text-xs font-semibold"
                              :class="line.actual - line.planned > 0 ? 'bg-amber-100 text-amber-700' : 'bg-emerald-100 text-emerald-700'"
                            >
                              <i class="fas" :class="line.actual - line.planned > 0 ? 'fa-arrow-trend-up' : 'fa-arrow-trend-down'"></i>
                              <span x-text="Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(line.actual - line.planned)"></span>
                            </span>
                          </td>
                        </tr>
                      </template>
                    </template>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="pb-20">
      <div class="mx-auto max-w-6xl space-y-12 px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Guests, vendors & automations"
          title="Deliver personal touches while automating the busywork"
          description="Segment communications, keep vendors aligned, and let reminders work in the background."
        />
        <div class="grid gap-8 lg:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]">
          <div class="space-y-6">
            <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
              <header class="flex items-center justify-between">
                <div>
                  <h3 class="text-lg font-semibold text-slate-900">Guest funnel</h3>
                  <p class="text-xs text-slate-500">Track RSVP flow and check-ins by segment.</p>
                </div>
                <span class="inline-flex items-center gap-2 rounded-full bg-indigo-100 px-3 py-1 text-xs font-semibold text-indigo-700">
                  <i class="fas fa-user-check text-[11px]"></i>
                  RSVP sync
                </span>
              </header>
              <div class="mt-5 grid gap-4 sm:grid-cols-2">
                <template x-if="planner.activeEvent">
                  <template x-for="segment in planner.activeEvent?.guests.segments" :key="segment.label">
                    <div class="rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3">
                      <p class="text-xs font-medium uppercase tracking-wide text-slate-500" x-text="segment.label"></p>
                      <p class="mt-2 text-2xl font-semibold text-slate-900" x-text="segment.count"></p>
                      <p class="text-xs text-slate-500 capitalize" x-text="segment.status"></p>
                    </div>
                  </template>
                </template>
                <template x-if="!planner.activeEvent">
                  <div class="rounded-2xl border border-dashed border-slate-200 bg-white px-4 py-8 text-center text-sm text-slate-500 sm:col-span-2">
                    Connect an event to see segment insights.
                  </div>
                </template>
              </div>
              <div class="mt-5 rounded-2xl border border-slate-100 bg-white p-4 text-xs text-slate-600">
                <p class="font-semibold text-slate-900">Automated flows</p>
                <ul class="mt-2 space-y-1">
                  <template x-for="automation in planner.state.automations" :key="automation.id">
                    <li class="flex items-start gap-2">
                      <i class="fas fa-bolt mt-0.5 text-[10px] text-indigo-500"></i>
                      <span>
                        <span class="font-medium text-slate-800" x-text="automation.label"></span>
                        <span class="ml-1 text-slate-500" x-text="`· ${automation.trigger}`"></span>
                      </span>
                    </li>
                  </template>
                </ul>
              </div>
            </article>
            <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
              <header class="flex items-center justify-between">
                <div>
                  <h3 class="text-lg font-semibold text-slate-900">Vendor tracker</h3>
                  <p class="text-xs text-slate-500">Know who is booked, paid, or still needs follow-up.</p>
                </div>
                <span class="inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600">
                  <i class="fas fa-handshake-angle text-[11px] text-indigo-500"></i>
                  Vendor ops
                </span>
              </header>
              <div class="mt-4 space-y-3">
                <template x-if="planner.activeEvent">
                  <template x-for="vendor in planner.activeEvent?.vendors" :key="vendor.id">
                    <div class="flex items-start justify-between gap-4 rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3">
                      <div>
                        <p class="text-sm font-semibold text-slate-900" x-text="vendor.name"></p>
                        <p class="text-xs text-slate-500 capitalize" x-text="vendor.type"></p>
                        <p class="mt-2 text-xs text-slate-500">
                          <i class="fas fa-envelope text-[10px] text-indigo-500"></i>
                          <span class="ml-1" x-text="vendor.contact.email"></span>
                        </p>
                      </div>
                      <span class="inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold" :class="{
                        'bg-emerald-100 text-emerald-700': vendor.status === 'paid' || vendor.status === 'booked',
                        'bg-amber-100 text-amber-700': vendor.status === 'shortlisted',
                        'bg-slate-100 text-slate-600': vendor.status === 'prospect',
                      }">
                        <i class="fas" :class="vendor.status === 'paid' ? 'fa-circle-check' : vendor.status === 'shortlisted' ? 'fa-clipboard-list' : 'fa-hourglass-half'"></i>
                        <span class="capitalize" x-text="vendor.status"></span>
                      </span>
                    </div>
                  </template>
                </template>
                <template x-if="!planner.activeEvent">
                  <div class="rounded-2xl border border-dashed border-slate-200 bg-white px-4 py-6 text-center text-sm text-slate-500">
                    Vendor data appears once you focus an event.
                  </div>
                </template>
              </div>
            </article>
          </div>
          <div class="space-y-6">
            <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
              <header class="flex items-center justify-between">
                <div>
                  <h3 class="text-lg font-semibold text-slate-900">Automation & reminder library</h3>
                  <p class="text-xs text-slate-500">Preview the automations included with your plan.</p>
                </div>
                <span class="inline-flex items-center gap-2 rounded-full bg-indigo-100 px-3 py-1 text-xs font-semibold text-indigo-700">
                  <i class="fas fa-robot text-[11px]"></i>
                  AI copilots
                </span>
              </header>
              <ul class="mt-5 space-y-3 text-sm text-slate-600">
                <template x-for="reminder in planner.state.reminders" :key="reminder.id">
                  <li class="rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3">
                    <div class="flex items-start justify-between gap-3">
                      <div>
                        <p class="font-semibold text-slate-900" x-text="reminder.label"></p>
                        <p class="text-xs text-slate-500" x-text="reminder.schedule"></p>
                      </div>
                      <span class="inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 text-xs font-semibold text-slate-600">
                        <i class="fas" :class="reminder.channel === 'sms' ? 'fa-signal-bars' : reminder.channel === 'push' ? 'fa-bell' : 'fa-envelope-open-text'"></i>
                        <span class="uppercase" x-text="reminder.channel"></span>
                      </span>
                    </div>
                    <p class="mt-2 text-xs text-slate-500" x-text="reminder.description"></p>
                  </li>
                </template>
              </ul>
            </div>
            <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
              <header class="flex items-center justify-between">
                <div>
                  <h3 class="text-lg font-semibold text-slate-900">Integrations</h3>
                  <p class="text-xs text-slate-500">Connect tools you already use.</p>
                </div>
                <span class="inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600">
                  <i class="fas fa-plug text-[11px] text-indigo-500"></i>
                  Connected
                </span>
              </header>
              <ul class="mt-4 space-y-3 text-sm text-slate-600">
                <template x-for="integration in planner.state.integrations" :key="integration.id">
                  <li class="flex items-start justify-between gap-3 rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3">
                    <div>
                      <p class="font-semibold text-slate-900" x-text="integration.name"></p>
                      <p class="text-xs text-slate-500" x-text="integration.description"></p>
                    </div>
                    <span class="inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold" :class="integration.status === 'available' ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-100 text-slate-600'">
                      <i class="fas" :class="integration.status === 'available' ? 'fa-circle-check' : 'fa-circle-notch'"></i>
                      <span class="capitalize" x-text="integration.status"></span>
                    </span>
                  </li>
                </template>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="pb-24">
      <div class="mx-auto max-w-6xl space-y-12 px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Upgrades & roadmap"
          title="Choose your plan and see what\'s coming next"
          description="The Free plan is perfect for one-off events. Upgrade to Pro for bigger guest lists, custom branding, and automation depth."
        />
        <div class="grid gap-8 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,0.9fr)]">
          <div class="overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm">
            <table class="min-w-full divide-y divide-slate-100 text-sm">
              <thead class="bg-slate-50 text-left text-xs font-semibold uppercase tracking-wide text-slate-500">
                <tr>
                  <th class="px-4 py-3">Feature</th>
                  <th class="px-4 py-3">Free</th>
                  <th class="px-4 py-3">Pro</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-slate-100">
                <template x-for="row in planner.state.planFeatures" :key="row.feature">
                  <tr class="hover:bg-slate-50">
                    <td class="px-4 py-3 font-medium text-slate-800" x-text="row.feature"></td>
                    <td class="px-4 py-3 text-slate-600" x-text="row.free"></td>
                    <td class="px-4 py-3 text-slate-600" x-text="row.pro"></td>
                  </tr>
                </template>
              </tbody>
            </table>
          </div>
          <div class="space-y-6">
            <div class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
              <h3 class="text-lg font-semibold text-slate-900">Roadmap milestones</h3>
              <p class="text-xs text-slate-500">Follow our build path to v1 launch and beyond.</p>
              <div class="mt-4 space-y-4">
                <template x-for="stage in planner.state.roadmap" :key="stage.id">
                  <article class="rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3">
                    <header class="flex items-start justify-between gap-3">
                      <div>
                        <p class="text-sm font-semibold text-slate-900" x-text="stage.title"></p>
                        <p class="text-xs text-slate-500" x-text="stage.description"></p>
                      </div>
                      <span class="inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 text-xs font-semibold text-slate-600">
                        <i class="fas fa-road text-[10px]"></i>
                        Stage
                      </span>
                    </header>
                    <ul class="mt-3 space-y-2 text-xs text-slate-500">
                      <template x-for="item in stage.items" :key="item.label">
                        <li class="flex items-start gap-2">
                          <i class="fas" :class="item.done ? 'fa-circle-check text-emerald-500' : 'fa-circle text-slate-300'"></i>
                          <span class="text-slate-700" :class="item.done ? 'font-medium text-slate-800' : ''" x-text="item.label"></span>
                        </li>
                      </template>
                    </ul>
                  </article>
                </template>
              </div>
            </div>
            <div class="rounded-3xl border border-indigo-200 bg-gradient-to-br from-indigo-500 via-sky-500 to-purple-500 p-6 text-white shadow-lg">
              <h3 class="text-lg font-semibold">Build the perfect event OS</h3>
              <p class="mt-2 text-sm text-indigo-50">
                Connect Presentation Designer for run-of-show decks, Email Polisher for invites and thank-yous, and Price Checker for vendor negotiations. Everything stays synced through your Ansiversa workspace.
              </p>
              <div class="mt-4 flex flex-wrap gap-2 text-xs font-semibold">
                <span class="rounded-full bg-white/20 px-3 py-1">Run-of-show decks</span>
                <span class="rounded-full bg-white/20 px-3 py-1">Smart invites</span>
                <span class="rounded-full bg-white/20 px-3 py-1">Vendor insights</span>
              </div>
              <div class="mt-6 flex flex-wrap gap-3">
                <Button href="/presentation-designer" variant="light" size="sm" class="text-indigo-700">
                  <i class="fas fa-display text-[11px]"></i>
                  Presentation Designer
                </Button>
                <Button href="/email-polisher" variant="light" size="sm" class="text-indigo-700">
                  <i class="fas fa-envelope-open-text text-[11px]"></i>
                  Email Polisher
                </Button>
                <Button href="#events-workspace" variant="light" size="sm" class="text-indigo-700">
                  <i class="fas fa-circle-plus text-[11px]"></i>
                  Start planning
                </Button>
              </div>
            </div>
          </div>
        </div>
        <div class="grid gap-6 sm:grid-cols-3">
          {featurePillars.map((pillar) => (
            <article class="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm" key={pillar.title}>
              <span class="inline-flex h-10 w-10 items-center justify-center rounded-2xl bg-indigo-100 text-indigo-600">
                <i class={`text-sm ${pillar.icon}`}></i>
              </span>
              <h4 class="mt-4 text-lg font-semibold text-slate-900">{pillar.title}</h4>
              <p class="mt-2 text-sm text-slate-600">{pillar.description}</p>
            </article>
          ))}
          {automationHighlights.map((automation) => (
            <article class="rounded-3xl border border-indigo-100 bg-indigo-50/70 p-6 shadow-sm" key={automation.label}>
              <span class="inline-flex h-10 w-10 items-center justify-center rounded-2xl bg-white/80 text-indigo-600">
                <i class={`text-sm ${automation.icon}`}></i>
              </span>
              <h4 class="mt-4 text-lg font-semibold text-slate-900">{automation.label}</h4>
              <p class="mt-2 text-sm text-slate-600">{automation.description}</p>
            </article>
          ))}
        </div>
      </div>
    </section>
  </main>
</Layout>

---
import Button from '../../../components/Button.astro';
---
<section
  class="relative overflow-hidden bg-gradient-to-br from-indigo-600 via-sky-500 to-purple-600 py-16 text-white"
  x-data="() => ({ store: $store.triviaArena })"
>
  <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.18),_rgba(15,23,42,0.45))]"></div>
  <div class="relative mx-auto flex max-w-6xl flex-col gap-10 px-4 sm:px-6 lg:flex-row lg:items-end lg:px-8">
    <div class="flex-1 space-y-6">
      <span class="inline-flex items-center gap-2 rounded-full bg-white/15 px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em]">
        Trivia Arena
      </span>
      <h1 class="text-4xl font-black tracking-tight sm:text-5xl lg:text-6xl">
        Battle-ready trivia for solo players, classrooms, and global arenas
      </h1>
      <p class="max-w-2xl text-white/80">
        Drill skills in adaptive solo sessions, chase streaks in the daily challenge, or invite friends to an asynchronous arena.
        Trivia Arena blends fast gameplay, power-ups, and detailed analytics—all built on Ansiversa's realtime stack with room for live events.
      </p>
      <div class="flex flex-wrap gap-3">
        <Button href="/trivia-arena/play" variant="secondary">
          <i class="fas fa-bolt text-sm"></i>
          Start solo session
        </Button>
        <Button href="/trivia-arena/daily" variant="outline">
          <i class="fas fa-calendar-day text-sm"></i>
          Play today's challenge
        </Button>
        <Button href="/trivia-arena/arena" variant="ghost">
          <i class="fas fa-user-group text-sm"></i>
          Challenge a friend
        </Button>
      </div>
    </div>
    <aside class="grid w-full max-w-md gap-4 rounded-3xl border border-white/20 bg-white/10 p-6 text-sm backdrop-blur">
      <header class="flex items-center justify-between text-xs uppercase tracking-[0.3em] text-white/70">
        <span class="inline-flex items-center gap-2">
          <span class="h-2 w-2 rounded-full bg-emerald-300"></span>
          Live snapshot
        </span>
        <span>Solo drill</span>
      </header>
      <div class="rounded-2xl border border-white/20 bg-white/10 px-4 py-3">
        <p class="text-xs font-semibold uppercase tracking-wide text-white/70">Score</p>
        <p class="mt-2 text-3xl font-bold" x-text="store.state.session.score"></p>
        <p class="mt-1 text-xs text-white/70">Streak <span class="font-semibold" x-text="store.state.session.streak"></span> · Accuracy <span class="font-semibold" x-text="Math.round(store.state.stats.accuracy * 100)"></span>%</p>
      </div>
      <div class="rounded-2xl border border-white/20 bg-white/10 px-4 py-3">
        <p class="text-xs font-semibold uppercase tracking-wide text-white/70">Daily challenge</p>
        <p class="mt-2 text-2xl font-semibold" x-text="`Rank #${store.state.daily.yourRank}`"></p>
        <p class="mt-1 text-xs text-white/70">
          Deadline <span x-text="new Date(store.state.daily.deadline).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })"></span>
        </p>
      </div>
      <div class="rounded-2xl border border-white/20 bg-white/10 px-4 py-3">
        <p class="text-xs font-semibold uppercase tracking-wide text-white/70">Arena queue</p>
        <ul class="mt-3 space-y-2 text-white/80">
          <template x-for="match in store.state.matches" :key="match.id">
            <li class="flex items-center justify-between gap-2 text-xs">
              <span class="font-semibold" x-text="match.opponent"></span>
              <span class="rounded-full px-2 py-0.5 text-[11px] font-semibold" :class="match.status === 'finished' ? 'bg-emerald-300/30 text-emerald-100' : match.status === 'playing' ? 'bg-amber-300/30 text-amber-100' : 'bg-white/20 text-white'">
                <span x-text="match.status"></span>
              </span>
            </li>
          </template>
        </ul>
      </div>
      <p class="text-xs text-white/70" x-text="store.state.lastAction"></p>
    </aside>
  </div>
</section>

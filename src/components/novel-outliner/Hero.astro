---
import Button from "../Button.astro";
---
<section
  class="relative overflow-hidden bg-slate-950 py-16 text-white sm:py-20"
  x-data="() => ({ novel: $store['novel-outliner'] })"
>
  <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,rgba(99,102,241,0.25),rgba(15,23,42,0.95))]"></div>
  <div class="relative mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
    <div class="flex flex-col gap-12 lg:flex-row lg:items-center">
      <div class="space-y-6 lg:w-1/2">
        <div class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/10 px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.3em] text-indigo-300">
          Novel Ops Suite
        </div>
        <h1 class="text-4xl font-semibold leading-tight tracking-tight text-white sm:text-5xl">
          Novel Outliner — from spark to scene-perfect roadmap
        </h1>
        <p class="max-w-xl text-base text-slate-300 sm:text-lg">
          Architect multi-act epics, snowflake expansions, and meticulous scene plans in a dual-pane workspace.
          Novel Outliner keeps structures, character arcs, timelines, and diagnostic insights perfectly in sync so you can draft with confidence.
        </p>
        <div class="flex flex-wrap items-center gap-3">
          <Button type="button" class="shadow-lg shadow-indigo-500/30" @click.prevent="novel.queueProjectFromWizard()">
            <i class="fa-solid fa-sparkles text-xs"></i>
            Generate starter project
          </Button>
          <Button type="button" variant="outline" class="border-white/30 text-white hover:bg-white/10" @click.prevent="novel.togglePlan()">
            <i class="fa-solid fa-shuffle text-xs"></i>
            <span x-text="novel.plan === 'pro' ? 'View Free mode' : 'Preview Pro toolkit'"></span>
          </Button>
          <Button type="button" variant="ghost" class="text-indigo-200 hover:text-white" @click.prevent="novel.selectPanel('threads')">
            <i class="fa-solid fa-diagram-project text-xs"></i>
            Explore thread matrix
          </Button>
        </div>
        <div class="grid gap-4 sm:grid-cols-2">
          <div class="rounded-3xl border border-white/10 bg-white/10 p-4 shadow-lg shadow-indigo-500/10">
            <p class="text-xs font-semibold uppercase tracking-[0.35em] text-indigo-200">Active projects</p>
            <p class="mt-3 flex items-baseline gap-2 text-3xl font-semibold">
              <span x-text="novel.state.metrics.activeProjects"></span>
              <span class="text-xs font-semibold uppercase tracking-[0.25em] text-indigo-200">live</span>
            </p>
            <p class="mt-2 text-xs text-slate-300">Keep up to 2 projects free, or unlock unlimited with Pro mode.</p>
          </div>
          <div class="rounded-3xl border border-white/10 bg-white/5 p-4">
            <p class="text-xs font-semibold uppercase tracking-[0.35em] text-indigo-200">Beats outlined</p>
            <p class="mt-3 text-3xl font-semibold" x-text="novel.state.metrics.beatsOutlined"></p>
            <p class="mt-2 text-xs text-slate-300">Average timeline confidence
              <span class="font-semibold text-indigo-200" x-text="`${novel.state.metrics.averageTimelineConfidence}%`"></span>
            </p>
          </div>
        </div>
      </div>
      <div class="lg:w-1/2">
        <div class="space-y-4 rounded-3xl border border-indigo-400/40 bg-gradient-to-br from-indigo-500/30 via-slate-900 to-slate-950 p-6 shadow-2xl shadow-indigo-500/20">
          <div class="flex items-center justify-between gap-3">
            <h2 class="text-lg font-semibold">Plan coverage</h2>
            <span class="inline-flex items-center gap-2 rounded-full bg-indigo-500/20 px-3 py-1 text-xs font-semibold text-indigo-100">
              <i class="fa-solid fa-crown text-[10px]"></i>
              <span x-text="novel.plan === 'pro' ? 'Pro toolkit' : 'Free essentials'"></span>
            </span>
          </div>
          <div class="grid gap-3 text-sm text-indigo-100">
            <div class="flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-4 py-3">
              <div>
                <p class="font-semibold">Structure presets</p>
                <p class="text-xs text-indigo-200">Access templates like Save the Cat!, Hero&apos;s Journey, and Mystery Spine.</p>
              </div>
              <span class="text-xs font-semibold uppercase tracking-[0.25em]" x-text="novel.plan === 'pro' ? 'All + custom' : 'Three-Act & Snowflake'"></span>
            </div>
            <div class="flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-4 py-3">
              <div>
                <p class="font-semibold">Snowflake steps unlocked</p>
                <p class="text-xs text-indigo-200">Iterative expansion from logline to chapter-ready blueprint.</p>
              </div>
              <span class="text-xs font-semibold uppercase tracking-[0.25em]" x-text="`${novel.allowedSnowflakeSteps}`"></span>
            </div>
            <div class="flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 px-4 py-3">
              <div>
                <p class="font-semibold">Export formats</p>
                <p class="text-xs text-indigo-200">Hand off outlines to Manuscript or Presentation Designer.</p>
              </div>
              <span class="text-xs font-semibold uppercase tracking-[0.25em]" x-text="novel.plan === 'pro' ? 'MD · DOCX · FDX · JSON' : 'Markdown'"></span>
            </div>
          </div>
          <div class="rounded-2xl border border-white/10 bg-slate-900/80 px-4 py-3 text-xs text-indigo-200">
            <p class="font-semibold text-indigo-100">Workspace signal</p>
            <p class="mt-1">Heat-map coverage at <span class="font-semibold" x-text="`${novel.state.workspaceMetrics.threadCoverage}%`"></span>,
              diagnostics queue <span class="font-semibold" x-text="novel.state.diagnostics.length"></span>,
              last revision snapshot <span class="font-semibold" x-text="novel.state.revisionSnapshots[0]?.label ?? 'n/a'"></span>.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

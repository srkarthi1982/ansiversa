---
type PaginationProps = {
  loadingVar: string;
  pageVar: string;
  totalPagesVar: string;
  pageNumbersVar: string;
  onPrevPage: string;
  onNextPage: string;
  onSetPage: string;
  prevLabel?: string;
  nextLabel?: string;
};

const {
  loadingVar,
  pageVar,
  totalPagesVar,
  pageNumbersVar,
  onPrevPage,
  onNextPage,
  onSetPage,
  prevLabel = "Prev",
  nextLabel = "Next",
}: PaginationProps = Astro.props;
---
<div class="border-t border-slate-200 px-4 py-4 sm:px-6">
  <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
    <p class="text-xs font-medium text-slate-500">
      <span x-text={`'Page ' + (${pageVar} ?? 1) + ' of ' + (${totalPagesVar} ?? 1)`}></span>
    </p>
    <div class="flex flex-wrap items-center gap-2" x-cloak>
      <button
        type="button"
        class="inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-slate-300 hover:text-slate-800 disabled:cursor-not-allowed disabled:opacity-60"
        x-on:click={`${onPrevPage}()`}
        x-bind:disabled={`${loadingVar} || (${pageVar} ?? 1) <= 1`}
      >
        {prevLabel}
      </button>
      <template x-for={`pageNumber in ${pageNumbersVar}`} :key="`page-${pageNumber}`">
        <button
          type="button"
          class="inline-flex items-center justify-center rounded-full border px-3 py-1 text-xs font-semibold transition disabled:cursor-not-allowed disabled:opacity-60"
          x-text="pageNumber"
          x-on:click={`${onSetPage}(pageNumber)`}
          x-bind:disabled={`${loadingVar}`}
          :class={`pageNumber === ${pageVar} ? 'border-indigo-600 bg-indigo-600 text-white' : 'border-slate-200 bg-white text-slate-600 hover:border-slate-300 hover:text-slate-800'`}
        ></button>
      </template>
      <button
        type="button"
        class="inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-slate-300 hover:text-slate-800 disabled:cursor-not-allowed disabled:opacity-60"
        x-on:click={`${onNextPage}()`}
        x-bind:disabled={`${loadingVar} || (${totalPagesVar} ?? 1) === 0 || (${pageVar} ?? 1) >= (${totalPagesVar} ?? 1)`}
      >
        {nextLabel}
      </button>
    </div>
  </div>
</div>

---
import SectionHeading from "../SectionHeading.astro";
import Button from "../Button.astro";
---
<section
  class="border-t border-white/10 bg-slate-950/95 py-20 text-white"
  x-data="{ quote: $store['quote-forge'] }"
>
  <div class="mx-auto max-w-6xl space-y-12 px-4 sm:px-6 lg:px-8">
    <SectionHeading
      eyebrow="Exports and integrations"
      title="Deliver quotes to schedulers, data pipelines, and Presentation Designer"
      description="Package variants with captions, hashtags, scores, and scheduling hints. Use the API endpoints to automate batch generation, packs, and exports."
    />

    <div class="grid gap-8 lg:grid-cols-[1.1fr_0.9fr]">
      <div class="space-y-6 rounded-3xl border border-white/10 bg-white/5 p-6">
        <header class="flex items-center justify-between text-xs uppercase tracking-[0.3em] text-white/60">
          <span>Export presets</span>
          <span>Plan: <span x-text="quote.plan === 'free' ? 'Free' : 'Pro'"></span></span>
        </header>
        <div class="grid gap-4 sm:grid-cols-2">
          <template x-for="preset in quote.exportPresets" :key="preset.id">
            <div
              class="rounded-2xl border px-4 py-4 transition"
              :class="preset.plan === 'pro' && quote.plan === 'free'
                ? 'border-purple-400/60 bg-purple-500/15 text-white/70'
                : 'border-white/10 bg-slate-950/60 text-white/80'"
            >
              <div class="flex items-center justify-between gap-3 text-xs uppercase tracking-[0.3em] text-white/50">
                <span x-text="preset.label"></span>
                <span x-text="preset.plan === 'pro' ? 'PRO' : 'FREE'"></span>
              </div>
              <p class="mt-2 text-sm text-white/80" x-text="preset.description"></p>
              <p class="mt-2 text-xs text-white/60">
                Includes: <span x-text="preset.includes.join(', ')"></span>
              </p>
              <p class="mt-1 text-xs text-white/60">
                Best for: <span x-text="preset.recommendedFor"></span>
              </p>
              <template x-if="preset.integration">
                <p class="mt-1 text-xs text-white/60">
                  Integration: <span x-text="preset.integration"></span>
                </p>
              </template>
              <Button
                type="button"
                variant="ghost"
                class="mt-4 text-xs text-white/70 hover:text-white"
                :class="preset.plan === 'pro' && quote.plan === 'free' ? 'opacity-60' : ''"
              >
                Queue export
              </Button>
            </div>
          </template>
        </div>
      </div>

      <aside class="space-y-6 rounded-3xl border border-white/10 bg-slate-900/70 p-6 text-sm text-white/80">
        <div>
          <p class="text-xs uppercase tracking-[0.3em] text-white/60">API endpoints</p>
          <ul class="mt-3 space-y-3">
            <template x-for="endpoint in quote.apiEndpoints" :key="endpoint.id">
              <li class="rounded-2xl border border-white/10 bg-white/5 p-4">
                <div class="flex items-center justify-between text-xs uppercase tracking-[0.3em] text-white/50">
                  <span>
                    <span class="rounded-full bg-emerald-500/20 px-2 py-0.5 text-[10px] font-semibold text-emerald-100" x-text="endpoint.method"></span>
                    <span class="ml-2" x-text="endpoint.path"></span>
                  </span>
                  <span x-text="endpoint.summary"></span>
                </div>
                <div class="mt-3 grid gap-3 text-xs text-white/60 sm:grid-cols-2">
                  <div class="rounded-2xl border border-white/10 bg-slate-950/60 px-3 py-2">
                    <p class="text-[10px] uppercase tracking-[0.3em] text-white/50">Request</p>
                    <pre
                      class="mt-1 overflow-x-auto whitespace-pre-wrap text-[11px] text-white/70"
                      x-text="JSON.stringify(endpoint.sampleRequest, null, 2)"
                    ></pre>
                  </div>
                  <div class="rounded-2xl border border-white/10 bg-slate-950/60 px-3 py-2">
                    <p class="text-[10px] uppercase tracking-[0.3em] text-white/50">Response</p>
                    <pre
                      class="mt-1 overflow-x-auto whitespace-pre-wrap text-[11px] text-white/70"
                      x-text="JSON.stringify(endpoint.sampleResponse, null, 2)"
                    ></pre>
                  </div>
                </div>
              </li>
            </template>
          </ul>
        </div>
        <div class="rounded-2xl border border-white/10 bg-white/5 p-5 text-xs text-white/60">
          <p class="font-semibold uppercase tracking-[0.3em] text-white/50">Automation tips</p>
          <ul class="mt-2 space-y-1">
            <li>Use `POST /quotes/api/generate` followed by `POST /quotes/api/score` to log variants with metrics.</li>
            <li>Push curated packs directly to Presentation Designer for image cards.</li>
            <li>Combine JSON export with Social Caption Generator to draft multi-channel posts.</li>
          </ul>
        </div>
      </aside>
    </div>
  </div>
</section>

{"version":3,"sources":["../src/index.ts","../src/drivers/astrodb.ts","../src/utils/pagination.ts","../src/types/quiz.ts","../src/repos/platforms.repo.ts","../src/repos/questions.repo.ts","../src/utils/ids.ts","../src/repos/subjects.repo.ts","../src/repos/topics.repo.ts","../src/repos/roadmaps.repo.ts","../src/repos/results.repo.ts","../src/repos/quiz-admin.repo.ts","../src/config.ts"],"sourcesContent":["export * from \"./drivers/driver\";\nexport { createAstroDbDriver } from \"./drivers/astrodb\";\nexport * from \"./repos/platforms.repo\";\nexport * from \"./repos/questions.repo\";\nexport * from \"./repos/subjects.repo\";\nexport * from \"./repos/topics.repo\";\nexport * from \"./repos/roadmaps.repo\";\nexport * from \"./repos/results.repo\";\nexport * from \"./repos/quiz-admin.repo\";\nexport * from \"./types/quiz\";\nexport * from \"./types/pagination\";\nexport { runPaginatedQuery } from \"./utils/pagination\";\nexport { getNextNumericId } from \"./utils/ids\";\nexport * from \"./config\";\n","import { createClient, type Client, type ResultSet } from \"@libsql/client/web\";\n\nimport type { DbDriver, QueryParameter, QueryResult } from \"./driver\";\n\nexport interface AstroDbDriverOptions {\n  url: string;\n  authToken?: string;\n}\n\nexport interface AstroDbDriver extends DbDriver {\n  readonly client: Client;\n}\n\nconst normalizeParams = (params: QueryParameter[] = []): QueryParameter[] =>\n  params.map((param) => (param instanceof Date ? param.toISOString() : param));\n\nconst normalizeRows = <T>(result: ResultSet): QueryResult<T>[\"rows\"] => {\n  if (!result.columns || result.rows.length === 0) {\n    return result.rows as unknown as T[];\n  }\n\n  return result.rows.map((row) => {\n    if (Array.isArray(row)) {\n      const record = Object.fromEntries(\n        row.map((value, index) => [result.columns?.[index] ?? index.toString(), value]),\n      );\n      return record as T;\n    }\n\n    return row as unknown as T;\n  });\n};\n\nexport const createAstroDbDriver = (options: AstroDbDriverOptions): AstroDbDriver => {\n  const { url, authToken } = options;\n  const client = createClient({ url, authToken });\n\n  return {\n    client,\n    async query<T>(sql: string, params: QueryParameter[] = []) {\n      const result = await client.execute({ sql, args: normalizeParams(params) });\n      const rows = normalizeRows<T>(result);\n      return { rows };\n    },\n    async execute<T>(sql: string, params: QueryParameter[] = []) {\n      const result = await client.execute({ sql, args: normalizeParams(params) });\n      return result as unknown as T;\n    },\n  };\n};\n","import type { DbDriver, QueryParameter } from \"../drivers/driver\";\nimport type { PaginatedResult, PaginationOptions } from \"../types/pagination\";\n\nconst extractTotalCount = (row: Record<string, unknown> | undefined): number => {\n  if (!row) {\n    return 0;\n  }\n\n  const possibleKeys = [\"total\", \"count\", \"value\"];\n  for (const key of possibleKeys) {\n    const raw = row[key];\n    if (typeof raw === \"number\") {\n      return raw;\n    }\n    if (typeof raw === \"string\" && raw.trim().length > 0) {\n      const parsed = Number(raw);\n      if (!Number.isNaN(parsed)) {\n        return parsed;\n      }\n    }\n  }\n\n  const firstValue = Object.values(row)[0];\n  if (typeof firstValue === \"number\") {\n    return firstValue;\n  }\n  if (typeof firstValue === \"string\" && firstValue.trim().length > 0) {\n    const parsed = Number(firstValue);\n    if (!Number.isNaN(parsed)) {\n      return parsed;\n    }\n  }\n\n  return 0;\n};\n\nexport interface PaginatedQueryConfig<TRow, TResult> extends PaginationOptions {\n  driver: DbDriver;\n  countQuery: string;\n  dataQuery: string;\n  params?: QueryParameter[];\n  mapRow: (row: TRow) => TResult;\n}\n\nexport const runPaginatedQuery = async <TRow, TResult>(\n  config: PaginatedQueryConfig<TRow, TResult>,\n): Promise<PaginatedResult<TResult>> => {\n  const { driver, countQuery, dataQuery, params = [], mapRow, page, pageSize } = config;\n\n  const normalizedPageSize = Math.max(1, Math.trunc(pageSize ?? 20));\n  const requestedPage = Math.max(1, Math.trunc(page ?? 1));\n\n  const { rows: countRows } = await driver.query<Record<string, unknown>>(countQuery, params);\n  const total = extractTotalCount(countRows[0]);\n\n  const totalPages = total > 0 ? Math.ceil(total / normalizedPageSize) : 0;\n  const maxPage = totalPages > 0 ? totalPages : 1;\n  const selectedPage = total === 0 ? 1 : Math.min(requestedPage, maxPage);\n  const offset = total === 0 ? 0 : (selectedPage - 1) * normalizedPageSize;\n\n  const { rows } = await driver.query<TRow>(dataQuery, [...params, normalizedPageSize, offset]);\n  const data = rows.map((row) => mapRow(row));\n\n  return {\n    data,\n    total,\n    page: total === 0 ? 1 : selectedPage,\n    pageSize: normalizedPageSize,\n    totalPages,\n    hasNextPage: totalPages > 0 && selectedPage < totalPages,\n    hasPreviousPage: totalPages > 0 && selectedPage > 1,\n  };\n};\n","import { z } from \"zod\";\n\nconst coerceNumber = (value: unknown, fallback = 0): number => {\n  if (typeof value === \"number\" && Number.isFinite(value)) {\n    return value;\n  }\n  if (typeof value === \"string\" && value.trim().length > 0) {\n    const parsed = Number(value);\n    if (!Number.isNaN(parsed)) {\n      return parsed;\n    }\n  }\n  if (typeof value === \"boolean\") {\n    return value ? 1 : 0;\n  }\n  return fallback;\n};\n\nconst coerceInteger = (value: unknown, fallback: number | null = 0): number => {\n  if (typeof value === \"number\" && Number.isFinite(value)) {\n    return Math.trunc(value);\n  }\n  if (typeof value === \"string\" && value.trim().length > 0) {\n    const parsed = Number.parseInt(value, 10);\n    if (!Number.isNaN(parsed)) {\n      return parsed;\n    }\n  }\n  if (typeof value === \"boolean\") {\n    return value ? 1 : 0;\n  }\n  if (fallback === null) {\n    throw new Error(`Expected integer but received ${value}`);\n  }\n  return fallback;\n};\n\nconst coerceOptionalInteger = (value: unknown): number | null => {\n  if (value === null || value === undefined || value === \"\") {\n    return null;\n  }\n  try {\n    return coerceInteger(value, null);\n  } catch {\n    return null;\n  }\n};\n\nconst coerceBoolean = (value: unknown, fallback = false): boolean => {\n  if (typeof value === \"boolean\") {\n    return value;\n  }\n  if (typeof value === \"number\") {\n    return value !== 0;\n  }\n  if (typeof value === \"string\") {\n    const normalized = value.trim().toLowerCase();\n    if ([\"true\", \"1\", \"yes\", \"y\"].includes(normalized)) {\n      return true;\n    }\n    if ([\"false\", \"0\", \"no\", \"n\"].includes(normalized)) {\n      return false;\n    }\n  }\n  return fallback;\n};\n\nconst coerceString = (value: unknown, fallback = \"\"): string => {\n  if (typeof value === \"string\") {\n    return value;\n  }\n  if (typeof value === \"number\" || typeof value === \"boolean\") {\n    return String(value);\n  }\n  return fallback;\n};\n\nconst coerceNullableString = (value: unknown): string | null => {\n  if (value === null || value === undefined) {\n    return null;\n  }\n  const str = coerceString(value);\n  return str.length === 0 ? null : str;\n};\n\nconst parseJson = <T>(value: unknown): T | null => {\n  if (value === null || value === undefined) {\n    return null;\n  }\n  if (typeof value === \"object\") {\n    return value as T;\n  }\n  if (typeof value === \"string\") {\n    const trimmed = value.trim();\n    if (trimmed.length === 0) {\n      return null;\n    }\n    try {\n      return JSON.parse(trimmed) as T;\n    } catch (error) {\n      throw new Error(`Failed to parse JSON value: ${error}`);\n    }\n  }\n  throw new Error(`Unsupported JSON value type: ${value}`);\n};\n\nconst parseDate = (value: unknown): Date => {\n  if (value instanceof Date) {\n    return value;\n  }\n  if (typeof value === \"string\" || typeof value === \"number\") {\n    const date = new Date(value);\n    if (!Number.isNaN(date.getTime())) {\n      return date;\n    }\n  }\n  throw new Error(`Invalid date value: ${value}`);\n};\n\nconst toStringArray = (value: unknown): string[] => {\n  if (value === null || value === undefined) {\n    return [];\n  }\n  if (Array.isArray(value)) {\n    return value\n      .map((item) => {\n        if (typeof item === \"string\") {\n          return item;\n        }\n        if (typeof item === \"number\" || typeof item === \"boolean\") {\n          return String(item);\n        }\n        if (item && typeof item === \"object\") {\n          return JSON.stringify(item);\n        }\n        return \"\";\n      })\n      .filter((entry) => entry.length > 0);\n  }\n  if (typeof value === \"object\") {\n    return Object.values(value)\n      .map((entry) => {\n        if (typeof entry === \"string\") {\n          return entry;\n        }\n        if (typeof entry === \"number\" || typeof entry === \"boolean\") {\n          return String(entry);\n        }\n        if (entry && typeof entry === \"object\") {\n          return JSON.stringify(entry);\n        }\n        return \"\";\n      })\n      .filter((entry) => entry.length > 0);\n  }\n  if (typeof value === \"string\" && value.trim().length > 0) {\n    try {\n      const parsed = JSON.parse(value);\n      if (Array.isArray(parsed)) {\n        return toStringArray(parsed);\n      }\n      if (parsed && typeof parsed === \"object\") {\n        return toStringArray(Object.values(parsed));\n      }\n    } catch {\n      return [value];\n    }\n  }\n  return [];\n};\n\nconst LevelEnum = z.enum([\"E\", \"M\", \"D\"]);\n\nconst PlatformRowSchema = z.object({\n  id: z.union([z.number(), z.string()]),\n  name: z.string(),\n  description: z.union([z.string(), z.null()]).optional(),\n  icon: z.union([z.string(), z.null()]).optional(),\n  type: z.union([z.string(), z.null()]).optional(),\n  qCount: z.union([z.number(), z.string(), z.null()]).optional(),\n  isActive: z.union([z.boolean(), z.number(), z.string()]).optional(),\n});\n\nconst SubjectRowSchema = z.object({\n  id: z.union([z.number(), z.string()]),\n  platformId: z.union([z.number(), z.string()]),\n  name: z.string(),\n  isActive: z.union([z.boolean(), z.number(), z.string()]).optional(),\n  qCount: z.union([z.number(), z.string(), z.null()]).optional(),\n});\n\nconst TopicRowSchema = z.object({\n  id: z.union([z.number(), z.string()]),\n  platformId: z.union([z.number(), z.string()]),\n  subjectId: z.union([z.number(), z.string()]),\n  name: z.string(),\n  isActive: z.union([z.boolean(), z.number(), z.string()]).optional(),\n  qCount: z.union([z.number(), z.string(), z.null()]).optional(),\n});\n\nconst RoadmapRowSchema = z.object({\n  id: z.union([z.number(), z.string()]),\n  platformId: z.union([z.number(), z.string()]),\n  subjectId: z.union([z.number(), z.string()]),\n  topicId: z.union([z.number(), z.string()]),\n  name: z.string(),\n  isActive: z.union([z.boolean(), z.number(), z.string()]).optional(),\n  qCount: z.union([z.number(), z.string(), z.null()]).optional(),\n});\n\nconst QuestionRowSchema = z.object({\n  id: z.union([z.number(), z.string()]),\n  platformId: z.union([z.number(), z.string()]),\n  subjectId: z.union([z.number(), z.string(), z.null()]).optional(),\n  topicId: z.union([z.number(), z.string(), z.null()]).optional(),\n  roadmapId: z.union([z.number(), z.string(), z.null()]).optional(),\n  q: z.string(),\n  o: z.unknown().optional(),\n  a: z.string(),\n  e: z.union([z.string(), z.null()]).optional(),\n  l: z.union([z.string(), z.null()]).optional(),\n  isActive: z.union([z.boolean(), z.number(), z.string()]).optional(),\n});\n\nconst ResultRowSchema = z.object({\n  id: z.union([z.number(), z.string()]),\n  userId: z.string(),\n  platformId: z.union([z.number(), z.string()]),\n  subjectId: z.union([z.number(), z.string(), z.null()]).optional(),\n  topicId: z.union([z.number(), z.string(), z.null()]).optional(),\n  roadmapId: z.union([z.number(), z.string(), z.null()]).optional(),\n  level: z.union([z.string(), z.null()]).optional(),\n  responses: z.unknown().optional(),\n  mark: z.union([z.number(), z.string(), z.null()]).optional(),\n  createdAt: z.union([z.string(), z.number(), z.date()]),\n});\n\nexport const PlatformSchema = z.object({\n  id: z.number().int(),\n  name: z.string(),\n  description: z.string(),\n  icon: z.string(),\n  type: z.string().nullable(),\n  qCount: z.number().int(),\n  isActive: z.boolean(),\n});\n\nexport const NewPlatformSchema = z.object({\n  name: z.string().min(1),\n  description: z.string().optional().default(\"\"),\n  icon: z.string().optional().default(\"\"),\n  type: z.string().nullable().optional(),\n  qCount: z.number().int().nonnegative().default(0),\n  isActive: z.boolean().default(true),\n});\n\nexport const UpdatePlatformSchema = z.object({\n  name: z.string().min(1).optional(),\n  description: z.string().optional(),\n  icon: z.string().optional(),\n  type: z.string().nullable().optional(),\n  qCount: z.number().int().nonnegative().optional(),\n  isActive: z.boolean().optional(),\n});\n\nexport const SubjectSchema = z.object({\n  id: z.number().int(),\n  platformId: z.number().int(),\n  name: z.string(),\n  isActive: z.boolean(),\n  qCount: z.number().int(),\n});\n\nexport const NewSubjectSchema = z.object({\n  id: z.number().int().nonnegative().optional(),\n  platformId: z.number().int().nonnegative(),\n  name: z.string().min(1),\n  isActive: z.boolean().default(true),\n  qCount: z.number().int().nonnegative().default(0),\n});\n\nexport const UpdateSubjectSchema = z.object({\n  platformId: z.number().int().nonnegative().optional(),\n  name: z.string().min(1).optional(),\n  isActive: z.boolean().optional(),\n  qCount: z.number().int().nonnegative().optional(),\n});\n\nexport const TopicSchema = z.object({\n  id: z.number().int(),\n  platformId: z.number().int(),\n  subjectId: z.number().int(),\n  name: z.string(),\n  isActive: z.boolean(),\n  qCount: z.number().int(),\n});\n\nexport const NewTopicSchema = z.object({\n  id: z.number().int().nonnegative().optional(),\n  platformId: z.number().int().nonnegative(),\n  subjectId: z.number().int().nonnegative(),\n  name: z.string().min(1),\n  isActive: z.boolean().default(true),\n  qCount: z.number().int().nonnegative().default(0),\n});\n\nexport const UpdateTopicSchema = z.object({\n  platformId: z.number().int().nonnegative().optional(),\n  subjectId: z.number().int().nonnegative().optional(),\n  name: z.string().min(1).optional(),\n  isActive: z.boolean().optional(),\n  qCount: z.number().int().nonnegative().optional(),\n});\n\nexport const RoadmapSchema = z.object({\n  id: z.number().int(),\n  platformId: z.number().int(),\n  subjectId: z.number().int(),\n  topicId: z.number().int(),\n  name: z.string(),\n  isActive: z.boolean(),\n  qCount: z.number().int(),\n});\n\nexport const NewRoadmapSchema = z.object({\n  id: z.number().int().nonnegative().optional(),\n  platformId: z.number().int().nonnegative(),\n  subjectId: z.number().int().nonnegative(),\n  topicId: z.number().int().nonnegative(),\n  name: z.string().min(1),\n  isActive: z.boolean().default(true),\n  qCount: z.number().int().nonnegative().default(0),\n});\n\nexport const UpdateRoadmapSchema = z.object({\n  platformId: z.number().int().nonnegative().optional(),\n  subjectId: z.number().int().nonnegative().optional(),\n  topicId: z.number().int().nonnegative().optional(),\n  name: z.string().min(1).optional(),\n  isActive: z.boolean().optional(),\n  qCount: z.number().int().nonnegative().optional(),\n});\n\nexport const QuestionSchema = z.object({\n  id: z.number().int(),\n  platformId: z.number().int(),\n  subjectId: z.number().int().nullable(),\n  topicId: z.number().int().nullable(),\n  roadmapId: z.number().int().nullable(),\n  question: z.string(),\n  options: z.array(z.string()),\n  answer: z.string(),\n  explanation: z.string().nullable(),\n  level: LevelEnum,\n  isActive: z.boolean(),\n});\n\nexport const NewQuestionSchema = z.object({\n  platformId: z.number().int().nonnegative(),\n  subjectId: z.number().int().nonnegative().nullable().optional(),\n  topicId: z.number().int().nonnegative().nullable().optional(),\n  roadmapId: z.number().int().nonnegative().nullable().optional(),\n  question: z.string().min(1),\n  options: z.array(z.string()).default([]),\n  answer: z.string().min(1),\n  explanation: z.string().nullable().optional(),\n  level: LevelEnum,\n  isActive: z.boolean().default(true),\n});\n\nexport const UpdateQuestionSchema = z.object({\n  platformId: z.number().int().nonnegative().optional(),\n  subjectId: z.number().int().nonnegative().nullable().optional(),\n  topicId: z.number().int().nonnegative().nullable().optional(),\n  roadmapId: z.number().int().nonnegative().nullable().optional(),\n  question: z.string().min(1).optional(),\n  options: z.array(z.string()).optional(),\n  answer: z.string().min(1).optional(),\n  explanation: z.string().nullable().optional(),\n  level: LevelEnum.optional(),\n  isActive: z.boolean().optional(),\n});\n\nexport const ResultSchema = z.object({\n  id: z.number().int(),\n  userId: z.string(),\n  platformId: z.number().int(),\n  subjectId: z.number().int().nullable(),\n  topicId: z.number().int().nullable(),\n  roadmapId: z.number().int().nullable(),\n  level: LevelEnum,\n  responses: z.unknown(),\n  mark: z.number(),\n  createdAt: z.date(),\n});\n\nexport const NewResultSchema = z.object({\n  userId: z.string().min(1),\n  platformId: z.number().int().nonnegative(),\n  subjectId: z.number().int().nonnegative().nullable().optional(),\n  topicId: z.number().int().nonnegative().nullable().optional(),\n  roadmapId: z.number().int().nonnegative().nullable().optional(),\n  level: LevelEnum,\n  responses: z.unknown().optional(),\n  mark: z.number().default(0),\n});\n\nexport const UpdateResultSchema = z.object({\n  userId: z.string().min(1).optional(),\n  platformId: z.number().int().nonnegative().optional(),\n  subjectId: z.number().int().nonnegative().nullable().optional(),\n  topicId: z.number().int().nonnegative().nullable().optional(),\n  roadmapId: z.number().int().nonnegative().nullable().optional(),\n  level: LevelEnum.optional(),\n  responses: z.unknown().optional(),\n  mark: z.number().optional(),\n});\n\nexport type Platform = z.infer<typeof PlatformSchema>;\nexport type NewPlatform = z.infer<typeof NewPlatformSchema>;\nexport type UpdatePlatform = z.infer<typeof UpdatePlatformSchema>;\nexport type Subject = z.infer<typeof SubjectSchema>;\nexport type NewSubject = z.infer<typeof NewSubjectSchema>;\nexport type UpdateSubject = z.infer<typeof UpdateSubjectSchema>;\nexport type Topic = z.infer<typeof TopicSchema>;\nexport type NewTopic = z.infer<typeof NewTopicSchema>;\nexport type UpdateTopic = z.infer<typeof UpdateTopicSchema>;\nexport type Roadmap = z.infer<typeof RoadmapSchema>;\nexport type NewRoadmap = z.infer<typeof NewRoadmapSchema>;\nexport type UpdateRoadmap = z.infer<typeof UpdateRoadmapSchema>;\nexport type Question = z.infer<typeof QuestionSchema>;\nexport type NewQuestion = z.infer<typeof NewQuestionSchema>;\nexport type UpdateQuestion = z.infer<typeof UpdateQuestionSchema>;\nexport type Result = z.infer<typeof ResultSchema>;\nexport type NewResult = z.infer<typeof NewResultSchema>;\nexport type UpdateResult = z.infer<typeof UpdateResultSchema>;\n\ntype PlatformRow = z.infer<typeof PlatformRowSchema>;\ntype SubjectRow = z.infer<typeof SubjectRowSchema>;\ntype TopicRow = z.infer<typeof TopicRowSchema>;\ntype RoadmapRow = z.infer<typeof RoadmapRowSchema>;\ntype QuestionRow = z.infer<typeof QuestionRowSchema>;\ntype ResultRow = z.infer<typeof ResultRowSchema>;\n\nexport const parsePlatform = (row: unknown): Platform => {\n  const parsed = PlatformRowSchema.parse(row);\n  return PlatformSchema.parse({\n    id: coerceInteger(parsed.id),\n    name: parsed.name,\n    description: coerceString(parsed.description ?? \"\"),\n    icon: coerceString(parsed.icon ?? \"\"),\n    type: coerceNullableString(parsed.type),\n    qCount: coerceInteger(parsed.qCount ?? 0),\n    isActive: coerceBoolean(parsed.isActive, true),\n  });\n};\n\nexport const parseSubject = (row: unknown): Subject => {\n  const parsed = SubjectRowSchema.parse(row);\n  return SubjectSchema.parse({\n    id: coerceInteger(parsed.id),\n    platformId: coerceInteger(parsed.platformId),\n    name: parsed.name,\n    isActive: coerceBoolean(parsed.isActive, true),\n    qCount: coerceInteger(parsed.qCount ?? 0),\n  });\n};\n\nexport const parseTopic = (row: unknown): Topic => {\n  const parsed = TopicRowSchema.parse(row);\n  return TopicSchema.parse({\n    id: coerceInteger(parsed.id),\n    platformId: coerceInteger(parsed.platformId),\n    subjectId: coerceInteger(parsed.subjectId),\n    name: parsed.name,\n    isActive: coerceBoolean(parsed.isActive, true),\n    qCount: coerceInteger(parsed.qCount ?? 0),\n  });\n};\n\nexport const parseRoadmap = (row: unknown): Roadmap => {\n  const parsed = RoadmapRowSchema.parse(row);\n  return RoadmapSchema.parse({\n    id: coerceInteger(parsed.id),\n    platformId: coerceInteger(parsed.platformId),\n    subjectId: coerceInteger(parsed.subjectId),\n    topicId: coerceInteger(parsed.topicId),\n    name: parsed.name,\n    isActive: coerceBoolean(parsed.isActive, true),\n    qCount: coerceInteger(parsed.qCount ?? 0),\n  });\n};\n\nexport const normalizeQuestion = (row: unknown): Question => {\n  const parsed = QuestionRowSchema.parse(row);\n  const level = coerceString(parsed.l ?? \"\").toUpperCase();\n  const normalizedLevel = LevelEnum.safeParse(level);\n\n  return QuestionSchema.parse({\n    id: coerceInteger(parsed.id),\n    platformId: coerceInteger(parsed.platformId),\n    subjectId: coerceOptionalInteger(parsed.subjectId),\n    topicId: coerceOptionalInteger(parsed.topicId),\n    roadmapId: coerceOptionalInteger(parsed.roadmapId),\n    question: parsed.q,\n    options: toStringArray(parsed.o),\n    answer: parsed.a,\n    explanation: coerceNullableString(parsed.e),\n    level: normalizedLevel.success ? normalizedLevel.data : \"E\",\n    isActive: coerceBoolean(parsed.isActive, true),\n  });\n};\n\nexport const parseResult = (row: unknown): Result => {\n  const parsed = ResultRowSchema.parse(row);\n  const level = coerceString(parsed.level ?? \"\").toUpperCase();\n  const normalizedLevel = LevelEnum.safeParse(level);\n\n  return ResultSchema.parse({\n    id: coerceInteger(parsed.id),\n    userId: parsed.userId,\n    platformId: coerceInteger(parsed.platformId),\n    subjectId: coerceOptionalInteger(parsed.subjectId),\n    topicId: coerceOptionalInteger(parsed.topicId),\n    roadmapId: coerceOptionalInteger(parsed.roadmapId),\n    level: normalizedLevel.success ? normalizedLevel.data : \"E\",\n    responses: (() => {\n      try {\n        return parseJson(parsed.responses) ?? null;\n      } catch {\n        return parsed.responses ?? null;\n      }\n    })(),\n    mark: coerceNumber(parsed.mark ?? 0),\n    createdAt: parseDate(parsed.createdAt),\n  });\n};\n","import type { DbDriver, QueryParameter } from \"../drivers/driver\";\nimport { runPaginatedQuery } from \"../utils/pagination\";\nimport type { PaginatedResult, PaginationOptions } from \"../types/pagination\";\nimport {\n  NewPlatformSchema,\n  UpdatePlatformSchema,\n  type NewPlatform,\n  type UpdatePlatform,\n  parsePlatform,\n  type Platform,\n} from \"../types/quiz\";\n\nexport interface PlatformsRepo {\n  list(): Promise<Platform[]>;\n  listPaginated(options?: PaginationOptions): Promise<PaginatedResult<Platform>>;\n  getById(id: number): Promise<Platform | null>;\n  create(input: NewPlatform): Promise<Platform>;\n  update(id: number, input: UpdatePlatform): Promise<Platform | null>;\n  delete(id: number): Promise<Platform | null>;\n}\n\nconst returningColumns = \"id, name, description, icon, type, qCount, isActive\";\nconst selectClause = `SELECT ${returningColumns} FROM Platform`;\n\nexport const createPlatformsRepo = (driver: DbDriver): PlatformsRepo => {\n  const getSingle = async (id: number): Promise<Platform | null> => {\n    const { rows } = await driver.query(`${selectClause} WHERE id = ? LIMIT 1`, [id]);\n    if (rows.length === 0) {\n      return null;\n    }\n    return parsePlatform(rows[0]);\n  };\n\n  return {\n    async list() {\n      const { rows } = await driver.query(`${selectClause} ORDER BY name ASC`);\n      return rows.map(parsePlatform);\n    },\n    async listPaginated(options: PaginationOptions = {}) {\n      return runPaginatedQuery({\n        driver,\n        countQuery: \"SELECT COUNT(*) as total FROM Platform\",\n        dataQuery: `${selectClause} ORDER BY name ASC LIMIT ? OFFSET ?`,\n        mapRow: parsePlatform,\n        page: options.page,\n        pageSize: options.pageSize,\n      });\n    },\n    async getById(id: number) {\n      return getSingle(id);\n    },\n    async create(input: NewPlatform) {\n      const data = NewPlatformSchema.parse(input);\n      const { rows } = await driver.query(\n        `INSERT INTO Platform (name, description, icon, type, qCount, isActive)\n         VALUES (?, ?, ?, ?, ?, ?)\n         RETURNING ${returningColumns}`,\n        [\n          data.name,\n          data.description,\n          data.icon,\n          data.type ?? null,\n          data.qCount,\n          data.isActive ? 1 : 0,\n        ],\n      );\n      if (rows.length === 0) {\n        throw new Error(\"Failed to insert platform record\");\n      }\n      return parsePlatform(rows[0]);\n    },\n    async update(id: number, input: UpdatePlatform) {\n      const data = UpdatePlatformSchema.parse(input ?? {});\n      const setClauses: string[] = [];\n      const params: QueryParameter[] = [];\n\n      if (data.name !== undefined) {\n        setClauses.push(\"name = ?\");\n        params.push(data.name);\n      }\n      if (data.description !== undefined) {\n        setClauses.push(\"description = ?\");\n        params.push(data.description);\n      }\n      if (data.icon !== undefined) {\n        setClauses.push(\"icon = ?\");\n        params.push(data.icon);\n      }\n      if (data.type !== undefined) {\n        setClauses.push(\"type = ?\");\n        params.push(data.type ?? null);\n      }\n      if (data.qCount !== undefined) {\n        setClauses.push(\"qCount = ?\");\n        params.push(data.qCount);\n      }\n      if (data.isActive !== undefined) {\n        setClauses.push(\"isActive = ?\");\n        params.push(data.isActive ? 1 : 0);\n      }\n\n      if (setClauses.length === 0) {\n        return getSingle(id);\n      }\n\n      const { rows } = await driver.query(\n        `UPDATE Platform SET ${setClauses.join(\", \")} WHERE id = ? RETURNING ${returningColumns}`,\n        [...params, id],\n      );\n      if (rows.length === 0) {\n        return null;\n      }\n      return parsePlatform(rows[0]);\n    },\n    async delete(id: number) {\n      const { rows } = await driver.query(\n        `DELETE FROM Platform WHERE id = ? RETURNING ${returningColumns}`,\n        [id],\n      );\n      if (rows.length === 0) {\n        return null;\n      }\n      return parsePlatform(rows[0]);\n    },\n  };\n};\n","import type { DbDriver, QueryParameter } from \"../drivers/driver\";\nimport { runPaginatedQuery } from \"../utils/pagination\";\nimport type { PaginatedResult, PaginationOptions } from \"../types/pagination\";\nimport {\n  NewQuestionSchema,\n  UpdateQuestionSchema,\n  normalizeQuestion,\n  type NewQuestion,\n  type Question,\n  type UpdateQuestion,\n} from \"../types/quiz\";\n\nexport interface QuestionListOptions extends PaginationOptions {\n  platformId?: number;\n  subjectId?: number | null;\n  topicId?: number | null;\n  roadmapId?: number | null;\n  level?: Question[\"level\"];\n  isActive?: boolean;\n}\n\nexport interface QuestionsRepo {\n  listByPlatform(platformId: number): Promise<Question[]>;\n  listBySubject(subjectId: number): Promise<Question[]>;\n  listByTopic(topicId: number): Promise<Question[]>;\n  listByRoadmap(roadmapId: number): Promise<Question[]>;\n  listPaginated(options?: QuestionListOptions): Promise<PaginatedResult<Question>>;\n  getById(id: number): Promise<Question | null>;\n  getRandomByPlatform(platformId: number, limit?: number): Promise<Question[]>;\n  create(input: NewQuestion): Promise<Question>;\n  update(id: number, input: UpdateQuestion): Promise<Question | null>;\n  delete(id: number): Promise<Question | null>;\n}\n\nconst returningColumns =\n  \"id, platformId, subjectId, topicId, roadmapId, q, o, a, e, l, isActive\";\nconst selectClause = `SELECT ${returningColumns} FROM Question`;\n\nexport const createQuestionsRepo = (driver: DbDriver): QuestionsRepo => {\n  const getSingle = async (id: number): Promise<Question | null> => {\n    const { rows } = await driver.query(`${selectClause} WHERE id = ? LIMIT 1`, [id]);\n    if (rows.length === 0) {\n      return null;\n    }\n    return normalizeQuestion(rows[0]);\n  };\n\n  return {\n    async listByPlatform(platformId: number) {\n      const { rows } = await driver.query(\n        `${selectClause} WHERE platformId = ? ORDER BY id ASC`,\n        [platformId],\n      );\n      return rows.map((row) => normalizeQuestion(row));\n    },\n    async listBySubject(subjectId: number) {\n      const { rows } = await driver.query(\n        `${selectClause} WHERE subjectId = ? ORDER BY id ASC`,\n        [subjectId],\n      );\n      return rows.map((row) => normalizeQuestion(row));\n    },\n    async listByTopic(topicId: number) {\n      const { rows } = await driver.query(\n        `${selectClause} WHERE topicId = ? ORDER BY id ASC`,\n        [topicId],\n      );\n      return rows.map((row) => normalizeQuestion(row));\n    },\n    async listByRoadmap(roadmapId: number) {\n      const { rows } = await driver.query(\n        `${selectClause} WHERE roadmapId = ? ORDER BY id ASC`,\n        [roadmapId],\n      );\n      return rows.map((row) => normalizeQuestion(row));\n    },\n    async listPaginated(options: QuestionListOptions = {}) {\n      const conditions: string[] = [];\n      const params: QueryParameter[] = [];\n\n      if (options.platformId !== undefined) {\n        conditions.push(\"platformId = ?\");\n        params.push(options.platformId);\n      }\n      if (options.subjectId !== undefined) {\n        if (options.subjectId === null) {\n          conditions.push(\"subjectId IS NULL\");\n        } else {\n          conditions.push(\"subjectId = ?\");\n          params.push(options.subjectId);\n        }\n      }\n      if (options.topicId !== undefined) {\n        if (options.topicId === null) {\n          conditions.push(\"topicId IS NULL\");\n        } else {\n          conditions.push(\"topicId = ?\");\n          params.push(options.topicId);\n        }\n      }\n      if (options.roadmapId !== undefined) {\n        if (options.roadmapId === null) {\n          conditions.push(\"roadmapId IS NULL\");\n        } else {\n          conditions.push(\"roadmapId = ?\");\n          params.push(options.roadmapId);\n        }\n      }\n      if (options.level !== undefined) {\n        conditions.push(\"l = ?\");\n        params.push(options.level);\n      }\n      if (options.isActive !== undefined) {\n        conditions.push(\"isActive = ?\");\n        params.push(options.isActive ? 1 : 0);\n      }\n\n      const whereClause = conditions.length > 0 ? ` WHERE ${conditions.join(\" AND \")}` : \"\";\n\n      return runPaginatedQuery({\n        driver,\n        countQuery: `SELECT COUNT(*) as total FROM Question${whereClause}`,\n        dataQuery: `${selectClause}${whereClause} ORDER BY id ASC LIMIT ? OFFSET ?`,\n        params,\n        mapRow: normalizeQuestion,\n        page: options.page,\n        pageSize: options.pageSize,\n      });\n    },\n    async getById(id: number) {\n      return getSingle(id);\n    },\n    async getRandomByPlatform(platformId: number, limit = 1) {\n      const { rows } = await driver.query(\n        `${selectClause} WHERE platformId = ? ORDER BY RANDOM() LIMIT ?`,\n        [platformId, limit],\n      );\n\n      return rows.map((row) => normalizeQuestion(row));\n    },\n    async create(input: NewQuestion) {\n      const data = NewQuestionSchema.parse(input);\n      const { rows } = await driver.query(\n        `INSERT INTO Question (platformId, subjectId, topicId, roadmapId, q, o, a, e, l, isActive)\n         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n         RETURNING ${returningColumns}`,\n        [\n          data.platformId,\n          data.subjectId ?? null,\n          data.topicId ?? null,\n          data.roadmapId ?? null,\n          data.question,\n          JSON.stringify(data.options ?? []),\n          data.answer,\n          data.explanation ?? null,\n          data.level,\n          data.isActive ? 1 : 0,\n        ],\n      );\n      if (rows.length === 0) {\n        throw new Error(\"Failed to insert question record\");\n      }\n      return normalizeQuestion(rows[0]);\n    },\n    async update(id: number, input: UpdateQuestion) {\n      const data = UpdateQuestionSchema.parse(input ?? {});\n      const setClauses: string[] = [];\n      const params: QueryParameter[] = [];\n\n      if (data.platformId !== undefined) {\n        setClauses.push(\"platformId = ?\");\n        params.push(data.platformId);\n      }\n      if (data.subjectId !== undefined) {\n        setClauses.push(\"subjectId = ?\");\n        params.push(data.subjectId ?? null);\n      }\n      if (data.topicId !== undefined) {\n        setClauses.push(\"topicId = ?\");\n        params.push(data.topicId ?? null);\n      }\n      if (data.roadmapId !== undefined) {\n        setClauses.push(\"roadmapId = ?\");\n        params.push(data.roadmapId ?? null);\n      }\n      if (data.question !== undefined) {\n        setClauses.push(\"q = ?\");\n        params.push(data.question);\n      }\n      if (data.options !== undefined) {\n        setClauses.push(\"o = ?\");\n        params.push(JSON.stringify(data.options));\n      }\n      if (data.answer !== undefined) {\n        setClauses.push(\"a = ?\");\n        params.push(data.answer);\n      }\n      if (data.explanation !== undefined) {\n        setClauses.push(\"e = ?\");\n        params.push(data.explanation ?? null);\n      }\n      if (data.level !== undefined) {\n        setClauses.push(\"l = ?\");\n        params.push(data.level);\n      }\n      if (data.isActive !== undefined) {\n        setClauses.push(\"isActive = ?\");\n        params.push(data.isActive ? 1 : 0);\n      }\n\n      if (setClauses.length === 0) {\n        return getSingle(id);\n      }\n\n      const { rows } = await driver.query(\n        `UPDATE Question SET ${setClauses.join(\", \")} WHERE id = ? RETURNING ${returningColumns}`,\n        [...params, id],\n      );\n      if (rows.length === 0) {\n        return null;\n      }\n      return normalizeQuestion(rows[0]);\n    },\n    async delete(id: number) {\n      const { rows } = await driver.query(\n        `DELETE FROM Question WHERE id = ? RETURNING ${returningColumns}`,\n        [id],\n      );\n      if (rows.length === 0) {\n        return null;\n      }\n      return normalizeQuestion(rows[0]);\n    },\n  };\n};\n","import type { DbDriver } from \"../drivers/driver\";\n\nconst coerceIdValue = (value: unknown): number => {\n  if (typeof value === \"number\" && Number.isFinite(value)) {\n    return Math.max(1, Math.trunc(value));\n  }\n  if (typeof value === \"string\" && value.trim().length > 0) {\n    const parsed = Number.parseInt(value, 10);\n    if (!Number.isNaN(parsed)) {\n      return Math.max(1, parsed);\n    }\n  }\n  return 1;\n};\n\nexport const getNextNumericId = async (driver: DbDriver, tableName: string): Promise<number> => {\n  const { rows } = await driver.query<{ nextId: number | string | null }>(\n    `SELECT COALESCE(MAX(id), 0) + 1 as nextId FROM ${tableName}`,\n  );\n\n  const raw = rows[0]?.nextId ?? 1;\n  return coerceIdValue(raw);\n};\n","import type { DbDriver, QueryParameter } from \"../drivers/driver\";\nimport { runPaginatedQuery } from \"../utils/pagination\";\nimport { getNextNumericId } from \"../utils/ids\";\nimport type { PaginatedResult, PaginationOptions } from \"../types/pagination\";\nimport {\n  NewSubjectSchema,\n  UpdateSubjectSchema,\n  type NewSubject,\n  type UpdateSubject,\n  parseSubject,\n  type Subject,\n} from \"../types/quiz\";\n\nexport interface SubjectListOptions extends PaginationOptions {\n  platformId?: number;\n}\n\nexport interface SubjectsRepo {\n  list(): Promise<Subject[]>;\n  listByPlatform(platformId: number): Promise<Subject[]>;\n  listPaginated(options?: SubjectListOptions): Promise<PaginatedResult<Subject>>;\n  getById(id: number): Promise<Subject | null>;\n  create(input: NewSubject): Promise<Subject>;\n  update(id: number, input: UpdateSubject): Promise<Subject | null>;\n  delete(id: number): Promise<Subject | null>;\n}\n\nconst returningColumns = \"id, platformId, name, isActive, qCount\";\nconst selectClause = `SELECT ${returningColumns} FROM Subject`;\n\nexport const createSubjectsRepo = (driver: DbDriver): SubjectsRepo => {\n  const getSingle = async (id: number): Promise<Subject | null> => {\n    const { rows } = await driver.query(`${selectClause} WHERE id = ? LIMIT 1`, [id]);\n    if (rows.length === 0) {\n      return null;\n    }\n    return parseSubject(rows[0]);\n  };\n\n  return {\n    async list() {\n      const { rows } = await driver.query(`${selectClause} ORDER BY name ASC`);\n      return rows.map((row) => parseSubject(row));\n    },\n    async listByPlatform(platformId: number) {\n      const { rows } = await driver.query(\n        `${selectClause} WHERE platformId = ? ORDER BY name ASC`,\n        [platformId],\n      );\n      return rows.map((row) => parseSubject(row));\n    },\n    async listPaginated(options: SubjectListOptions = {}) {\n      const conditions: string[] = [];\n      const params: QueryParameter[] = [];\n\n      if (options.platformId !== undefined) {\n        conditions.push(\"platformId = ?\");\n        params.push(options.platformId);\n      }\n\n      const whereClause = conditions.length > 0 ? ` WHERE ${conditions.join(\" AND \")}` : \"\";\n\n      return runPaginatedQuery({\n        driver,\n        countQuery: `SELECT COUNT(*) as total FROM Subject${whereClause}`,\n        dataQuery: `${selectClause}${whereClause} ORDER BY name ASC LIMIT ? OFFSET ?`,\n        params,\n        mapRow: parseSubject,\n        page: options.page,\n        pageSize: options.pageSize,\n      });\n    },\n    async getById(id: number) {\n      return getSingle(id);\n    },\n    async create(input: NewSubject) {\n      const data = NewSubjectSchema.parse(input);\n      const id = data.id ?? (await getNextNumericId(driver, \"Subject\"));\n      const { rows } = await driver.query(\n        `INSERT INTO Subject (id, platformId, name, isActive, qCount)\n         VALUES (?, ?, ?, ?, ?)\n         RETURNING ${returningColumns}`,\n        [id, data.platformId, data.name, data.isActive ? 1 : 0, data.qCount],\n      );\n      if (rows.length === 0) {\n        throw new Error(\"Failed to insert subject record\");\n      }\n      return parseSubject(rows[0]);\n    },\n    async update(id: number, input: UpdateSubject) {\n      const data = UpdateSubjectSchema.parse(input ?? {});\n      const setClauses: string[] = [];\n      const params: QueryParameter[] = [];\n\n      if (data.platformId !== undefined) {\n        setClauses.push(\"platformId = ?\");\n        params.push(data.platformId);\n      }\n      if (data.name !== undefined) {\n        setClauses.push(\"name = ?\");\n        params.push(data.name);\n      }\n      if (data.isActive !== undefined) {\n        setClauses.push(\"isActive = ?\");\n        params.push(data.isActive ? 1 : 0);\n      }\n      if (data.qCount !== undefined) {\n        setClauses.push(\"qCount = ?\");\n        params.push(data.qCount);\n      }\n\n      if (setClauses.length === 0) {\n        return getSingle(id);\n      }\n\n      const { rows } = await driver.query(\n        `UPDATE Subject SET ${setClauses.join(\", \")} WHERE id = ? RETURNING ${returningColumns}`,\n        [...params, id],\n      );\n      if (rows.length === 0) {\n        return null;\n      }\n      return parseSubject(rows[0]);\n    },\n    async delete(id: number) {\n      const { rows } = await driver.query(\n        `DELETE FROM Subject WHERE id = ? RETURNING ${returningColumns}`,\n        [id],\n      );\n      if (rows.length === 0) {\n        return null;\n      }\n      return parseSubject(rows[0]);\n    },\n  };\n};\n","import type { DbDriver, QueryParameter } from \"../drivers/driver\";\nimport { runPaginatedQuery } from \"../utils/pagination\";\nimport { getNextNumericId } from \"../utils/ids\";\nimport type { PaginatedResult, PaginationOptions } from \"../types/pagination\";\nimport {\n  NewTopicSchema,\n  UpdateTopicSchema,\n  type NewTopic,\n  type UpdateTopic,\n  parseTopic,\n  type Topic,\n} from \"../types/quiz\";\n\nexport interface TopicListOptions extends PaginationOptions {\n  platformId?: number;\n  subjectId?: number;\n}\n\nexport interface TopicsRepo {\n  list(): Promise<Topic[]>;\n  listByPlatform(platformId: number): Promise<Topic[]>;\n  listBySubject(subjectId: number): Promise<Topic[]>;\n  listPaginated(options?: TopicListOptions): Promise<PaginatedResult<Topic>>;\n  getById(id: number): Promise<Topic | null>;\n  create(input: NewTopic): Promise<Topic>;\n  update(id: number, input: UpdateTopic): Promise<Topic | null>;\n  delete(id: number): Promise<Topic | null>;\n}\n\nconst returningColumns = \"id, platformId, subjectId, name, isActive, qCount\";\nconst selectClause = `SELECT ${returningColumns} FROM Topic`;\n\nexport const createTopicsRepo = (driver: DbDriver): TopicsRepo => {\n  const getSingle = async (id: number): Promise<Topic | null> => {\n    const { rows } = await driver.query(`${selectClause} WHERE id = ? LIMIT 1`, [id]);\n    if (rows.length === 0) {\n      return null;\n    }\n    return parseTopic(rows[0]);\n  };\n\n  return {\n    async list() {\n      const { rows } = await driver.query(`${selectClause} ORDER BY name ASC`);\n      return rows.map((row) => parseTopic(row));\n    },\n    async listByPlatform(platformId: number) {\n      const { rows } = await driver.query(\n        `${selectClause} WHERE platformId = ? ORDER BY name ASC`,\n        [platformId],\n      );\n      return rows.map((row) => parseTopic(row));\n    },\n    async listBySubject(subjectId: number) {\n      const { rows } = await driver.query(\n        `${selectClause} WHERE subjectId = ? ORDER BY name ASC`,\n        [subjectId],\n      );\n      return rows.map((row) => parseTopic(row));\n    },\n    async listPaginated(options: TopicListOptions = {}) {\n      const conditions: string[] = [];\n      const params: QueryParameter[] = [];\n\n      if (options.platformId !== undefined) {\n        conditions.push(\"platformId = ?\");\n        params.push(options.platformId);\n      }\n      if (options.subjectId !== undefined) {\n        conditions.push(\"subjectId = ?\");\n        params.push(options.subjectId);\n      }\n\n      const whereClause = conditions.length > 0 ? ` WHERE ${conditions.join(\" AND \")}` : \"\";\n\n      return runPaginatedQuery({\n        driver,\n        countQuery: `SELECT COUNT(*) as total FROM Topic${whereClause}`,\n        dataQuery: `${selectClause}${whereClause} ORDER BY name ASC LIMIT ? OFFSET ?`,\n        params,\n        mapRow: parseTopic,\n        page: options.page,\n        pageSize: options.pageSize,\n      });\n    },\n    async getById(id: number) {\n      return getSingle(id);\n    },\n    async create(input: NewTopic) {\n      const data = NewTopicSchema.parse(input);\n      const id = data.id ?? (await getNextNumericId(driver, \"Topic\"));\n      const { rows } = await driver.query(\n        `INSERT INTO Topic (id, platformId, subjectId, name, isActive, qCount)\n         VALUES (?, ?, ?, ?, ?, ?)\n         RETURNING ${returningColumns}`,\n        [id, data.platformId, data.subjectId, data.name, data.isActive ? 1 : 0, data.qCount],\n      );\n      if (rows.length === 0) {\n        throw new Error(\"Failed to insert topic record\");\n      }\n      return parseTopic(rows[0]);\n    },\n    async update(id: number, input: UpdateTopic) {\n      const data = UpdateTopicSchema.parse(input ?? {});\n      const setClauses: string[] = [];\n      const params: QueryParameter[] = [];\n\n      if (data.platformId !== undefined) {\n        setClauses.push(\"platformId = ?\");\n        params.push(data.platformId);\n      }\n      if (data.subjectId !== undefined) {\n        setClauses.push(\"subjectId = ?\");\n        params.push(data.subjectId);\n      }\n      if (data.name !== undefined) {\n        setClauses.push(\"name = ?\");\n        params.push(data.name);\n      }\n      if (data.isActive !== undefined) {\n        setClauses.push(\"isActive = ?\");\n        params.push(data.isActive ? 1 : 0);\n      }\n      if (data.qCount !== undefined) {\n        setClauses.push(\"qCount = ?\");\n        params.push(data.qCount);\n      }\n\n      if (setClauses.length === 0) {\n        return getSingle(id);\n      }\n\n      const { rows } = await driver.query(\n        `UPDATE Topic SET ${setClauses.join(\", \")} WHERE id = ? RETURNING ${returningColumns}`,\n        [...params, id],\n      );\n      if (rows.length === 0) {\n        return null;\n      }\n      return parseTopic(rows[0]);\n    },\n    async delete(id: number) {\n      const { rows } = await driver.query(\n        `DELETE FROM Topic WHERE id = ? RETURNING ${returningColumns}`,\n        [id],\n      );\n      if (rows.length === 0) {\n        return null;\n      }\n      return parseTopic(rows[0]);\n    },\n  };\n};\n","import type { DbDriver, QueryParameter } from \"../drivers/driver\";\nimport { runPaginatedQuery } from \"../utils/pagination\";\nimport { getNextNumericId } from \"../utils/ids\";\nimport type { PaginatedResult, PaginationOptions } from \"../types/pagination\";\nimport {\n  NewRoadmapSchema,\n  UpdateRoadmapSchema,\n  type NewRoadmap,\n  type UpdateRoadmap,\n  parseRoadmap,\n  type Roadmap,\n} from \"../types/quiz\";\n\nexport interface RoadmapListOptions extends PaginationOptions {\n  platformId?: number;\n  subjectId?: number;\n  topicId?: number;\n}\n\nexport interface RoadmapsRepo {\n  list(): Promise<Roadmap[]>;\n  listByPlatform(platformId: number): Promise<Roadmap[]>;\n  listBySubject(subjectId: number): Promise<Roadmap[]>;\n  listByTopic(topicId: number): Promise<Roadmap[]>;\n  listPaginated(options?: RoadmapListOptions): Promise<PaginatedResult<Roadmap>>;\n  getById(id: number): Promise<Roadmap | null>;\n  create(input: NewRoadmap): Promise<Roadmap>;\n  update(id: number, input: UpdateRoadmap): Promise<Roadmap | null>;\n  delete(id: number): Promise<Roadmap | null>;\n}\n\nconst returningColumns = \"id, platformId, subjectId, topicId, name, isActive, qCount\";\nconst selectClause = `SELECT ${returningColumns} FROM Roadmap`;\n\nexport const createRoadmapsRepo = (driver: DbDriver): RoadmapsRepo => {\n  const getSingle = async (id: number): Promise<Roadmap | null> => {\n    const { rows } = await driver.query(`${selectClause} WHERE id = ? LIMIT 1`, [id]);\n    if (rows.length === 0) {\n      return null;\n    }\n    return parseRoadmap(rows[0]);\n  };\n\n  return {\n    async list() {\n      const { rows } = await driver.query(`${selectClause} ORDER BY name ASC`);\n      return rows.map((row) => parseRoadmap(row));\n    },\n    async listByPlatform(platformId: number) {\n      const { rows } = await driver.query(\n        `${selectClause} WHERE platformId = ? ORDER BY name ASC`,\n        [platformId],\n      );\n      return rows.map((row) => parseRoadmap(row));\n    },\n    async listBySubject(subjectId: number) {\n      const { rows } = await driver.query(\n        `${selectClause} WHERE subjectId = ? ORDER BY name ASC`,\n        [subjectId],\n      );\n      return rows.map((row) => parseRoadmap(row));\n    },\n    async listByTopic(topicId: number) {\n      const { rows } = await driver.query(\n        `${selectClause} WHERE topicId = ? ORDER BY name ASC`,\n        [topicId],\n      );\n      return rows.map((row) => parseRoadmap(row));\n    },\n    async listPaginated(options: RoadmapListOptions = {}) {\n      const conditions: string[] = [];\n      const params: QueryParameter[] = [];\n\n      if (options.platformId !== undefined) {\n        conditions.push(\"platformId = ?\");\n        params.push(options.platformId);\n      }\n      if (options.subjectId !== undefined) {\n        conditions.push(\"subjectId = ?\");\n        params.push(options.subjectId);\n      }\n      if (options.topicId !== undefined) {\n        conditions.push(\"topicId = ?\");\n        params.push(options.topicId);\n      }\n\n      const whereClause = conditions.length > 0 ? ` WHERE ${conditions.join(\" AND \")}` : \"\";\n\n      return runPaginatedQuery({\n        driver,\n        countQuery: `SELECT COUNT(*) as total FROM Roadmap${whereClause}`,\n        dataQuery: `${selectClause}${whereClause} ORDER BY name ASC LIMIT ? OFFSET ?`,\n        params,\n        mapRow: parseRoadmap,\n        page: options.page,\n        pageSize: options.pageSize,\n      });\n    },\n    async getById(id: number) {\n      return getSingle(id);\n    },\n    async create(input: NewRoadmap) {\n      const data = NewRoadmapSchema.parse(input);\n      const id = data.id ?? (await getNextNumericId(driver, \"Roadmap\"));\n      const { rows } = await driver.query(\n        `INSERT INTO Roadmap (id, platformId, subjectId, topicId, name, isActive, qCount)\n         VALUES (?, ?, ?, ?, ?, ?, ?)\n         RETURNING ${returningColumns}`,\n        [\n          id,\n          data.platformId,\n          data.subjectId,\n          data.topicId,\n          data.name,\n          data.isActive ? 1 : 0,\n          data.qCount,\n        ],\n      );\n      if (rows.length === 0) {\n        throw new Error(\"Failed to insert roadmap record\");\n      }\n      return parseRoadmap(rows[0]);\n    },\n    async update(id: number, input: UpdateRoadmap) {\n      const data = UpdateRoadmapSchema.parse(input ?? {});\n      const setClauses: string[] = [];\n      const params: QueryParameter[] = [];\n\n      if (data.platformId !== undefined) {\n        setClauses.push(\"platformId = ?\");\n        params.push(data.platformId);\n      }\n      if (data.subjectId !== undefined) {\n        setClauses.push(\"subjectId = ?\");\n        params.push(data.subjectId);\n      }\n      if (data.topicId !== undefined) {\n        setClauses.push(\"topicId = ?\");\n        params.push(data.topicId);\n      }\n      if (data.name !== undefined) {\n        setClauses.push(\"name = ?\");\n        params.push(data.name);\n      }\n      if (data.isActive !== undefined) {\n        setClauses.push(\"isActive = ?\");\n        params.push(data.isActive ? 1 : 0);\n      }\n      if (data.qCount !== undefined) {\n        setClauses.push(\"qCount = ?\");\n        params.push(data.qCount);\n      }\n\n      if (setClauses.length === 0) {\n        return getSingle(id);\n      }\n\n      const { rows } = await driver.query(\n        `UPDATE Roadmap SET ${setClauses.join(\", \")} WHERE id = ? RETURNING ${returningColumns}`,\n        [...params, id],\n      );\n      if (rows.length === 0) {\n        return null;\n      }\n      return parseRoadmap(rows[0]);\n    },\n    async delete(id: number) {\n      const { rows } = await driver.query(\n        `DELETE FROM Roadmap WHERE id = ? RETURNING ${returningColumns}`,\n        [id],\n      );\n      if (rows.length === 0) {\n        return null;\n      }\n      return parseRoadmap(rows[0]);\n    },\n  };\n};\n","import type { DbDriver, QueryParameter } from \"../drivers/driver\";\nimport { runPaginatedQuery } from \"../utils/pagination\";\nimport type { PaginatedResult, PaginationOptions } from \"../types/pagination\";\nimport {\n  NewResultSchema,\n  UpdateResultSchema,\n  type NewResult,\n  type UpdateResult,\n  parseResult,\n  type Result,\n} from \"../types/quiz\";\n\nexport interface ResultListOptions extends PaginationOptions {\n  userId?: string;\n  platformId?: number;\n  subjectId?: number | null;\n  topicId?: number | null;\n  roadmapId?: number | null;\n  level?: Result[\"level\"];\n}\n\nexport interface ResultsRepo {\n  list(): Promise<Result[]>;\n  listByUser(userId: string): Promise<Result[]>;\n  listByPlatform(platformId: number): Promise<Result[]>;\n  listPaginated(options?: ResultListOptions): Promise<PaginatedResult<Result>>;\n  getById(id: number): Promise<Result | null>;\n  create(input: NewResult): Promise<Result>;\n  update(id: number, input: UpdateResult): Promise<Result | null>;\n  delete(id: number): Promise<Result | null>;\n}\n\nconst returningColumns =\n  \"id, userId, platformId, subjectId, topicId, roadmapId, level, responses, mark, createdAt\";\nconst baseSelect = `SELECT ${returningColumns} FROM Result`;\n\nexport const createResultsRepo = (driver: DbDriver): ResultsRepo => {\n  const getSingle = async (id: number): Promise<Result | null> => {\n    const { rows } = await driver.query(`${baseSelect} WHERE id = ? LIMIT 1`, [id]);\n    if (rows.length === 0) {\n      return null;\n    }\n    return parseResult(rows[0]);\n  };\n\n  return {\n    async list() {\n      const { rows } = await driver.query(`${baseSelect} ORDER BY createdAt DESC, id DESC`);\n      return rows.map((row) => parseResult(row));\n    },\n    async listByUser(userId: string) {\n      const { rows } = await driver.query(\n        `${baseSelect} WHERE userId = ? ORDER BY createdAt DESC, id DESC`,\n        [userId],\n      );\n      return rows.map((row) => parseResult(row));\n    },\n    async listByPlatform(platformId: number) {\n      const { rows } = await driver.query(\n        `${baseSelect} WHERE platformId = ? ORDER BY createdAt DESC, id DESC`,\n        [platformId],\n      );\n      return rows.map((row) => parseResult(row));\n    },\n    async listPaginated(options: ResultListOptions = {}) {\n      const conditions: string[] = [];\n      const params: QueryParameter[] = [];\n\n      if (options.userId !== undefined) {\n        conditions.push(\"userId = ?\");\n        params.push(options.userId);\n      }\n      if (options.platformId !== undefined) {\n        conditions.push(\"platformId = ?\");\n        params.push(options.platformId);\n      }\n      if (options.subjectId !== undefined) {\n        if (options.subjectId === null) {\n          conditions.push(\"subjectId IS NULL\");\n        } else {\n          conditions.push(\"subjectId = ?\");\n          params.push(options.subjectId);\n        }\n      }\n      if (options.topicId !== undefined) {\n        if (options.topicId === null) {\n          conditions.push(\"topicId IS NULL\");\n        } else {\n          conditions.push(\"topicId = ?\");\n          params.push(options.topicId);\n        }\n      }\n      if (options.roadmapId !== undefined) {\n        if (options.roadmapId === null) {\n          conditions.push(\"roadmapId IS NULL\");\n        } else {\n          conditions.push(\"roadmapId = ?\");\n          params.push(options.roadmapId);\n        }\n      }\n      if (options.level !== undefined) {\n        conditions.push(\"level = ?\");\n        params.push(options.level);\n      }\n\n      const whereClause = conditions.length > 0 ? ` WHERE ${conditions.join(\" AND \")}` : \"\";\n\n      return runPaginatedQuery({\n        driver,\n        countQuery: `SELECT COUNT(*) as total FROM Result${whereClause}`,\n        dataQuery: `${baseSelect}${whereClause} ORDER BY createdAt DESC, id DESC LIMIT ? OFFSET ?`,\n        params,\n        mapRow: parseResult,\n        page: options.page,\n        pageSize: options.pageSize,\n      });\n    },\n    async getById(id: number) {\n      return getSingle(id);\n    },\n    async create(input: NewResult) {\n      const data = NewResultSchema.parse(input);\n      const { rows } = await driver.query(\n        `INSERT INTO Result (userId, platformId, subjectId, topicId, roadmapId, level, responses, mark)\n         VALUES (?, ?, ?, ?, ?, ?, ?, ?)\n         RETURNING ${returningColumns}`,\n        [\n          data.userId,\n          data.platformId,\n          data.subjectId ?? null,\n          data.topicId ?? null,\n          data.roadmapId ?? null,\n          data.level,\n          data.responses !== undefined ? JSON.stringify(data.responses) : null,\n          data.mark,\n        ],\n      );\n      if (rows.length === 0) {\n        throw new Error(\"Failed to insert result record\");\n      }\n      return parseResult(rows[0]);\n    },\n    async update(id: number, input: UpdateResult) {\n      const data = UpdateResultSchema.parse(input ?? {});\n      const setClauses: string[] = [];\n      const params: QueryParameter[] = [];\n\n      if (data.userId !== undefined) {\n        setClauses.push(\"userId = ?\");\n        params.push(data.userId);\n      }\n      if (data.platformId !== undefined) {\n        setClauses.push(\"platformId = ?\");\n        params.push(data.platformId);\n      }\n      if (data.subjectId !== undefined) {\n        setClauses.push(\"subjectId = ?\");\n        params.push(data.subjectId ?? null);\n      }\n      if (data.topicId !== undefined) {\n        setClauses.push(\"topicId = ?\");\n        params.push(data.topicId ?? null);\n      }\n      if (data.roadmapId !== undefined) {\n        setClauses.push(\"roadmapId = ?\");\n        params.push(data.roadmapId ?? null);\n      }\n      if (data.level !== undefined) {\n        setClauses.push(\"level = ?\");\n        params.push(data.level);\n      }\n      if (data.responses !== undefined) {\n        setClauses.push(\"responses = ?\");\n        params.push(data.responses !== undefined ? JSON.stringify(data.responses) : null);\n      }\n      if (data.mark !== undefined) {\n        setClauses.push(\"mark = ?\");\n        params.push(data.mark);\n      }\n\n      if (setClauses.length === 0) {\n        return getSingle(id);\n      }\n\n      const { rows } = await driver.query(\n        `UPDATE Result SET ${setClauses.join(\", \")} WHERE id = ? RETURNING ${returningColumns}`,\n        [...params, id],\n      );\n      if (rows.length === 0) {\n        return null;\n      }\n      return parseResult(rows[0]);\n    },\n    async delete(id: number) {\n      const { rows } = await driver.query(\n        `DELETE FROM Result WHERE id = ? RETURNING ${returningColumns}`,\n        [id],\n      );\n      if (rows.length === 0) {\n        return null;\n      }\n      return parseResult(rows[0]);\n    },\n  };\n};\n","import type { DbDriver, QueryParameter } from \"../drivers/driver\";\nimport type { PaginatedResult, PaginationOptions } from \"../types/pagination\";\nimport {\n  parsePlatform,\n  parseSubject,\n  parseTopic,\n  parseRoadmap,\n  normalizeQuestion,\n  type Platform,\n  type Subject,\n  type Topic,\n  type Roadmap,\n  type Question,\n} from \"../types/quiz\";\nimport { runPaginatedQuery } from \"../utils/pagination\";\n\nexport type SortDirection = \"asc\" | \"desc\";\nexport type StatusFilter = \"all\" | \"active\" | \"inactive\";\n\nconst normalizeSearchTerm = (value?: string | null): string | null => {\n  if (typeof value !== \"string\") {\n    return null;\n  }\n  const normalized = value.trim();\n  return normalized.length > 0 ? normalized : null;\n};\n\nconst appendWhereClause = (conditions: string[]): string =>\n  conditions.length > 0 ? ` WHERE ${conditions.join(\" AND \")}` : \"\";\n\nconst buildOrderClause = (\n  columnMap: Record<string, string>,\n  column: string | undefined,\n  direction: SortDirection | undefined,\n  fallback: string,\n): string => {\n  const normalizedDirection = direction === \"desc\" ? \"DESC\" : \"ASC\";\n  const normalizedColumn = column ? columnMap[column] ?? fallback : fallback;\n  const secondaryOrder = normalizedColumn === fallback ? \"\" : `, ${fallback}`;\n  return ` ORDER BY ${normalizedColumn} ${normalizedDirection}${secondaryOrder}`;\n};\n\nexport interface PlatformSearchOptions extends PaginationOptions {\n  name?: string | null;\n  description?: string | null;\n  type?: string | null;\n  minQuestions?: number | null;\n  maxQuestions?: number | null;\n  status?: StatusFilter;\n  sortColumn?: \"id\" | \"name\" | \"description\" | \"type\" | \"qCount\" | \"status\";\n  sortDirection?: SortDirection;\n}\n\nexport interface SubjectSearchOptions extends PaginationOptions {\n  name?: string | null;\n  platformId?: number | null;\n  minQuestions?: number | null;\n  maxQuestions?: number | null;\n  status?: StatusFilter;\n  sortColumn?: \"id\" | \"name\" | \"platformName\" | \"platformId\" | \"qCount\" | \"status\";\n  sortDirection?: SortDirection;\n}\n\nexport interface TopicSearchOptions extends PaginationOptions {\n  name?: string | null;\n  platformId?: number | null;\n  subjectId?: number | null;\n  minQuestions?: number | null;\n  maxQuestions?: number | null;\n  status?: StatusFilter;\n  sortColumn?:\n    | \"id\"\n    | \"name\"\n    | \"platformName\"\n    | \"subjectName\"\n    | \"platformId\"\n    | \"subjectId\"\n    | \"qCount\"\n    | \"status\";\n  sortDirection?: SortDirection;\n}\n\nexport interface RoadmapSearchOptions extends PaginationOptions {\n  name?: string | null;\n  platformId?: number | null;\n  subjectId?: number | null;\n  topicId?: number | null;\n  minQuestions?: number | null;\n  maxQuestions?: number | null;\n  status?: StatusFilter;\n  sortColumn?:\n    | \"id\"\n    | \"name\"\n    | \"platformName\"\n    | \"subjectName\"\n    | \"topicName\"\n    | \"platformId\"\n    | \"subjectId\"\n    | \"topicId\"\n    | \"qCount\"\n    | \"status\";\n  sortDirection?: SortDirection;\n}\n\nexport interface QuestionSearchOptions extends PaginationOptions {\n  questionText?: string | null;\n  platformId?: number | null;\n  subjectId?: number | null;\n  topicId?: number | null;\n  roadmapId?: number | null;\n  level?: string | null;\n  status?: StatusFilter;\n  sortColumn?:\n    | \"id\"\n    | \"questionText\"\n    | \"platformName\"\n    | \"subjectName\"\n    | \"topicName\"\n    | \"roadmapName\"\n    | \"platformId\"\n    | \"subjectId\"\n    | \"topicId\"\n    | \"roadmapId\"\n    | \"level\"\n    | \"status\";\n  sortDirection?: SortDirection;\n}\n\nexport interface QuestionRelations {\n  question: Question;\n  platformName: string | null;\n  subjectName: string | null;\n  topicName: string | null;\n  roadmapName: string | null;\n}\n\nexport interface SubjectWithPlatform {\n  subject: Subject;\n  platformName: string | null;\n}\n\nexport interface TopicWithRelations {\n  topic: Topic;\n  platformName: string | null;\n  subjectName: string | null;\n}\n\nexport interface RoadmapWithRelations {\n  roadmap: Roadmap;\n  platformName: string | null;\n  subjectName: string | null;\n  topicName: string | null;\n}\n\nexport interface RandomQuestionOptions {\n  limit?: number;\n  filters?: Omit<QuestionSearchOptions, \"page\" | \"pageSize\" | \"sortColumn\" | \"sortDirection\">;\n  excludeIds?: number[];\n}\n\nexport interface QuizAdminRepo {\n  searchPlatforms(options?: PlatformSearchOptions): Promise<PaginatedResult<Platform>>;\n  searchSubjects(options?: SubjectSearchOptions): Promise<PaginatedResult<SubjectWithPlatform>>;\n  getSubjectDetails(id: number): Promise<SubjectWithPlatform | null>;\n  searchTopics(options?: TopicSearchOptions): Promise<PaginatedResult<TopicWithRelations>>;\n  getTopicDetails(id: number): Promise<TopicWithRelations | null>;\n  searchRoadmaps(options?: RoadmapSearchOptions): Promise<PaginatedResult<RoadmapWithRelations>>;\n  getRoadmapDetails(id: number): Promise<RoadmapWithRelations | null>;\n  searchQuestions(options?: QuestionSearchOptions): Promise<PaginatedResult<QuestionRelations>>;\n  getQuestionDetails(id: number): Promise<QuestionRelations | null>;\n  getRandomQuestions(options?: RandomQuestionOptions): Promise<PaginatedResult<QuestionRelations>>;\n}\n\nconst mapSubjectRow = (row: Record<string, unknown>): SubjectWithPlatform => ({\n  subject: parseSubject(row),\n  platformName: typeof row.platformName === \"string\" ? row.platformName : null,\n});\n\nconst mapTopicRow = (row: Record<string, unknown>): TopicWithRelations => ({\n  topic: parseTopic(row),\n  platformName: typeof row.platformName === \"string\" ? row.platformName : null,\n  subjectName: typeof row.subjectName === \"string\" ? row.subjectName : null,\n});\n\nconst mapRoadmapRow = (row: Record<string, unknown>): RoadmapWithRelations => ({\n  roadmap: parseRoadmap(row),\n  platformName: typeof row.platformName === \"string\" ? row.platformName : null,\n  subjectName: typeof row.subjectName === \"string\" ? row.subjectName : null,\n  topicName: typeof row.topicName === \"string\" ? row.topicName : null,\n});\n\nconst mapQuestionRow = (row: Record<string, unknown>): QuestionRelations => ({\n  question: normalizeQuestion(row),\n  platformName: typeof row.platformName === \"string\" ? row.platformName : null,\n  subjectName: typeof row.subjectName === \"string\" ? row.subjectName : null,\n  topicName: typeof row.topicName === \"string\" ? row.topicName : null,\n  roadmapName: typeof row.roadmapName === \"string\" ? row.roadmapName : null,\n});\n\nconst normalizeLevel = (value?: string | null): string | null => {\n  if (typeof value !== \"string\") {\n    return null;\n  }\n  const normalized = value.trim().toUpperCase();\n  return normalized === \"E\" || normalized === \"M\" || normalized === \"D\" ? normalized : null;\n};\n\nexport const createQuizAdminRepo = (driver: DbDriver): QuizAdminRepo => {\n  const searchPlatforms = async (options: PlatformSearchOptions = {}) => {\n    const conditions: string[] = [];\n    const params: QueryParameter[] = [];\n\n    const name = normalizeSearchTerm(options.name);\n    if (name) {\n      conditions.push(\"LOWER(p.name) LIKE LOWER(?)\");\n      params.push(`%${name}%`);\n    }\n\n    const description = normalizeSearchTerm(options.description);\n    if (description) {\n      conditions.push(\"LOWER(p.description) LIKE LOWER(?)\");\n      params.push(`%${description}%`);\n    }\n\n    const type = normalizeSearchTerm(options.type);\n    if (type) {\n      conditions.push(\"LOWER(COALESCE(p.type, '')) LIKE LOWER(?)\");\n      params.push(`%${type}%`);\n    }\n\n    if (typeof options.minQuestions === \"number\" && Number.isFinite(options.minQuestions)) {\n      conditions.push(\"p.qCount >= ?\");\n      params.push(Math.max(0, Math.trunc(options.minQuestions)));\n    }\n\n    if (typeof options.maxQuestions === \"number\" && Number.isFinite(options.maxQuestions)) {\n      conditions.push(\"p.qCount <= ?\");\n      params.push(Math.max(0, Math.trunc(options.maxQuestions)));\n    }\n\n    if (options.status === \"active\") {\n      conditions.push(\"p.isActive = 1\");\n    } else if (options.status === \"inactive\") {\n      conditions.push(\"p.isActive = 0\");\n    }\n\n    const whereClause = appendWhereClause(conditions);\n    const orderClause = buildOrderClause(\n      {\n        id: \"p.id\",\n        name: \"p.name\",\n        description: \"p.description\",\n        type: \"p.type\",\n        qCount: \"p.qCount\",\n        status: \"p.isActive\",\n      },\n      options.sortColumn,\n      options.sortDirection,\n      \"p.id\",\n    );\n\n    return runPaginatedQuery({\n      driver,\n      countQuery: `SELECT COUNT(*) as total FROM Platform p${whereClause}`,\n      dataQuery: `SELECT p.id, p.name, p.description, p.icon, p.type, p.qCount, p.isActive FROM Platform p${whereClause}${orderClause} LIMIT ? OFFSET ?`,\n      params,\n      mapRow: (row) => parsePlatform(row),\n      page: options.page,\n      pageSize: options.pageSize,\n    });\n  };\n\n  const searchSubjects = async (options: SubjectSearchOptions = {}) => {\n    const conditions: string[] = [];\n    const params: QueryParameter[] = [];\n\n    const name = normalizeSearchTerm(options.name);\n    if (name) {\n      conditions.push(\"LOWER(s.name) LIKE LOWER(?)\");\n      params.push(`%${name}%`);\n    }\n\n    if (typeof options.platformId === \"number\" && Number.isFinite(options.platformId)) {\n      conditions.push(\"s.platformId = ?\");\n      params.push(Math.trunc(options.platformId));\n    }\n\n    if (typeof options.minQuestions === \"number\" && Number.isFinite(options.minQuestions)) {\n      conditions.push(\"s.qCount >= ?\");\n      params.push(Math.max(0, Math.trunc(options.minQuestions)));\n    }\n\n    if (typeof options.maxQuestions === \"number\" && Number.isFinite(options.maxQuestions)) {\n      conditions.push(\"s.qCount <= ?\");\n      params.push(Math.max(0, Math.trunc(options.maxQuestions)));\n    }\n\n    if (options.status === \"active\") {\n      conditions.push(\"s.isActive = 1\");\n    } else if (options.status === \"inactive\") {\n      conditions.push(\"s.isActive = 0\");\n    }\n\n    const whereClause = appendWhereClause(conditions);\n    const orderClause = buildOrderClause(\n      {\n        id: \"s.id\",\n        name: \"s.name\",\n        platformId: \"s.platformId\",\n        platformName: \"p.name\",\n        qCount: \"s.qCount\",\n        status: \"s.isActive\",\n      },\n      options.sortColumn,\n      options.sortDirection,\n      \"s.id\",\n    );\n\n    const baseFrom =\n      \" FROM Subject s LEFT JOIN Platform p ON s.platformId = p.id\";\n\n    return runPaginatedQuery({\n      driver,\n      countQuery: `SELECT COUNT(*) as total${baseFrom}${whereClause}`,\n      dataQuery: `SELECT s.id, s.platformId, s.name, s.isActive, s.qCount, p.name as platformName${baseFrom}${whereClause}${orderClause} LIMIT ? OFFSET ?`,\n      params,\n      mapRow: (row) => mapSubjectRow(row as Record<string, unknown>),\n      page: options.page,\n      pageSize: options.pageSize,\n    });\n  };\n\n  const getSubjectDetails = async (id: number) => {\n    const { rows } = await driver.query(\n      `SELECT s.id, s.platformId, s.name, s.isActive, s.qCount, p.name as platformName\n       FROM Subject s\n       LEFT JOIN Platform p ON s.platformId = p.id\n       WHERE s.id = ?\n       LIMIT 1`,\n      [id],\n    );\n    if (rows.length === 0) {\n      return null;\n    }\n    return mapSubjectRow(rows[0] as Record<string, unknown>);\n  };\n\n  const searchTopics = async (options: TopicSearchOptions = {}) => {\n    const conditions: string[] = [];\n    const params: QueryParameter[] = [];\n\n    const name = normalizeSearchTerm(options.name);\n    if (name) {\n      conditions.push(\"LOWER(t.name) LIKE LOWER(?)\");\n      params.push(`%${name}%`);\n    }\n\n    if (typeof options.platformId === \"number\" && Number.isFinite(options.platformId)) {\n      conditions.push(\"t.platformId = ?\");\n      params.push(Math.trunc(options.platformId));\n    }\n\n    if (typeof options.subjectId === \"number\" && Number.isFinite(options.subjectId)) {\n      conditions.push(\"t.subjectId = ?\");\n      params.push(Math.trunc(options.subjectId));\n    }\n\n    if (typeof options.minQuestions === \"number\" && Number.isFinite(options.minQuestions)) {\n      conditions.push(\"t.qCount >= ?\");\n      params.push(Math.max(0, Math.trunc(options.minQuestions)));\n    }\n\n    if (typeof options.maxQuestions === \"number\" && Number.isFinite(options.maxQuestions)) {\n      conditions.push(\"t.qCount <= ?\");\n      params.push(Math.max(0, Math.trunc(options.maxQuestions)));\n    }\n\n    if (options.status === \"active\") {\n      conditions.push(\"t.isActive = 1\");\n    } else if (options.status === \"inactive\") {\n      conditions.push(\"t.isActive = 0\");\n    }\n\n    const whereClause = appendWhereClause(conditions);\n    const orderClause = buildOrderClause(\n      {\n        id: \"t.id\",\n        name: \"t.name\",\n        platformId: \"t.platformId\",\n        subjectId: \"t.subjectId\",\n        platformName: \"p.name\",\n        subjectName: \"s.name\",\n        qCount: \"t.qCount\",\n        status: \"t.isActive\",\n      },\n      options.sortColumn,\n      options.sortDirection,\n      \"t.id\",\n    );\n\n    const baseFrom =\n      \" FROM Topic t\" +\n      \" LEFT JOIN Subject s ON t.subjectId = s.id\" +\n      \" LEFT JOIN Platform p ON t.platformId = p.id\";\n\n    return runPaginatedQuery({\n      driver,\n      countQuery: `SELECT COUNT(*) as total${baseFrom}${whereClause}`,\n      dataQuery: `SELECT t.id, t.platformId, t.subjectId, t.name, t.isActive, t.qCount, p.name as platformName, s.name as subjectName${baseFrom}${whereClause}${orderClause} LIMIT ? OFFSET ?`,\n      params,\n      mapRow: (row) => mapTopicRow(row as Record<string, unknown>),\n      page: options.page,\n      pageSize: options.pageSize,\n    });\n  };\n\n  const getTopicDetails = async (id: number) => {\n    const { rows } = await driver.query(\n      `SELECT t.id, t.platformId, t.subjectId, t.name, t.isActive, t.qCount,\n              p.name as platformName,\n              s.name as subjectName\n       FROM Topic t\n       LEFT JOIN Subject s ON t.subjectId = s.id\n       LEFT JOIN Platform p ON t.platformId = p.id\n       WHERE t.id = ?\n       LIMIT 1`,\n      [id],\n    );\n    if (rows.length === 0) {\n      return null;\n    }\n    return mapTopicRow(rows[0] as Record<string, unknown>);\n  };\n\n  const searchRoadmaps = async (options: RoadmapSearchOptions = {}) => {\n    const conditions: string[] = [];\n    const params: QueryParameter[] = [];\n\n    const name = normalizeSearchTerm(options.name);\n    if (name) {\n      conditions.push(\"LOWER(r.name) LIKE LOWER(?)\");\n      params.push(`%${name}%`);\n    }\n\n    if (typeof options.platformId === \"number\" && Number.isFinite(options.platformId)) {\n      conditions.push(\"r.platformId = ?\");\n      params.push(Math.trunc(options.platformId));\n    }\n\n    if (typeof options.subjectId === \"number\" && Number.isFinite(options.subjectId)) {\n      conditions.push(\"r.subjectId = ?\");\n      params.push(Math.trunc(options.subjectId));\n    }\n\n    if (typeof options.topicId === \"number\" && Number.isFinite(options.topicId)) {\n      conditions.push(\"r.topicId = ?\");\n      params.push(Math.trunc(options.topicId));\n    }\n\n    if (typeof options.minQuestions === \"number\" && Number.isFinite(options.minQuestions)) {\n      conditions.push(\"r.qCount >= ?\");\n      params.push(Math.max(0, Math.trunc(options.minQuestions)));\n    }\n\n    if (typeof options.maxQuestions === \"number\" && Number.isFinite(options.maxQuestions)) {\n      conditions.push(\"r.qCount <= ?\");\n      params.push(Math.max(0, Math.trunc(options.maxQuestions)));\n    }\n\n    if (options.status === \"active\") {\n      conditions.push(\"r.isActive = 1\");\n    } else if (options.status === \"inactive\") {\n      conditions.push(\"r.isActive = 0\");\n    }\n\n    const whereClause = appendWhereClause(conditions);\n    const orderClause = buildOrderClause(\n      {\n        id: \"r.id\",\n        name: \"r.name\",\n        platformId: \"r.platformId\",\n        subjectId: \"r.subjectId\",\n        topicId: \"r.topicId\",\n        platformName: \"p.name\",\n        subjectName: \"s.name\",\n        topicName: \"t.name\",\n        qCount: \"r.qCount\",\n        status: \"r.isActive\",\n      },\n      options.sortColumn,\n      options.sortDirection,\n      \"r.id\",\n    );\n\n    const baseFrom =\n      \" FROM Roadmap r\" +\n      \" LEFT JOIN Platform p ON r.platformId = p.id\" +\n      \" LEFT JOIN Subject s ON r.subjectId = s.id\" +\n      \" LEFT JOIN Topic t ON r.topicId = t.id\";\n\n    return runPaginatedQuery({\n      driver,\n      countQuery: `SELECT COUNT(*) as total${baseFrom}${whereClause}`,\n      dataQuery: `SELECT r.id, r.platformId, r.subjectId, r.topicId, r.name, r.isActive, r.qCount,\n                         p.name as platformName,\n                         s.name as subjectName,\n                         t.name as topicName\n                  ${baseFrom}${whereClause}${orderClause} LIMIT ? OFFSET ?`,\n      params,\n      mapRow: (row) => mapRoadmapRow(row as Record<string, unknown>),\n      page: options.page,\n      pageSize: options.pageSize,\n    });\n  };\n\n  const getRoadmapDetails = async (id: number) => {\n    const { rows } = await driver.query(\n      `SELECT r.id, r.platformId, r.subjectId, r.topicId, r.name, r.isActive, r.qCount,\n              p.name as platformName,\n              s.name as subjectName,\n              t.name as topicName\n       FROM Roadmap r\n       LEFT JOIN Platform p ON r.platformId = p.id\n       LEFT JOIN Subject s ON r.subjectId = s.id\n       LEFT JOIN Topic t ON r.topicId = t.id\n       WHERE r.id = ?\n       LIMIT 1`,\n      [id],\n    );\n    if (rows.length === 0) {\n      return null;\n    }\n    return mapRoadmapRow(rows[0] as Record<string, unknown>);\n  };\n\n  const buildQuestionFilters = (\n    options: QuestionSearchOptions | RandomQuestionOptions[\"filters\"] = {},\n    excludeIds: number[] = [],\n  ) => {\n    const conditions: string[] = [];\n    const params: QueryParameter[] = [];\n\n    const questionText = normalizeSearchTerm(options?.questionText ?? null);\n    if (questionText) {\n      conditions.push(\"LOWER(q.q) LIKE LOWER(?)\");\n      params.push(`%${questionText}%`);\n    }\n\n    const platformId = options?.platformId;\n    if (typeof platformId === \"number\" && Number.isFinite(platformId)) {\n      conditions.push(\"q.platformId = ?\");\n      params.push(Math.trunc(platformId));\n    }\n\n    const subjectId = options?.subjectId;\n    if (typeof subjectId === \"number\" && Number.isFinite(subjectId)) {\n      conditions.push(\"q.subjectId = ?\");\n      params.push(Math.trunc(subjectId));\n    }\n\n    const topicId = options?.topicId;\n    if (typeof topicId === \"number\" && Number.isFinite(topicId)) {\n      conditions.push(\"q.topicId = ?\");\n      params.push(Math.trunc(topicId));\n    }\n\n    const roadmapId = options?.roadmapId;\n    if (typeof roadmapId === \"number\" && Number.isFinite(roadmapId)) {\n      conditions.push(\"q.roadmapId = ?\");\n      params.push(Math.trunc(roadmapId));\n    }\n\n    const level = normalizeLevel(options?.level ?? null);\n    if (level) {\n      conditions.push(\"UPPER(q.l) = ?\");\n      params.push(level);\n    }\n\n    if (options?.status === \"active\") {\n      conditions.push(\"q.isActive = 1\");\n    } else if (options?.status === \"inactive\") {\n      conditions.push(\"q.isActive = 0\");\n    }\n\n    const uniqueIds = Array.from(new Set(excludeIds.filter((id) => Number.isFinite(id) && id > 0))).map((id) =>\n      Math.trunc(id),\n    );\n    if (uniqueIds.length > 0) {\n      conditions.push(`q.id NOT IN (${uniqueIds.map(() => \"?\").join(\", \")})`);\n      params.push(...uniqueIds);\n    }\n\n    return { conditions, params };\n  };\n\n  const questionBaseFrom =\n    \" FROM Question q\" +\n    \" LEFT JOIN Platform p ON q.platformId = p.id\" +\n    \" LEFT JOIN Subject s ON q.subjectId = s.id\" +\n    \" LEFT JOIN Topic t ON q.topicId = t.id\" +\n    \" LEFT JOIN Roadmap r ON q.roadmapId = r.id\";\n\n  const searchQuestions = async (options: QuestionSearchOptions = {}) => {\n    const { conditions, params } = buildQuestionFilters(options);\n    const whereClause = appendWhereClause(conditions);\n    const orderClause = buildOrderClause(\n      {\n        id: \"q.id\",\n        questionText: \"q.q\",\n        platformId: \"q.platformId\",\n        subjectId: \"q.subjectId\",\n        topicId: \"q.topicId\",\n        roadmapId: \"q.roadmapId\",\n        platformName: \"p.name\",\n        subjectName: \"s.name\",\n        topicName: \"t.name\",\n        roadmapName: \"r.name\",\n        level: \"q.l\",\n        status: \"q.isActive\",\n      },\n      options.sortColumn,\n      options.sortDirection,\n      \"q.id\",\n    );\n\n    return runPaginatedQuery({\n      driver,\n      countQuery: `SELECT COUNT(*) as total${questionBaseFrom}${whereClause}`,\n      dataQuery: `SELECT q.id, q.platformId, q.subjectId, q.topicId, q.roadmapId, q.q, q.o, q.a, q.e, q.l, q.isActive,\n                         p.name as platformName,\n                         s.name as subjectName,\n                         t.name as topicName,\n                         r.name as roadmapName\n                  ${questionBaseFrom}${whereClause}${orderClause} LIMIT ? OFFSET ?`,\n      params,\n      mapRow: (row) => mapQuestionRow(row as Record<string, unknown>),\n      page: options.page,\n      pageSize: options.pageSize,\n    });\n  };\n\n  const getQuestionDetails = async (id: number) => {\n    const { rows } = await driver.query(\n      `SELECT q.id, q.platformId, q.subjectId, q.topicId, q.roadmapId, q.q, q.o, q.a, q.e, q.l, q.isActive,\n              p.name as platformName,\n              s.name as subjectName,\n              t.name as topicName,\n              r.name as roadmapName\n       ${questionBaseFrom}\n       WHERE q.id = ?\n       LIMIT 1`,\n      [id],\n    );\n    if (rows.length === 0) {\n      return null;\n    }\n    return mapQuestionRow(rows[0] as Record<string, unknown>);\n  };\n\n  const getRandomQuestions = async (options: RandomQuestionOptions = {}) => {\n    const limit = Math.max(1, Math.min(50, Math.trunc(options.limit ?? 10)));\n    const excludeIds = Array.isArray(options.excludeIds) ? options.excludeIds : [];\n    const { conditions, params } = buildQuestionFilters(options.filters ?? {}, excludeIds);\n    const whereClause = appendWhereClause(conditions);\n\n    return runPaginatedQuery({\n      driver,\n      countQuery: `SELECT COUNT(*) as total${questionBaseFrom}${whereClause}`,\n      dataQuery: `SELECT q.id, q.platformId, q.subjectId, q.topicId, q.roadmapId, q.q, q.o, q.a, q.e, q.l, q.isActive,\n                         p.name as platformName,\n                         s.name as subjectName,\n                         t.name as topicName,\n                         r.name as roadmapName\n                  ${questionBaseFrom}${whereClause} ORDER BY RANDOM() LIMIT ? OFFSET ?`,\n      params,\n      mapRow: (row) => mapQuestionRow(row as Record<string, unknown>),\n      page: 1,\n      pageSize: limit,\n    });\n  };\n\n  return {\n    searchPlatforms,\n    searchSubjects,\n    getSubjectDetails,\n    searchTopics,\n    getTopicDetails,\n    searchRoadmaps,\n    getRoadmapDetails,\n    searchQuestions,\n    getQuestionDetails,\n    getRandomQuestions,\n  };\n};\n","import { z } from \"zod\";\n\nimport type { AstroDbDriverOptions } from \"./drivers/astrodb\";\n\nconst AstroDbEnvSchema = z.object({\n  ASTRO_DB_URL: z.string().url(),\n  ASTRO_DB_AUTH_TOKEN: z.string().optional(),\n});\n\nexport type AstroDbEnvConfig = z.infer<typeof AstroDbEnvSchema>;\n\nexport const loadAstroDbConfig = (\n  env: Record<string, string | undefined> = typeof process !== \"undefined\" ? process.env : {},\n): AstroDbDriverOptions => {\n  const parsed = AstroDbEnvSchema.parse({\n    ASTRO_DB_URL: env.ASTRO_DB_URL,\n    ASTRO_DB_AUTH_TOKEN: env.ASTRO_DB_AUTH_TOKEN,\n  });\n\n  return {\n    url: parsed.ASTRO_DB_URL,\n    authToken: parsed.ASTRO_DB_AUTH_TOKEN,\n  };\n};\n"],"mappings":"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","names":["returningColumns","selectClause","returningColumns","selectClause","returningColumns","selectClause","returningColumns","selectClause","returningColumns","import_zod"]}
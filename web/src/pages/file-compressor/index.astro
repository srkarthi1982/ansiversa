---
import Layout from "../../layouts/Layout.astro";
import HeroSection from "../../components/HeroSection.astro";
import SectionHeading from "../../components/SectionHeading.astro";
import FeatureCard from "../../components/FeatureCard.astro";
import Button from "../../components/Button.astro";

const heroHighlights = [
  {
    title: "Format-aware intelligence",
    description:
      "Detect archives, media, and binary assets automatically, then route them through the optimal encoder without extra clicks.",
    icon: "fas fa-gauge-high",
  },
  {
    title: "Privacy-first workflows",
    description:
      "Keep small jobs fully local with WebAssembly codecs and graduate to server workers only when payloads demand it.",
    icon: "fas fa-user-shield",
  },
  {
    title: "Operational resilience",
    description:
      "Resume uploads, monitor queue telemetry, and deliver predictable artifacts even on long-running compression jobs.",
    icon: "fas fa-arrows-rotate",
  },
];

const formatStacks = [
  {
    title: "Archive engines",
    description:
      "ZIP (Deflate/Deflate64/Zstd), TAR.GZ, TAR.BZ2, TAR.ZSTD, 7Z (Pro), and RAR extraction with password prompts and split volumes.",
    icon: "fas fa-box-archive",
    items: [
      "Choose levels: Fast, Balanced, Max, with per-format defaults.",
      "AES-256 encryption for password-protected ZIPs when size and plan allow.",
      "Volume splitting with manifest metadata for downstream reconstruction.",
    ],
  },
  {
    title: "Image & media optimisation",
    description:
      "MozJPEG, Oxipng, WebP, AVIF, and adaptive resizing keep assets sharp while shrinking footprint.",
    icon: "fas fa-image",
    items: [
      "Strip EXIF and colour profiles when privacy requires it.",
      "Side-by-side previews with diff stats before committing changes.",
      "Batch pipelines combine resize, format convert, and watermark toggles.",
    ],
  },
  {
    title: "Document & text compression",
    description:
      "PDF object recompression, font subsetting, and gzip/brotli/zstd for structured assets.",
    icon: "fas fa-file-lines",
    items: [
      "Downsample embedded images with thresholds per plan tier.",
      "Strip metadata, comments, and annotations from PDF reports.",
      "Minify JSON, CSS, JS, CSV while keeping checksum manifests.",
    ],
  },
  {
    title: "Bundle intelligence",
    description:
      "Deduplicate identical files, maintain manifests, and export audit-ready reports for every job.",
    icon: "fas fa-diagram-project",
    items: [
      "SHA-256 hashes detect duplicates and reuse shared payloads.",
      "Artifact reports document each decision, warning, and optimisation.",
      "Share links honour expiries while tracking download receipts.",
    ],
  },
];

const workspaceRoutes = [
  {
    eyebrow: "Route: /compress",
    title: "Quick compress",
    description:
      "Drag-and-drop queue, choose archive format, enable passwords, and download in one motion.",
    icon: "fas fa-compress",
  },
  {
    eyebrow: "Route: /compress/optimize",
    title: "Optimiser console",
    description:
      "Fine-tune image, PDF, and text pipelines with visual previews and profile presets.",
    icon: "fas fa-sliders",
  },
  {
    eyebrow: "Route: /compress/extract",
    title: "Archive inspector",
    description:
      "Upload an archive, preview the tree, select entries, and extract securely to a fresh bundle.",
    icon: "fas fa-folder-tree",
  },
  {
    eyebrow: "Route: /compress/jobs",
    title: "Job monitor",
    description:
      "Track live progress, resume interrupted uploads, and download generated artifacts or reports.",
    icon: "fas fa-list-check",
  },
  {
    eyebrow: "Route: /compress/settings",
    title: "Defaults & quotas",
    description:
      "Set plan limits, retention windows, and favourite presets shared across the workspace.",
    icon: "fas fa-gear",
  },
];

const optimisationHighlights = [
  {
    title: "Client ↔ server orchestration",
    description:
      "Decide per file whether to stay in-browser with WASM codecs or escalate to sandboxed workers for heavy lifting.",
    icon: "fas fa-cloud",
  },
  {
    title: "Preset governance",
    description:
      "Version presets with change logs, owners, and plan-based quotas to keep automation predictable.",
    icon: "fas fa-clipboard-check",
  },
  {
    title: "Volume & dedupe controls",
    description:
      "Enable chunked uploads, configure split sizes, and review dedupe matches before finalising archives.",
    icon: "fas fa-layer-group",
  },
  {
    title: "Telemetry & alerts",
    description:
      "Event timelines highlight warnings, failed assets, and share-link activity for compliance teams.",
    icon: "fas fa-chart-line",
  },
];

const securityHighlights = [
  {
    title: "Safety gates",
    description:
      "Block disallowed MIME types, quarantine suspicious archives, and enforce plan-aware size limits.",
    icon: "fas fa-shield-halved",
  },
  {
    title: "Privacy controls",
    description:
      "Retention windows, secure wipe actions, and password storage policies put users in charge of data.",
    icon: "fas fa-lock",
  },
  {
    title: "Audit trails",
    description:
      "Immutable job logs capture operators, presets, hashes, and share-link events for downstream review.",
    icon: "fas fa-file-shield",
  },
];

const planMatrix = [
  { feature: "Max upload per job", free: "200 MB", pro: "5 GB" },
  { feature: "Split archives", free: "—", pro: "✅" },
  { feature: "Password AES-256", free: "✅ (≤200 MB)", pro: "✅ (all sizes)" },
  { feature: "7Z / Zstandard", free: "—", pro: "✅" },
  { feature: "Image AVIF/WebP", free: "✅", pro: "✅ (batch + advanced)" },
  { feature: "PDF optimiser", free: "Basic", pro: "Advanced (OCR downsample, font subset)" },
  { feature: "Share links", free: "3 active", pro: "100 active" },
  { feature: "Job retention", free: "24 hours", pro: "7–30 days" },
];

const apiGroups = [
  {
    title: "Jobs & lifecycle",
    description: "Create, track, cancel, and download compression jobs.",
    endpoints: [
      "POST /compress/api/job/create",
      "GET /compress/api/job/status?id=",
      "POST /compress/api/job/cancel",
      "GET /compress/api/job/download?id=&artifact=archive",
      "GET /compress/api/job/download?id=&artifact=report",
    ],
  },
  {
    title: "Extraction & shares",
    description: "Serve archive previews, selective extracts, and expiring share links.",
    endpoints: [
      "POST /compress/api/extract",
      "POST /compress/api/share/create",
      "POST /compress/api/share/revoke",
      "GET /compress/api/share/get?id=",
    ],
  },
  {
    title: "Presets & settings",
    description: "Persist preferred recipes and workspace defaults.",
    endpoints: [
      "POST /compress/api/preset/save",
      "POST /compress/api/preset/delete",
      "POST /compress/api/job/settings",
    ],
  },
  {
    title: "Workers & cleanup",
    description: "Background jobs maintain artifacts and quotas.",
    endpoints: [
      "Worker compress:run",
      "Worker compress:cleanup",
    ],
  },
];

const integrationHighlights = [
  {
    title: "Presentation-ready outputs",
    description:
      "Send finished archives into Presentation Designer to produce branded image cards or slide decks instantly.",
    icon: "fas fa-presentation-screen",
  },
  {
    title: "Dataset-friendly exports",
    description:
      "Deliver manifests and reports to Course Tracker, Study Planner, or Research Assistant pipelines for reuse.",
    icon: "fas fa-database",
  },
  {
    title: "Automation hooks",
    description:
      "Emit job events to webhooks, Zapier bridges, or custom workers to trigger follow-up processing.",
    icon: "fas fa-plug",
  },
];
---

<Layout>
  <main class="min-h-screen bg-slate-50">
    <HeroSection
      eyebrow="File Compressor"
      title="Compression built for privacy, scale, and insight"
      description="Bundle, optimise, and safeguard every asset with password protection, dedupe intelligence, and resumable jobs."
      background="bg-gradient-to-br from-slate-950 via-blue-900 to-slate-900 text-white"
      padding="py-16"
      containerClass="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8"
      align="left"
      titleClass="mt-6 text-4xl font-black tracking-tight sm:text-5xl"
      descriptionClass="mt-6 max-w-2xl text-base text-white/80"
    >
      <Fragment slot="actions">
        <Button href="/compress" variant="secondary">
          <i class="fas fa-play text-sm" aria-hidden="true"></i>
          Open compressor
        </Button>
        <Button href="/compress/jobs" variant="outline" class="text-white border-white/40 text-sm">
          <i class="fas fa-chart-simple text-sm" aria-hidden="true"></i>
          View job monitor
        </Button>
        <Button href="/compress/settings" variant="ghost" class="text-white/80">
          <i class="fas fa-sliders text-sm" aria-hidden="true"></i>
          Adjust defaults
        </Button>
      </Fragment>
    </HeroSection>

    <section class="mx-auto max-w-6xl px-4 pb-16 pt-12 sm:px-6 lg:px-8">
      <div class="grid gap-6 md:grid-cols-3">
        {heroHighlights.map((highlight) => (
          <FeatureCard
            title={highlight.title}
            description={highlight.description}
            icon={highlight.icon}
            class="bg-white/70 backdrop-blur"
            iconWrapperClass="flex h-10 w-10 items-center justify-center rounded-xl bg-blue-500/15 text-blue-600"
          />
        ))}
      </div>
    </section>

    <section class="bg-white py-16">
      <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Compression stack"
          title="Every format, optimised"
          description="Archive and optimise documents, media, and structured assets with plan-aware controls and guided defaults."
        />
        <div class="mt-12 grid gap-6 lg:grid-cols-2">
          {formatStacks.map((stack) => (
            <FeatureCard
              title={stack.title}
              description={stack.description}
              icon={stack.icon}
            >
              <ul class="mt-3 space-y-2 text-sm text-slate-600">
                {stack.items.map((item) => (
                  <li class="flex items-start gap-2">
                    <span class="mt-1 h-1.5 w-1.5 rounded-full bg-blue-500"></span>
                    <span>{item}</span>
                  </li>
                ))}
              </ul>
            </FeatureCard>
          ))}
        </div>
      </div>
    </section>

    <section class="bg-slate-900 py-16 text-white">
      <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Workspace routes"
          title="Dedicated pages for every task"
          description="Switch between quick compress, deep optimisation, extraction, job insights, and account-wide defaults."
          align="center"
          eyebrowClass="text-xs font-semibold uppercase tracking-[0.35em] text-blue-300"
          titleClass="mt-3 text-3xl font-bold tracking-tight sm:text-4xl text-white"
          descriptionClass="mt-4 text-base text-white/80"
        />
        <div class="mt-12 grid gap-6 lg:grid-cols-5">
          {workspaceRoutes.map((route) => (
            <FeatureCard
              title={route.title}
              description={route.description}
              icon={route.icon}
              eyebrow={route.eyebrow}
              baseClass="rounded-3xl border border-white/20 bg-white/5 p-6 backdrop-blur"
              eyebrowClass="text-xs font-semibold uppercase tracking-wide text-blue-200"
              titleClass="text-lg font-semibold text-white"
              descriptionClass="mt-3 text-sm text-white/80"
              iconWrapperClass="flex h-10 w-10 items-center justify-center rounded-xl bg-white/15 text-blue-200"
            />
          ))}
        </div>
      </div>
    </section>

    <section class="bg-slate-100 py-16">
      <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Automation"
          title="Smart controls for demanding teams"
          description="Balance client privacy with server horsepower, govern presets, and keep dedupe plus telemetry at your fingertips."
        />
        <div class="mt-12 grid gap-6 md:grid-cols-2">
          {optimisationHighlights.map((highlight) => (
            <FeatureCard
              title={highlight.title}
              description={highlight.description}
              icon={highlight.icon}
            />
          ))}
        </div>
      </div>
    </section>

    <section class="bg-white py-16">
      <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Security & compliance"
          title="Protect every artifact"
          description="Safety gates, privacy policies, and audit trails ensure every compression run meets organisational standards."
        />
        <div class="mt-12 grid gap-6 md:grid-cols-3">
          {securityHighlights.map((highlight) => (
            <FeatureCard
              title={highlight.title}
              description={highlight.description}
              icon={highlight.icon}
            />
          ))}
        </div>
      </div>
    </section>

    <section class="bg-slate-900 py-16">
      <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Plans"
          title="Pick the right compression tier"
          description="Start free for lighter workflows and upgrade to Pro when you need bigger payloads, advanced codecs, and extended retention."
          align="center"
          eyebrowClass="text-xs font-semibold uppercase tracking-[0.35em] text-blue-300"
          titleClass="mt-3 text-3xl font-bold tracking-tight sm:text-4xl text-white"
          descriptionClass="mt-4 text-base text-white/80"
        />
        <div class="mt-12 overflow-hidden rounded-3xl border border-white/10 bg-white/5 shadow-xl backdrop-blur">
          <table class="min-w-full divide-y divide-white/10 text-sm text-white/80">
            <thead class="bg-white/10 text-white">
              <tr>
                <th scope="col" class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wide">Feature</th>
                <th scope="col" class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wide">Free</th>
                <th scope="col" class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wide">Pro</th>
              </tr>
            </thead>
            <tbody>
              {planMatrix.map((row, index) => (
                <tr class={index % 2 === 0 ? "bg-white/0" : "bg-white/5"}>
                  <td class="px-6 py-4 text-white">{row.feature}</td>
                  <td class="px-6 py-4">{row.free}</td>
                  <td class="px-6 py-4">{row.pro}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="bg-white py-16">
      <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Developer surface"
          title="APIs, workers, and share flows"
          description="Automate compression from your own tools, manage presets, and deliver artifacts through expiring links."
        />
        <div class="mt-12 grid gap-6 md:grid-cols-2">
          {apiGroups.map((group) => (
            <FeatureCard
              title={group.title}
              description={group.description}
              icon="fas fa-terminal"
            >
              <ul class="mt-3 space-y-2 text-sm text-slate-600">
                {group.endpoints.map((endpoint) => (
                  <li class="rounded-xl bg-slate-100 px-3 py-2 font-mono text-xs text-slate-700">{endpoint}</li>
                ))}
              </ul>
            </FeatureCard>
          ))}
        </div>
      </div>
    </section>

    <section class="bg-slate-100 py-16">
      <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Integrations"
          title="Connect File Compressor across Ansiversa"
          description="Push optimised bundles into neighbouring apps or trigger automations the moment jobs complete."
          align="center"
        />
        <div class="mt-12 grid gap-6 md:grid-cols-3">
          {integrationHighlights.map((highlight) => (
            <FeatureCard
              title={highlight.title}
              description={highlight.description}
              icon={highlight.icon}
            />
          ))}
        </div>
      </div>
    </section>

    <section class="bg-white py-16">
      <div class="mx-auto max-w-4xl px-4 text-center sm:px-6 lg:px-8">
        <SectionHeading
          eyebrow="Get started"
          title="Launch your first compression job"
          description="Drop a sample bundle, choose a preset, and export an audit report to see the full pipeline end to end."
          align="center"
        />
        <div class="mt-8 flex flex-wrap justify-center gap-4">
          <Button href="/compress" variant="primary">
            <i class="fas fa-compress-arrows-alt text-sm" aria-hidden="true"></i>
            Start compressing
          </Button>
          <Button href="/compress/optimize" variant="outline">
            <i class="fas fa-wand-magic-sparkles text-sm" aria-hidden="true"></i>
            Explore optimisers
          </Button>
        </div>
      </div>
    </section>
  </main>
</Layout>

---
import { SectionHeading, Button } from '@ansiversa/components';
---
<section id="library" class="bg-slate-50 py-16 sm:py-20">
  <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
    <SectionHeading
      eyebrow="Block library"
      title="A modular system for every section"
      description="Pull from structured hero layouts, editorial cards, promo grids, testimonial callouts, and compliance-ready footers. Every block carries tone guidance, alt-text prompts, and CTA defaults."
    />
    <div class="mt-10 grid gap-6 lg:grid-cols-3" x-cloak>
      <template x-for="group in emailNewsletter.state.blockLibrary" :key="group.id">
        <div class="relative flex h-full flex-col rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
          <div class="flex items-center gap-3">
            <span class="flex h-11 w-11 items-center justify-center rounded-2xl bg-indigo-100 text-indigo-600">
              <i :class="group.icon"></i>
            </span>
            <div>
              <p class="text-sm font-semibold uppercase tracking-wide text-indigo-500">Library</p>
              <h3 class="text-lg font-semibold text-slate-900" x-text="group.title"></h3>
            </div>
          </div>
          <p class="mt-3 text-sm text-slate-600" x-text="group.description"></p>
          <ul class="mt-5 flex-1 space-y-4">
            <template x-for="block in group.blocks" :key="block.id">
              <li class="rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3">
                <div class="flex items-start justify-between gap-3">
                  <div>
                    <p class="text-sm font-semibold text-slate-900" x-text="block.name"></p>
                    <p class="mt-1 text-xs text-slate-500" x-text="block.summary"></p>
                  </div>
                  <span class="inline-flex items-center gap-2 rounded-full bg-white px-2 py-1 text-[11px] font-semibold text-slate-500">
                    <i class="fas fa-bullseye text-[10px]"></i>
                    <span x-text="block.bestFor"></span>
                  </span>
                </div>
                <div class="mt-3 grid grid-cols-2 gap-2 text-[11px] text-slate-500">
                  <template x-for="field in block.fields" :key="field">
                    <span class="rounded-xl border border-slate-200 bg-white px-2 py-1" x-text="field"></span>
                  </template>
                </div>
              </li>
            </template>
          </ul>
          <Button
            type="button"
            variant="outline"
            class="mt-5 w-full"
            @click.prevent="emailNewsletter.setActivePanel('properties'); document.getElementById('workspace')?.scrollIntoView({ behavior: 'smooth' })"
          >
            <i class="fas fa-plus text-[11px]"></i>
            Add from library
          </Button>
        </div>
      </template>
    </div>
  </div>
</section>

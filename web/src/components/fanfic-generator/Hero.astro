---
import Button from "../Button.astro";
---
<section
  id="fanfic-hero"
  class="relative overflow-hidden bg-slate-950 py-16 text-white sm:py-20"
  x-data="() => ({ fanfic: $store['fanfic-generator'] })"
>
  <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,rgba(99,102,241,0.3),rgba(15,23,42,0.95))]"></div>
  <div class="relative mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
    <div class="flex flex-col gap-12 lg:flex-row lg:items-center">
      <div class="space-y-6 lg:w-1/2">
        <div class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/10 px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.35em] text-indigo-200">
          Fanfiction Ops Suite
        </div>
        <h1 class="text-4xl font-semibold leading-tight tracking-tight sm:text-5xl">
          Fanfic Generator â€” canon-aware drafting with AU mastery
        </h1>
        <p class="max-w-xl text-base text-slate-300 sm:text-lg">
          Spin transformative fanworks without losing continuity. Queue AU presets, safety checks, trope trackers, and beta feedback in one alpine-powered command center.
        </p>
        <div class="flex flex-wrap items-center gap-3">
          <Button type="button" class="shadow-lg shadow-indigo-500/30" @click.prevent="fanfic.view.showWizard = true">
            <i class="fa-solid fa-sparkles text-xs"></i>
            Launch canon setup wizard
          </Button>
          <Button type="button" variant="outline" class="border-white/20 text-white hover:bg-white/10" @click.prevent="fanfic.togglePlan()">
            <i class="fa-solid fa-shuffle text-xs"></i>
            <span x-text="fanfic.state.plan === 'pro' ? 'View Free toolkit' : 'Preview Pro unlocks'"></span>
          </Button>
          <Button type="button" variant="ghost" class="text-indigo-200 hover:text-white" @click.prevent="fanfic.setPanel('threads')">
            <i class="fa-solid fa-diagram-project text-xs"></i>
            Explore thread matrix
          </Button>
        </div>
        <div class="grid gap-4 sm:grid-cols-2">
          <div class="rounded-3xl border border-white/10 bg-white/10 p-4 shadow-lg shadow-indigo-500/20">
            <p class="text-xs font-semibold uppercase tracking-[0.35em] text-indigo-200">Active projects</p>
            <p class="mt-3 flex items-baseline gap-2 text-3xl font-semibold">
              <span x-text="fanfic.state.metrics.activeProjects"></span>
              <span class="text-xs font-semibold uppercase tracking-[0.25em] text-indigo-200">live</span>
            </p>
            <p class="mt-2 text-xs text-slate-300">Keep up to 2 projects free, or unlock unlimited with Pro.</p>
          </div>
          <div class="rounded-3xl border border-white/10 bg-white/5 p-4">
            <p class="text-xs font-semibold uppercase tracking-[0.35em] text-indigo-200">Words tracked</p>
            <p class="mt-3 text-3xl font-semibold" x-text="fanfic.formatNumber(fanfic.state.metrics.wordsTracked)"></p>
            <p class="mt-2 text-xs text-slate-300">Draft queue currently holding <span class="font-semibold text-indigo-200" x-text="fanfic.state.metrics.draftsInQueue"></span> chapters.</p>
          </div>
        </div>
      </div>
      <div class="lg:w-1/2">
        <div class="space-y-5 rounded-3xl border border-indigo-400/40 bg-gradient-to-br from-indigo-500/30 via-slate-900 to-slate-950 p-6 shadow-2xl shadow-indigo-500/20">
          <div class="flex items-center justify-between gap-3">
            <h2 class="text-lg font-semibold">Workspace signals</h2>
            <span class="inline-flex items-center gap-2 rounded-full bg-indigo-500/20 px-3 py-1 text-xs font-semibold text-indigo-100">
              <i class="fa-solid fa-crown text-[10px]"></i>
              <span x-text="fanfic.state.plan === 'pro' ? 'Pro toolkit' : 'Free essentials'"></span>
            </span>
          </div>
          <dl class="grid gap-4 text-sm text-indigo-100 sm:grid-cols-2">
            <div class="rounded-2xl border border-white/10 bg-white/5 px-4 py-3">
              <dt class="text-xs uppercase tracking-[0.3em] text-indigo-200">Beta notes open</dt>
              <dd class="mt-1 text-xl font-semibold" x-text="fanfic.state.metrics.betaNotesOpen"></dd>
              <p class="mt-1 text-[11px] text-indigo-200/80">Resolve pacing and canon flags before export.</p>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/5 px-4 py-3">
              <dt class="text-xs uppercase tracking-[0.3em] text-indigo-200">Exports ready</dt>
              <dd class="mt-1 text-xl font-semibold" x-text="fanfic.state.metrics.exportsReady"></dd>
              <p class="mt-1 text-[11px] text-indigo-200/80">Markdown + EPUB bundles stay in sync.</p>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/5 px-4 py-3">
              <dt class="text-xs uppercase tracking-[0.3em] text-indigo-200">Generation queue</dt>
              <dd class="mt-1 text-xl font-semibold" x-text="fanfic.state.generationQueue.length"></dd>
              <p class="mt-1 text-[11px] text-indigo-200/80">Beat, chapter, scene passes in progress.</p>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/5 px-4 py-3">
              <dt class="text-xs uppercase tracking-[0.3em] text-indigo-200">Last activity</dt>
              <dd class="mt-1 text-sm font-semibold" x-text="fanfic.formatRelative(fanfic.state.activity[0]?.timestamp)"></dd>
              <p class="mt-1 text-[11px] text-indigo-200/80">Pull an audit trail of canon updates anytime.</p>
            </div>
          </dl>
          <div class="rounded-2xl border border-white/10 bg-slate-950/70 px-4 py-3 text-xs text-indigo-200">
            <p class="font-semibold text-indigo-100">AU presets unlocked</p>
            <p class="mt-1">
              <span x-text="fanfic.state.plan === 'pro' ? 'Full library: royalty, space opera, time loop, superhero, more.' : 'Starter set: coffee shop + college AU.'"></span>
            </p>
          </div>
          <div class="space-y-2 text-xs text-indigo-200">
            <template x-for="tab in fanfic.workspaceTabs" :key="tab.id">
              <div class="flex items-center justify-between rounded-xl border border-white/10 bg-white/5 px-4 py-2">
                <span class="inline-flex items-center gap-2 font-semibold text-indigo-100">
                  <i class="fa-solid" :class="`${tab.icon} text-[11px]`"></i>
                  <span x-text="tab.label"></span>
                </span>
                <span class="text-[11px]" x-text="tab.description"></span>
              </div>
            </template>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

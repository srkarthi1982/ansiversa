import { clone } from '../utils/clone';
import type { EmailNewsletterWriterSample } from '../types/email-newsletter-writer';

const baseSample: EmailNewsletterWriterSample = {
  plan: 'free',
  usage: {
    issuesUsed: 2,
    issuesLimit: 5,
    exportsUsed: 1,
    exportsLimit: 5,
    lastExportAt: '2025-03-18T14:25:00Z',
  },
  issue: {
    id: 'issue-spring-2025',
    title: 'Spring Growth Playbook',
    goal: 'Drive 18% trial conversions for the automation launch.',
    audience: 'Marketing operations leads at SaaS scaleups (25-150 seats).',
    sendWindow: {
      start: '2025-04-16T14:30:00Z',
      end: '2025-04-16T18:00:00Z',
      timezone: 'America/New_York',
    },
    status: 'draft',
    kpis: [
      { label: 'Open rate', target: '38%', progress: 32, trend: 'up' },
      { label: 'Click-through', target: '7%', progress: 5.4, trend: 'steady' },
      { label: 'New trials', target: '250', progress: 148, trend: 'up' },
    ],
    subjectTests: [
      {
        id: 'ab-subject',
        target: 'subject',
        hypothesis: 'Personalised value framing increases opens by 6%.',
        variants: [
          {
            id: 'variant-a',
            label: 'Variant A',
            value: '[Playbook] How RevOps teams add 18% pipeline with live automations',
            uplift: 8,
            tone: 'professional',
          },
          {
            id: 'variant-b',
            label: 'Variant B',
            value: 'The Spring automation launch marketers asked for (templates inside)',
            uplift: 3,
            tone: 'warm',
          },
        ],
        chosen: 'variant-a',
      },
      {
        id: 'ab-preheader',
        target: 'preheader',
        hypothesis: 'Urgency-driven preview text nudges conversions.',
        variants: [
          {
            id: 'preheader-a',
            label: 'Variant A',
            value: 'Preview the three highest converting journeys before they ship',
            uplift: 5,
            tone: 'confident',
          },
          {
            id: 'preheader-b',
            label: 'Variant B',
            value: 'Claim your automation launch kit before partner access opens',
            uplift: 2,
            tone: 'urgent',
          },
        ],
        chosen: 'preheader-a',
      },
    ],
    blocks: [
      {
        id: 'block-hero',
        type: 'hero',
        label: 'Hero spotlight',
        summary: 'Feature the campaign promise with a bold CTA and social proof.',
        metrics: { wordCount: 96, links: 1, media: 1 },
        warnings: [
          'Hero button uses "Click here" — consider action-driven CTA.',
        ],
        fields: [
          {
            label: 'Headline',
            value: 'Automation ROI, measured and live in your CRM',
            emphasis: 'primary',
          },
          {
            label: 'Subheading',
            value: 'See how growth teams orchestrate multi-channel journeys with the new Ansiversa automation studio.',
          },
          {
            label: 'Primary CTA',
            value: 'Build your launch workspace',
          },
          {
            label: 'Supporting media alt text',
            value: 'Marketer reviewing automation dashboard heat map',
          },
        ],
      },
      {
        id: 'block-story',
        type: 'article',
        label: 'Launch story',
        summary: 'Narrative section with customer quote and quick stats.',
        metrics: { wordCount: 184, links: 3 },
        fields: [
          {
            label: 'Section title',
            value: 'What changed for NovaOps after orchestrating revenue sequences',
            emphasis: 'primary',
          },
          {
            label: 'Key stat highlight',
            value: '42% faster lead qualification · 11% uplift in expansion revenue',
          },
          {
            label: 'Quote pull',
            value: '“Ansiversa let us test and launch 9 sequences in a week — with deliverability scores we couldn’t reach manually.”',
            tone: 'warm',
          },
          {
            label: 'CTA link',
            value: 'Watch the NovaOps teardown',
          },
        ],
      },
      {
        id: 'block-grid',
        type: 'product-grid',
        label: 'Feature grid',
        summary: 'Three-card grid showcasing automation recipes.',
        metrics: { wordCount: 132, links: 3 },
        fields: [
          { label: 'Recipe 1', value: 'Lifecycle scoring with intent-based routing' },
          { label: 'Recipe 2', value: 'Expansion nudges with UTM merging' },
          { label: 'Recipe 3', value: 'Partner onboarding checklist automation' },
        ],
      },
      {
        id: 'block-footer',
        type: 'footer',
        label: 'Compliance footer',
        summary: 'Legal address, contact channels, unsubscribe + preferences.',
        metrics: { wordCount: 48, links: 4 },
        fields: [
          { label: 'Company name', value: 'Ansiversa Labs, Inc.' },
          { label: 'Mailing address', value: '79 Howard Street, Floor 5 · New York, NY 10013' },
          { label: 'Unsubscribe copy', value: 'Prefer fewer updates? Update your preferences or unsubscribe instantly.' },
          { label: 'Contact line', value: 'Questions? Reply or email deliverability@ansiversa.com' },
        ],
      },
    ],
    qa: {
      spamScore: 2.4,
      accessibilityScore: 94,
      deliverabilityStatus: 'warn',
      warnings: [
        {
          id: 'qa-spam-cta',
          category: 'spam',
          message: 'CTA button still uses a generic “Click here”.',
          suggestion: 'Switch to intent-focused text such as “Preview automation dashboard”.',
          severity: 'medium',
        },
        {
          id: 'qa-a11y-alt',
          category: 'accessibility',
          message: 'One product grid image is missing alt text.',
          suggestion: 'Add descriptive alt text or mark as decorative if purely visual.',
          severity: 'medium',
        },
        {
          id: 'qa-legal-address',
          category: 'compliance',
          message: 'Footer address missing suite number from company profile.',
          suggestion: 'Sync address with verified profile or add suite/office identifier.',
          severity: 'low',
        },
      ],
      checklist: [
        { id: 'check-footer', label: 'Physical mailing address present', status: 'warn', note: 'Suite number missing' },
        { id: 'check-unsub', label: 'Unsubscribe link active', status: 'pass' },
        { id: 'check-alt', label: 'All hero and grid images have alt text', status: 'warn', note: '1 image missing alt text' },
        { id: 'check-links', label: 'All external links tagged with UTM', status: 'pass' },
        { id: 'check-contrast', label: 'Contrast AA compliance', status: 'pass' },
      ],
    },
    theme: {
      palette: {
        primary: '#4f46e5',
        secondary: '#0f172a',
        accent: '#f97316',
        background: '#f8fafc',
        darkMode: '#0b1120',
      },
      typography: {
        headings: 'General Sans · 600',
        body: 'Inter · 400',
      },
      buttonShape: 'pill',
      spacing: 'cozy',
    },
    metrics: {
      readingTime: '4 min 20 sec',
      imageTextRatio: '32% image · 68% text',
      altCoverage: '92%',
      totalLinks: 12,
      totalWords: 648,
    },
    utmPreset: {
      name: 'Spring Automation Launch',
      parameters: {
        source: 'newsletter',
        medium: 'email',
        campaign: 'spring-automation-launch',
        term: 'revops',
        content: 'issue-5',
      },
      enabled: true,
    },
    timeline: [
      { step: 'Research', description: 'Outline audience pains and compile sources.', completed: true },
      { step: 'Draft', description: 'Assemble hero, story, and CTA blocks with AI assists.', completed: true },
      { step: 'QA', description: 'Run accessibility, spam, and compliance sweeps.', completed: false },
      { step: 'Schedule', description: 'Finalize subject/preheader, queue send window.', completed: false },
    ],
  },
  blockLibrary: [
    {
      id: 'group-hero',
      title: 'Hero & Narrative',
      icon: 'fas fa-bullseye',
      description: 'Premium storytelling modules that introduce the issue and spotlight outcomes.',
      blocks: [
        {
          id: 'block-hero-split',
          name: 'Split hero',
          summary: 'Image + copy hero with CTA, support for dark mode overlay.',
          bestFor: 'Launches, marquee announcements',
          fields: ['Headline', 'Subheading', 'CTA label', 'Hero media'],
        },
        {
          id: 'block-story-quote',
          name: 'Proof story',
          summary: 'Narrative layout with customer quote and numeric impact badge.',
          bestFor: 'Case study snippets',
          fields: ['Headline', 'Quote', 'Attribution', 'Stat list'],
        },
      ],
    },
    {
      id: 'group-content',
      title: 'Content Blocks',
      icon: 'fas fa-layer-group',
      description: 'Flexible layouts for articles, product updates, events, and editorial cards.',
      blocks: [
        {
          id: 'block-articles',
          name: 'Article list',
          summary: 'Three story teaser cards with metadata and category tags.',
          bestFor: 'Weekly roundups, curated content',
          fields: ['Article title', 'Summary', 'CTA label', 'Article URL'],
        },
        {
          id: 'block-grid',
          name: 'Product grid',
          summary: 'Responsive 3 or 4-column feature showcase with CTA buttons.',
          bestFor: 'Feature launches, product education',
          fields: ['Item title', 'Supporting copy', 'CTA text', 'Image alt'],
        },
        {
          id: 'block-testimonial',
          name: 'Testimonial card',
          summary: 'Large pull quote with avatar, rating, and CTA link.',
          bestFor: 'Social proof, onboarding sequences',
          fields: ['Quote', 'Author', 'Role/company', 'Link label'],
        },
      ],
    },
    {
      id: 'group-utility',
      title: 'Utility & Footer',
      icon: 'fas fa-toolbox',
      description: 'Compliance-ready footers, dividers, social bars, and preference centers.',
      blocks: [
        {
          id: 'block-divider',
          name: 'Pattern divider',
          summary: 'Accessible divider with optional callout label for section breaks.',
          bestFor: 'Transitions between topics',
          fields: ['Label', 'Icon', 'Accent color'],
        },
        {
          id: 'block-footer',
          name: 'Compliance footer',
          summary: 'Address, legal copy, social icons, and unsubscribe layout with RTL support.',
          bestFor: 'All sends (CAN-SPAM/GDPR)',
          fields: ['Company address', 'Unsubscribe URL', 'Support email', 'Preferences link'],
        },
      ],
    },
  ],
  templates: [
    {
      id: 'template-launch',
      name: 'Product launch spotlight',
      persona: 'B2B SaaS marketing',
      highlights: ['Hero + story + CTA', 'Feature grid', 'Compliance-ready footer'],
      bestFor: 'Feature announcements, lifecycle updates',
      timeToShip: '30 minutes with assets',
      tone: 'Confident, data-backed',
    },
    {
      id: 'template-digest',
      name: 'Editorial digest',
      persona: 'Media & publishers',
      highlights: ['Article list', 'Curated insights block', 'Sponsor slot'],
      bestFor: 'Weekly roundups, curated insights',
      timeToShip: '22 minutes once sources selected',
      tone: 'Warm, informative',
    },
    {
      id: 'template-commerce',
      name: 'Commerce stories',
      persona: 'Retail & DTC teams',
      highlights: ['Product grid', 'Offer spotlight', 'Social proof block'],
      bestFor: 'Seasonal promotions, product drops',
      timeToShip: '18 minutes with catalogue sync',
      tone: 'Energetic, concise',
    },
  ],
  automations: [
    {
      id: 'automation-rss',
      title: 'RSS import and summarise',
      trigger: 'New article detected on configured RSS feed',
      actions: ['Fetch content and extract hero assets', 'Summarise with tone alignment', 'Queue draft block in outline'],
      status: 'active',
      plan: 'pro',
    },
    {
      id: 'automation-checklist',
      title: 'Pre-send QA enforcement',
      trigger: 'Issue status switches to Ready to Schedule',
      actions: ['Run spam and a11y lints', 'Notify owner in Slack if blockers exist', 'Attach PDF export to Asana task'],
      status: 'active',
      plan: 'pro',
    },
    {
      id: 'automation-curation',
      title: 'Curated links assistant',
      trigger: 'Workspace opened after 7 days inactive',
      actions: ['Suggest three relevant sources', 'Pre-fill summary bullets', 'Recommend UTM preset'],
      status: 'draft',
      plan: 'free',
    },
  ],
  integrations: [
    { id: 'integrations-mailchimp', name: 'Mailchimp', category: 'ESP', capability: 'Push HTML + audience sync', status: 'stable' },
    { id: 'integrations-brevo', name: 'Brevo', category: 'ESP', capability: 'Export via ZIP + API', status: 'stable' },
    { id: 'integrations-convertkit', name: 'ConvertKit', category: 'ESP', capability: 'Markdown + asset packaging', status: 'beta' },
    { id: 'integrations-figma', name: 'Figma', category: 'Design', capability: 'Live theme tokens & component sync', status: 'beta' },
    { id: 'integrations-slack', name: 'Slack', category: 'Collaboration', capability: 'Send QA reports & approvals', status: 'stable' },
  ],
  aiAssistants: [
    {
      id: 'ai-outline',
      name: 'Outline strategist',
      description: 'Generates audience-specific outlines with KPI alignment and CTA suggestions.',
      modes: ['Outline', 'Campaign brief', 'Segment remix'],
      plan: 'free',
    },
    {
      id: 'ai-rewrite',
      name: 'Rewrite studio',
      description: 'Clarify, simplify, expand, or localise copy with deliverability-safe phrasing.',
      modes: ['Clarify', 'Simplify', 'Localise (EN/TA/AR/ES/HI)'],
      plan: 'free',
    },
    {
      id: 'ai-tone',
      name: 'Tone conductor',
      description: 'Shift entire blocks between professional, warm, playful, or urgent voice.',
      modes: ['Professional', 'Warm', 'Playful', 'Urgent'],
      plan: 'pro',
    },
    {
      id: 'ai-translator',
      name: 'Localization accelerator',
      description: 'Transcreate issues for multilingual audiences with RTL-aware layout hints.',
      modes: ['ES', 'HI', 'AR', 'TA'],
      plan: 'pro',
    },
  ],
  exportHistory: [
    {
      id: 'export-html',
      format: 'html',
      status: 'done',
      startedAt: '2025-03-18T14:20:00Z',
      completedAt: '2025-03-18T14:21:12Z',
      link: 'https://files.ansiversa.com/exports/html/issue-spring-2025.html',
      notes: 'Includes inline CSS with 600px max-width template.',
    },
    {
      id: 'export-json',
      format: 'json',
      status: 'done',
      startedAt: '2025-03-12T09:12:00Z',
      completedAt: '2025-03-12T09:12:30Z',
      link: 'https://files.ansiversa.com/exports/json/issue-spring-2025.json',
      notes: 'Used for automation sync to custom ESP.',
    },
    {
      id: 'export-zip',
      format: 'zip',
      status: 'queued',
      startedAt: '2025-03-19T08:05:00Z',
      link: null,
      notes: 'Packaging HTML + assets for Brevo import.',
    },
  ],
  planMatrix: [
    { feature: 'Projects', free: 'Up to 3 active', pro: 'Unlimited' },
    { feature: 'Issues per project', free: '5 drafts/month', pro: 'Unlimited + archival' },
    { feature: 'AI assists', free: 'Outline, rewrite, simplify', pro: 'Full suite + localisation' },
    { feature: 'A/B experiments', free: '2 variants (subject + preheader)', pro: '5 variants + hero copy' },
    { feature: 'QA automation', free: 'Manual run', pro: 'Auto-run + Slack alerts' },
    { feature: 'Exports/day', free: '5 (HTML/MD/JSON)', pro: '25 + ZIP packaging' },
    { feature: 'Brand themes', free: '1 per workspace', pro: 'Unlimited + Figma sync' },
    { feature: 'Workflow integrations', free: 'Slack + Zapier webhooks', pro: 'Native ESP pushes + API' },
  ],
  apiContracts: [
    {
      method: 'POST',
      path: '/email-newsletter-writer/api/issue/create',
      description: 'Create an issue with audience, goals, and KPIs.',
      requiresAuth: true,
      rateLimit: '60/min',
    },
    {
      method: 'PUT',
      path: '/email-newsletter-writer/api/block/update',
      description: 'Update a block’s fields, metadata, or order.',
      requiresAuth: true,
      rateLimit: '120/min',
    },
    {
      method: 'POST',
      path: '/email-newsletter-writer/api/ai/rewrite',
      description: 'Rewrite copy with tone and deliverability guards.',
      requiresAuth: true,
      rateLimit: '400/day (Pro)',
    },
    {
      method: 'POST',
      path: '/email-newsletter-writer/api/qa/run',
      description: 'Execute spam, accessibility, and compliance checks.',
      requiresAuth: true,
      rateLimit: '30/day (Free), 200/day (Pro)',
    },
    {
      method: 'POST',
      path: '/email-newsletter-writer/api/export',
      description: 'Queue HTML, Markdown, JSON, or ZIP exports.',
      requiresAuth: true,
      rateLimit: '25/day',
    },
  ],
  qaHighlights: [
    {
      title: 'Deliverability checks',
      items: [
        { label: 'Spam score', value: '2.4 / 5 — safe', status: 'good', icon: 'fas fa-shield-check' },
        { label: 'Link safety', value: 'All 12 links validated', status: 'good', icon: 'fas fa-link' },
        { label: 'Image:text ratio', value: '32% imagery', status: 'warn', icon: 'fas fa-image' },
      ],
    },
    {
      title: 'Accessibility & compliance',
      items: [
        { label: 'Alt text coverage', value: '92% complete', status: 'warn', icon: 'fas fa-eye' },
        { label: 'Contrast audits', value: 'AA compliant', status: 'good', icon: 'fas fa-adjust' },
        { label: 'Footer completeness', value: '3/4 required fields', status: 'warn', icon: 'fas fa-scale-balanced' },
      ],
    },
  ],
  roadmap: [
    {
      quarter: 'Q2 2025',
      items: ['Segment-based dark mode overrides', 'Canva + Notion content sources', 'Bulk asset compression & CDN rewrite'],
    },
    {
      quarter: 'Q3 2025',
      items: ['Team review with suggestions', 'ESP push adapters (Mailchimp, SendGrid)', 'Interactive analytics dashboard'],
    },
  ],
};

export const getEmailNewsletterWriterSample = (): EmailNewsletterWriterSample => clone(baseSample);
